
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style>
        body { font: 18px/1.3 Georgia; }
        a { text-decoration: none; color: #000080; }
        pre, code { font-family: Consolas; color: #e91e63; }
        h3 { font-family: sans-serif; }
        @media (min-width: 920px) {
            p { text-align: justify; }
        }
        </style>
    </head>
    <body>
        <div style="max-width: 30em; margin: auto;"><h3 id="p1-express-ideas-directly-in-code"><a name="Rp-direct"></a>P.1: Express ideas directly in code<a class="anchorjs-link " href="#p1-express-ideas-directly-in-code" aria-label="Anchor link for: p1 express ideas directly in code" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Compilers don’t read comments (or design documents) and neither do many programmers (consistently).
What is expressed in code has defined semantics and can (in principle) be checked by compilers and other tools.</p>
<h3 id="p2-write-in-iso-standard-c"><a name="Rp-Cplusplus"></a>P.2: Write in ISO Standard C++<a class="anchorjs-link " href="#p2-write-in-iso-standard-c" aria-label="Anchor link for: p2 write in iso standard c" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>This is a set of guidelines for writing ISO Standard C++.</p>
<h3 id="p3-express-intent"><a name="Rp-what"></a>P.3: Express intent<a class="anchorjs-link " href="#p3-express-intent" aria-label="Anchor link for: p3 express intent" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Unless the intent of some code is stated (e.g., in names or comments), it is impossible to tell whether the code does what it is supposed to do.</p>
<h3 id="p4-ideally-a-program-should-be-statically-type-safe"><a name="Rp-typesafe"></a>P.4: Ideally, a program should be statically type safe<a class="anchorjs-link " href="#p4-ideally-a-program-should-be-statically-type-safe" aria-label="Anchor link for: p4 ideally a program should be statically type safe" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Ideally, a program would be completely statically (compile-time) type safe.
Unfortunately, that is not possible. Problem areas:</p>
<h3 id="p5-prefer-compile-time-checking-to-run-time-checking"><a name="Rp-compile-time"></a>P.5: Prefer compile-time checking to run-time checking<a class="anchorjs-link " href="#p5-prefer-compile-time-checking-to-run-time-checking" aria-label="Anchor link for: p5 prefer compile time checking to run time checking" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Code clarity and performance.
You don’t need to write error handlers for errors caught at compile time.</p>
<h3 id="p6-what-cannot-be-checked-at-compile-time-should-be-checkable-at-run-time"><a name="Rp-run-time"></a>P.6: What cannot be checked at compile time should be checkable at run time<a class="anchorjs-link " href="#p6-what-cannot-be-checked-at-compile-time-should-be-checkable-at-run-time" aria-label="Anchor link for: p6 what cannot be checked at compile time should be checkable at run time" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Leaving hard-to-detect errors in a program is asking for crashes and bad results.</p>
<h3 id="p7-catch-run-time-errors-early"><a name="Rp-early"></a>P.7: Catch run-time errors early<a class="anchorjs-link " href="#p7-catch-run-time-errors-early" aria-label="Anchor link for: p7 catch run time errors early" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Avoid “mysterious” crashes.
Avoid errors leading to (possibly unrecognized) wrong results.</p>
<h3 id="p8-dont-leak-any-resources"><a name="Rp-leak"></a>P.8: Don’t leak any resources<a class="anchorjs-link " href="#p8-dont-leak-any-resources" aria-label="Anchor link for: p8 dont leak any resources" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Even a slow growth in resources will, over time, exhaust the availability of those resources.
This is particularly important for long-running programs, but is an essential piece of responsible programming behavior.</p>
<h3 id="p9-dont-waste-time-or-space"><a name="Rp-waste"></a>P.9: Don’t waste time or space<a class="anchorjs-link " href="#p9-dont-waste-time-or-space" aria-label="Anchor link for: p9 dont waste time or space" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>This is C++.</p>
<h3 id="p10-prefer-immutable-data-to-mutable-data"><a name="Rp-mutable"></a>P.10: Prefer immutable data to mutable data<a class="anchorjs-link " href="#p10-prefer-immutable-data-to-mutable-data" aria-label="Anchor link for: p10 prefer immutable data to mutable data" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>It is easier to reason about constants than about variables.
Something immutable cannot change unexpectedly.
Sometimes immutability enables better optimization.
You can’t have a data race on a constant.</p>
<p>See <a href="#S-const">Con: Constants and Immutability</a></p>
<h3 id="p11-encapsulate-messy-constructs-rather-than-spreading-through-the-code"><a name="Rp-library"></a>P.11: Encapsulate messy constructs, rather than spreading through the code<a class="anchorjs-link " href="#p11-encapsulate-messy-constructs-rather-than-spreading-through-the-code" aria-label="Anchor link for: p11 encapsulate messy constructs rather than spreading through the code" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Messy code is more likely to hide bugs and harder to write.
A good interface is easier and safer to use.
Messy, low-level code breeds more such code.</p>
<h3 id="p12-use-supporting-tools-as-appropriate"><a name="Rp-tools"></a>P.12: Use supporting tools as appropriate<a class="anchorjs-link " href="#p12-use-supporting-tools-as-appropriate" aria-label="Anchor link for: p12 use supporting tools as appropriate" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>There are many things that are done better “by machine”.
Computers don’t tire or get bored by repetitive tasks.
We typically have better things to do than repeatedly do routine tasks.</p>
<h3 id="p13-use-support-libraries-as-appropriate"><a name="Rp-lib"></a>P.13: Use support libraries as appropriate<a class="anchorjs-link " href="#p13-use-support-libraries-as-appropriate" aria-label="Anchor link for: p13 use support libraries as appropriate" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Using a well-designed, well-documented, and well-supported library saves time and effort;
its quality and documentation are likely to be greater than what you could do
if the majority of your time must be spent on an implementation.
The cost (time, effort, money, etc.) of a library can be shared over many users.
A widely used library is more likely to be kept up-to-date and ported to new systems than an individual application.
Knowledge of a widely-used library can save time on other/future projects.
So, if a suitable library exists for your application domain, use it.</p>
<h3 id="i1-make-interfaces-explicit"><a name="Ri-explicit"></a>I.1: Make interfaces explicit<a class="anchorjs-link " href="#i1-make-interfaces-explicit" aria-label="Anchor link for: i1 make interfaces explicit" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Correctness. Assumptions not stated in an interface are easily overlooked and hard to test.</p>
<h3 id="i2-avoid-global-variables"><a name="Ri-global"></a>I.2: Avoid global variables<a class="anchorjs-link " href="#i2-avoid-global-variables" aria-label="Anchor link for: i2 avoid global variables" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Non-<code class="highlighter-rouge no-highlight">const</code> global variables hide dependencies and make the dependencies subject to unpredictable changes.</p>
<h3 id="i3-avoid-singletons"><a name="Ri-singleton"></a>I.3: Avoid singletons<a class="anchorjs-link " href="#i3-avoid-singletons" aria-label="Anchor link for: i3 avoid singletons" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Singletons are basically complicated global objects in disguise.</p>
<h3 id="i4-make-interfaces-precisely-and-strongly-typed"><a name="Ri-typed"></a>I.4: Make interfaces precisely and strongly typed<a class="anchorjs-link " href="#i4-make-interfaces-precisely-and-strongly-typed" aria-label="Anchor link for: i4 make interfaces precisely and strongly typed" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Types are the simplest and best documentation, have well-defined meaning, and are guaranteed to be checked at compile time.
Also, precisely typed code is often optimized better.</p>
<h3 id="i5-state-preconditions-if-any"><a name="Ri-pre"></a>I.5: State preconditions (if any)<a class="anchorjs-link " href="#i5-state-preconditions-if-any" aria-label="Anchor link for: i5 state preconditions if any" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Arguments have meaning that may constrain their proper use in the callee.</p>
<h3 id="i6-prefer-expects-for-expressing-preconditions"><a name="Ri-expects"></a>I.6: Prefer <code class="highlighter-rouge no-highlight">Expects()</code> for expressing preconditions<a class="anchorjs-link " href="#i6-prefer-expects-for-expressing-preconditions" aria-label="Anchor link for: i6 prefer expects for expressing preconditions" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To make it clear that the condition is a precondition and to enable tool use.</p>
<h3 id="i7-state-postconditions"><a name="Ri-post"></a>I.7: State postconditions<a class="anchorjs-link " href="#i7-state-postconditions" aria-label="Anchor link for: i7 state postconditions" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To detect misunderstandings about the result and possibly catch erroneous implementations.</p>
<h3 id="i8-prefer-ensures-for-expressing-postconditions"><a name="Ri-ensures"></a>I.8: Prefer <code class="highlighter-rouge no-highlight">Ensures()</code> for expressing postconditions<a class="anchorjs-link " href="#i8-prefer-ensures-for-expressing-postconditions" aria-label="Anchor link for: i8 prefer ensures for expressing postconditions" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To make it clear that the condition is a postcondition and to enable tool use.</p>
<h3 id="i9-if-an-interface-is-a-template-document-its-parameters-using-concepts"><a name="Ri-concepts"></a>I.9: If an interface is a template, document its parameters using concepts<a class="anchorjs-link " href="#i9-if-an-interface-is-a-template-document-its-parameters-using-concepts" aria-label="Anchor link for: i9 if an interface is a template document its parameters using concepts" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Make the interface precisely specified and compile-time checkable in the (not so distant) future.</p>
<h3 id="i10-use-exceptions-to-signal-a-failure-to-perform-a-required-task"><a name="Ri-except"></a>I.10: Use exceptions to signal a failure to perform a required task<a class="anchorjs-link " href="#i10-use-exceptions-to-signal-a-failure-to-perform-a-required-task" aria-label="Anchor link for: i10 use exceptions to signal a failure to perform a required task" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>It should not be possible to ignore an error because that could leave the system or a computation in an undefined (or unexpected) state.
This is a major source of errors.</p>
<h3 id="i11-never-transfer-ownership-by-a-raw-pointer-t"><a name="Ri-raw"></a>I.11: Never transfer ownership by a raw pointer (<code class="highlighter-rouge no-highlight">T*</code>)<a class="anchorjs-link " href="#i11-never-transfer-ownership-by-a-raw-pointer-t" aria-label="Anchor link for: i11 never transfer ownership by a raw pointer t" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>If there is any doubt whether the caller or the callee owns an object, leaks or premature destruction will occur.</p>
<h3 id="i12-declare-a-pointer-that-must-not-be-null-as-not_null"><a name="Ri-nullptr"></a>I.12: Declare a pointer that must not be null as <code class="highlighter-rouge no-highlight">not_null</code><a class="anchorjs-link " href="#i12-declare-a-pointer-that-must-not-be-null-as-not_null" aria-label="Anchor link for: i12 declare a pointer that must not be null as not_null" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To help avoid dereferencing <code class="highlighter-rouge no-highlight">nullptr</code> errors.
To improve performance by avoiding redundant checks for <code class="highlighter-rouge no-highlight">nullptr</code>.</p>
<h3 id="i13-do-not-pass-an-array-as-a-single-pointer"><a name="Ri-array"></a>I.13: Do not pass an array as a single pointer<a class="anchorjs-link " href="#i13-do-not-pass-an-array-as-a-single-pointer" aria-label="Anchor link for: i13 do not pass an array as a single pointer" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>(pointer, size)-style interfaces are error-prone. Also, a plain pointer (to array) must rely on some convention to allow the callee to determine the size.</p>
<h3 id="i22-avoid-complex-initialization-of-global-objects"><a name="Ri-global-init"></a>I.22: Avoid complex initialization of global objects<a class="anchorjs-link " href="#i22-avoid-complex-initialization-of-global-objects" aria-label="Anchor link for: i22 avoid complex initialization of global objects" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Complex initialization can lead to undefined order of execution.</p>
<h3 id="i23-keep-the-number-of-function-arguments-low"><a name="Ri-nargs"></a>I.23: Keep the number of function arguments low<a class="anchorjs-link " href="#i23-keep-the-number-of-function-arguments-low" aria-label="Anchor link for: i23 keep the number of function arguments low" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Having many arguments opens opportunities for confusion. Passing lots of arguments is often costly compared to alternatives.</p>
<h3 id="i24-avoid-adjacent-unrelated-parameters-of-the-same-type"><a name="Ri-unrelated"></a>I.24: Avoid adjacent unrelated parameters of the same type<a class="anchorjs-link " href="#i24-avoid-adjacent-unrelated-parameters-of-the-same-type" aria-label="Anchor link for: i24 avoid adjacent unrelated parameters of the same type" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Adjacent arguments of the same type are easily swapped by mistake.</p>
<h3 id="i25-prefer-abstract-classes-as-interfaces-to-class-hierarchies"><a name="Ri-abstract"></a>I.25: Prefer abstract classes as interfaces to class hierarchies<a class="anchorjs-link " href="#i25-prefer-abstract-classes-as-interfaces-to-class-hierarchies" aria-label="Anchor link for: i25 prefer abstract classes as interfaces to class hierarchies" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Abstract classes are more likely to be stable than base classes with state.</p>
<h3 id="i26-if-you-want-a-cross-compiler-abi-use-a-c-style-subset"><a name="Ri-abi"></a>I.26: If you want a cross-compiler ABI, use a C-style subset<a class="anchorjs-link " href="#i26-if-you-want-a-cross-compiler-abi-use-a-c-style-subset" aria-label="Anchor link for: i26 if you want a cross compiler abi use a c style subset" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Different compilers implement different binary layouts for classes, exception handling, function names, and other implementation details.</p>
<h3 id="i27-for-stable-library-abi-consider-the-pimpl-idiom"><a name="Ri-pimpl"></a>I.27: For stable library ABI, consider the Pimpl idiom<a class="anchorjs-link " href="#i27-for-stable-library-abi-consider-the-pimpl-idiom" aria-label="Anchor link for: i27 for stable library abi consider the pimpl idiom" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Because private data members participate in class layout and private member functions participate in overload resolution, changes to those
implementation details require recompilation of all users of a class that uses them. A non-polymorphic interface class holding a pointer to
implementation (Pimpl) can isolate the users of a class from changes in its implementation at the cost of an indirection.</p>
<h3 id="i30-encapsulate-rule-violations"><a name="Ri-encapsulate"></a>I.30: Encapsulate rule violations<a class="anchorjs-link " href="#i30-encapsulate-rule-violations" aria-label="Anchor link for: i30 encapsulate rule violations" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To keep code simple and safe.
Sometimes, ugly, unsafe, or error-prone techniques are necessary for logical or performance reasons.
If so, keep them local, rather than “infecting” interfaces so that larger groups of programmers have to be aware of the
subtleties.
Implementation complexity should, if at all possible, not leak through interfaces into user code.</p>
<h3 id="f1-package-meaningful-operations-as-carefully-named-functions"><a name="Rf-package"></a>F.1: “Package” meaningful operations as carefully named functions<a class="anchorjs-link " href="#f1-package-meaningful-operations-as-carefully-named-functions" aria-label="Anchor link for: f1 package meaningful operations as carefully named functions" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Factoring out common code makes code more readable, more likely to be reused, and limit errors from complex code.
If something is a well-specified action, separate it out from its surrounding code and give it a name.</p>
<h3 id="f2-a-function-should-perform-a-single-logical-operation"><a name="Rf-logical"></a>F.2: A function should perform a single logical operation<a class="anchorjs-link " href="#f2-a-function-should-perform-a-single-logical-operation" aria-label="Anchor link for: f2 a function should perform a single logical operation" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A function that performs a single operation is simpler to understand, test, and reuse.</p>
<h3 id="f3-keep-functions-short-and-simple"><a name="Rf-single"></a>F.3: Keep functions short and simple<a class="anchorjs-link " href="#f3-keep-functions-short-and-simple" aria-label="Anchor link for: f3 keep functions short and simple" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Large functions are hard to read, more likely to contain complex code, and more likely to have variables in larger than minimal scopes.
Functions with complex control structures are more likely to be long and more likely to hide logical errors</p>
<h3 id="f4-if-a-function-may-have-to-be-evaluated-at-compile-time-declare-it-constexpr"><a name="Rf-constexpr"></a>F.4: If a function may have to be evaluated at compile time, declare it <code class="highlighter-rouge no-highlight">constexpr</code><a class="anchorjs-link " href="#f4-if-a-function-may-have-to-be-evaluated-at-compile-time-declare-it-constexpr" aria-label="Anchor link for: f4 if a function may have to be evaluated at compile time declare it constexpr" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><code class="highlighter-rouge no-highlight">constexpr</code> is needed to tell the compiler to allow compile-time evaluation.</p>
<h3 id="f5-if-a-function-is-very-small-and-time-critical-declare-it-inline"><a name="Rf-inline"></a>F.5: If a function is very small and time-critical, declare it <code class="highlighter-rouge no-highlight">inline</code><a class="anchorjs-link " href="#f5-if-a-function-is-very-small-and-time-critical-declare-it-inline" aria-label="Anchor link for: f5 if a function is very small and time critical declare it inline" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Some optimizers are good at inlining without hints from the programmer, but don’t rely on it.
Measure! Over the last 40 years or so, we have been promised compilers that can inline better than humans without hints from humans.
We are still waiting.
Specifying <code class="highlighter-rouge no-highlight">inline</code> encourages the compiler to do a better job.</p>
<h3 id="f6-if-your-function-may-not-throw-declare-it-noexcept"><a name="Rf-noexcept"></a>F.6: If your function may not throw, declare it <code class="highlighter-rouge no-highlight">noexcept</code><a class="anchorjs-link " href="#f6-if-your-function-may-not-throw-declare-it-noexcept" aria-label="Anchor link for: f6 if your function may not throw declare it noexcept" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>If an exception is not supposed to be thrown, the program cannot be assumed to cope with the error and should be terminated as soon as possible. Declaring a function <code class="highlighter-rouge no-highlight">noexcept</code> helps optimizers by reducing the number of alternative execution paths. It also speeds up the exit after failure.</p>
<h3 id="f7-for-general-use-take-t-or-t-arguments-rather-than-smart-pointers"><a name="Rf-smart"></a>F.7: For general use, take <code class="highlighter-rouge no-highlight">T*</code> or <code class="highlighter-rouge no-highlight">T&amp;</code> arguments rather than smart pointers<a class="anchorjs-link " href="#f7-for-general-use-take-t-or-t-arguments-rather-than-smart-pointers" aria-label="Anchor link for: f7 for general use take t or t arguments rather than smart pointers" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Passing a smart pointer transfers or shares ownership and should only be used when ownership semantics are intended (see <a href="#Rr-smartptrparam">R.30</a>).
Passing by smart pointer restricts the use of a function to callers that use smart pointers.
Passing a shared smart pointer (e.g., <code class="highlighter-rouge no-highlight">std::shared_ptr</code>) implies a run-time cost.</p>
<h3 id="f8-prefer-pure-functions"><a name="Rf-pure"></a>F.8: Prefer pure functions<a class="anchorjs-link " href="#f8-prefer-pure-functions" aria-label="Anchor link for: f8 prefer pure functions" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Pure functions are easier to reason about, sometimes easier to optimize (and even parallelize), and sometimes can be memoized.</p>
<h3 id="f9-unused-parameters-should-be-unnamed"><a name="Rf-unused"></a>F.9: Unused parameters should be unnamed<a class="anchorjs-link " href="#f9-unused-parameters-should-be-unnamed" aria-label="Anchor link for: f9 unused parameters should be unnamed" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability.
Suppression of unused parameter warnings.</p>
<h3 id="f15-prefer-simple-and-conventional-ways-of-passing-information"><a name="Rf-conventional"></a>F.15: Prefer simple and conventional ways of passing information<a class="anchorjs-link " href="#f15-prefer-simple-and-conventional-ways-of-passing-information" aria-label="Anchor link for: f15 prefer simple and conventional ways of passing information" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Using “unusual and clever” techniques causes surprises, slows understanding by other programmers, and encourages bugs.
If you really feel the need for an optimization beyond the common techniques, measure to ensure that it really is an improvement, and document/comment because the improvement may not be portable.</p>
<p>The following tables summarize the advice in the following Guidelines, F.16-21.</p>
<p>Normal parameter passing:</p>
<p><img src="./param-passing-normal.png" alt="Normal parameter passing table" title="Normal parameter passing"></p>
<p>Advanced parameter passing:</p>
<p><img src="./param-passing-advanced.png" alt="Advanced parameter passing table" title="Advanced parameter passing"></p>
<p>Use the advanced techniques only after demonstrating need, and document that need in a comment.</p>
<h3 id="f16-for-in-parameters-pass-cheaply-copied-types-by-value-and-others-by-reference-to-const"><a name="Rf-in"></a>F.16: For “in” parameters, pass cheaply-copied types by value and others by reference to <code class="highlighter-rouge no-highlight">const</code><a class="anchorjs-link " href="#f16-for-in-parameters-pass-cheaply-copied-types-by-value-and-others-by-reference-to-const" aria-label="Anchor link for: f16 for in parameters pass cheaply copied types by value and others by reference to const" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Both let the caller know that a function will not modify the argument, and both allow initialization by rvalues.</p>
<p>What is “cheap to copy” depends on the machine architecture, but two or three words (doubles, pointers, references) are usually best passed by value.
When copying is cheap, nothing beats the simplicity and safety of copying, and for small objects (up to two or three words) it is also faster than passing by reference because it does not require an extra indirection to access from the function.</p>
<h3 id="f17-for-in-out-parameters-pass-by-reference-to-non-const"><a name="Rf-inout"></a>F.17: For “in-out” parameters, pass by reference to non-<code class="highlighter-rouge no-highlight">const</code><a class="anchorjs-link " href="#f17-for-in-out-parameters-pass-by-reference-to-non-const" aria-label="Anchor link for: f17 for in out parameters pass by reference to non const" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>This makes it clear to callers that the object is assumed to be modified.</p>
<h3 id="f18-for-consume-parameters-pass-by-x-and-stdmove-the-parameter"><a name="Rf-consume"></a>F.18: For “consume” parameters, pass by <code class="highlighter-rouge no-highlight">X&amp;&amp;</code> and <code class="highlighter-rouge no-highlight">std::move</code> the parameter<a class="anchorjs-link " href="#f18-for-consume-parameters-pass-by-x-and-stdmove-the-parameter" aria-label="Anchor link for: f18 for consume parameters pass by x and stdmove the parameter" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>It’s efficient and eliminates bugs at the call site: <code class="highlighter-rouge no-highlight">X&amp;&amp;</code> binds to rvalues, which requires an explicit <code class="highlighter-rouge no-highlight">std::move</code> at the call site if passing an lvalue.</p>
<h3 id="f19-for-forward-parameters-pass-by-tp-and-only-stdforward-the-parameter"><a name="Rf-forward"></a>F.19: For “forward” parameters, pass by <code class="highlighter-rouge no-highlight">TP&amp;&amp;</code> and only <code class="highlighter-rouge no-highlight">std::forward</code> the parameter<a class="anchorjs-link " href="#f19-for-forward-parameters-pass-by-tp-and-only-stdforward-the-parameter" aria-label="Anchor link for: f19 for forward parameters pass by tp and only stdforward the parameter" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>If the object is to be passed onward to other code and not directly used by this function, we want to make this function agnostic to the argument <code class="highlighter-rouge no-highlight">const</code>-ness and rvalue-ness.</p>
<p>In that case, and only that case, make the parameter <code class="highlighter-rouge no-highlight">TP&amp;&amp;</code> where <code class="highlighter-rouge no-highlight">TP</code> is a template type parameter – it both <em>ignores</em> and <em>preserves</em> <code class="highlighter-rouge no-highlight">const</code>-ness and rvalue-ness. Therefore any code that uses a <code class="highlighter-rouge no-highlight">TP&amp;&amp;</code> is implicitly declaring that it itself doesn’t care about the variable’s <code class="highlighter-rouge no-highlight">const</code>-ness and rvalue-ness (because it is ignored), but that intends to pass the value onward to other code that does care about <code class="highlighter-rouge no-highlight">const</code>-ness and rvalue-ness (because it is preserved). When used as a parameter <code class="highlighter-rouge no-highlight">TP&amp;&amp;</code> is safe because any temporary objects passed from the caller will live for the duration of the function call. A parameter of type <code class="highlighter-rouge no-highlight">TP&amp;&amp;</code> should essentially always be passed onward via <code class="highlighter-rouge no-highlight">std::forward</code> in the body of the function.</p>
<h3 id="f20-for-out-output-values-prefer-return-values-to-output-parameters"><a name="Rf-out"></a>F.20: For “out” output values, prefer return values to output parameters<a class="anchorjs-link " href="#f20-for-out-output-values-prefer-return-values-to-output-parameters" aria-label="Anchor link for: f20 for out output values prefer return values to output parameters" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A return value is self-documenting, whereas a <code class="highlighter-rouge no-highlight">&amp;</code> could be either in-out or out-only and is liable to be misused.</p>
<p>This includes large objects like standard containers that use implicit move operations for performance and to avoid explicit memory management.</p>
<p>If you have multiple values to return, <a href="#Rf-out-multi">use a tuple</a> or similar multi-member type.</p>
<h3 id="f21-to-return-multiple-out-values-prefer-returning-a-tuple-or-struct"><a name="Rf-out-multi"></a>F.21: To return multiple “out” values, prefer returning a tuple or struct<a class="anchorjs-link " href="#f21-to-return-multiple-out-values-prefer-returning-a-tuple-or-struct" aria-label="Anchor link for: f21 to return multiple out values prefer returning a tuple or struct" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A return value is self-documenting as an “output-only” value.
Note that C++ does have multiple return values, by convention of using a <code class="highlighter-rouge no-highlight">tuple</code> (including <code class="highlighter-rouge no-highlight">pair</code>),
possibly with the extra convenience of <code class="highlighter-rouge no-highlight">tie</code> at the call site.</p>
<h3 id="f22-use-t-or-ownert-to-designate-a-single-object"><a name="Rf-ptr"></a>F.22: Use <code class="highlighter-rouge no-highlight">T*</code> or <code class="highlighter-rouge no-highlight">owner&lt;T*&gt;</code> to designate a single object<a class="anchorjs-link " href="#f22-use-t-or-ownert-to-designate-a-single-object" aria-label="Anchor link for: f22 use t or ownert to designate a single object" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability: it makes the meaning of a plain pointer clear.
Enables significant tool support.</p>
<h3 id="f23-use-a-not_nullt-to-indicate-that-null-is-not-a-valid-value"><a name="Rf-nullptr"></a>F.23: Use a <code class="highlighter-rouge no-highlight">not_null&lt;T&gt;</code> to indicate that “null” is not a valid value<a class="anchorjs-link " href="#f23-use-a-not_nullt-to-indicate-that-null-is-not-a-valid-value" aria-label="Anchor link for: f23 use a not_nullt to indicate that null is not a valid value" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Clarity. A function with a <code class="highlighter-rouge no-highlight">not_null&lt;T&gt;</code> parameter makes it clear that the caller of the function is responsible for any <code class="highlighter-rouge no-highlight">nullptr</code> checks that may be necessary.
Similarly, a function with a return value of <code class="highlighter-rouge no-highlight">not_null&lt;T&gt;</code> makes it clear that the caller of the function does not need to check for <code class="highlighter-rouge no-highlight">nullptr</code>.</p>
<h3 id="f24-use-a-spant-or-a-span_pt-to-designate-a-half-open-sequence"><a name="Rf-range"></a>F.24: Use a <code class="highlighter-rouge no-highlight">span&lt;T&gt;</code> or a <code class="highlighter-rouge no-highlight">span_p&lt;T&gt;</code> to designate a half-open sequence<a class="anchorjs-link " href="#f24-use-a-spant-or-a-span_pt-to-designate-a-half-open-sequence" aria-label="Anchor link for: f24 use a spant or a span_pt to designate a half open sequence" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Informal/non-explicit ranges are a source of errors.</p>
<h3 id="f25-use-a-zstring-or-a-not_nullzstring-to-designate-a-c-style-string"><a name="Rf-zstring"></a>F.25: Use a <code class="highlighter-rouge no-highlight">zstring</code> or a <code class="highlighter-rouge no-highlight">not_null&lt;zstring&gt;</code> to designate a C-style string<a class="anchorjs-link " href="#f25-use-a-zstring-or-a-not_nullzstring-to-designate-a-c-style-string" aria-label="Anchor link for: f25 use a zstring or a not_nullzstring to designate a c style string" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>C-style strings are ubiquitous. They are defined by convention: zero-terminated arrays of characters.
We must distinguish C-style strings from a pointer to a single character or an old-fashioned pointer to an array of characters.</p>
<h3 id="f26-use-a-unique_ptrt-to-transfer-ownership-where-a-pointer-is-needed"><a name="Rf-unique_ptr"></a>F.26: Use a <code class="highlighter-rouge no-highlight">unique_ptr&lt;T&gt;</code> to transfer ownership where a pointer is needed<a class="anchorjs-link " href="#f26-use-a-unique_ptrt-to-transfer-ownership-where-a-pointer-is-needed" aria-label="Anchor link for: f26 use a unique_ptrt to transfer ownership where a pointer is needed" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Using <code class="highlighter-rouge no-highlight">unique_ptr</code> is the cheapest way to pass a pointer safely.</p>
<p>See also <a href="#Rc-factory">C.50</a> regarding when to return a <code class="highlighter-rouge no-highlight">shared_ptr</code> from a factory.</p>
<h3 id="f27-use-a-shared_ptrt-to-share-ownership"><a name="Rf-shared_ptr"></a>F.27: Use a <code class="highlighter-rouge no-highlight">shared_ptr&lt;T&gt;</code> to share ownership<a class="anchorjs-link " href="#f27-use-a-shared_ptrt-to-share-ownership" aria-label="Anchor link for: f27 use a shared_ptrt to share ownership" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Using <code class="highlighter-rouge no-highlight">std::shared_ptr</code> is the standard way to represent shared ownership. That is, the last owner deletes the object.</p>
<h3 id="f60-prefer-t-over-t-when-no-argument-is-a-valid-option"><a name="Rf-ptr-ref"></a>F.60: Prefer <code class="highlighter-rouge no-highlight">T*</code> over <code class="highlighter-rouge no-highlight">T&amp;</code> when “no argument” is a valid option<a class="anchorjs-link " href="#f60-prefer-t-over-t-when-no-argument-is-a-valid-option" aria-label="Anchor link for: f60 prefer t over t when no argument is a valid option" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A pointer (<code class="highlighter-rouge no-highlight">T*</code>) can be a <code class="highlighter-rouge no-highlight">nullptr</code> and a reference (<code class="highlighter-rouge no-highlight">T&amp;</code>) cannot, there is no valid “null reference”.
Sometimes having <code class="highlighter-rouge no-highlight">nullptr</code> as an alternative to indicated “no object” is useful, but if it is not, a reference is notationally simpler and might yield better code.</p>
<h3 id="f42-return-a-t-to-indicate-a-position-only"><a name="Rf-return-ptr"></a>F.42: Return a <code class="highlighter-rouge no-highlight">T*</code> to indicate a position (only)<a class="anchorjs-link " href="#f42-return-a-t-to-indicate-a-position-only" aria-label="Anchor link for: f42 return a t to indicate a position only" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>That’s what pointers are good for.
Returning a <code class="highlighter-rouge no-highlight">T*</code> to transfer ownership is a misuse.</p>
<h3 id="f43-never-directly-or-indirectly-return-a-pointer-or-a-reference-to-a-local-object"><a name="Rf-dangle"></a>F.43: Never (directly or indirectly) return a pointer or a reference to a local object<a class="anchorjs-link " href="#f43-never-directly-or-indirectly-return-a-pointer-or-a-reference-to-a-local-object" aria-label="Anchor link for: f43 never directly or indirectly return a pointer or a reference to a local object" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To avoid the crashes and data corruption that can result from the use of such a dangling pointer.</p>
<h3 id="f44-return-a-t-when-copy-is-undesirable-and-returning-no-object-isnt-needed"><a name="Rf-return-ref"></a>F.44: Return a <code class="highlighter-rouge no-highlight">T&amp;</code> when copy is undesirable and “returning no object” isn’t needed<a class="anchorjs-link " href="#f44-return-a-t-when-copy-is-undesirable-and-returning-no-object-isnt-needed" aria-label="Anchor link for: f44 return a t when copy is undesirable and returning no object isnt needed" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The language guarantees that a <code class="highlighter-rouge no-highlight">T&amp;</code> refers to an object, so that testing for <code class="highlighter-rouge no-highlight">nullptr</code> isn’t necessary.</p>
<p><strong>See also</strong>: The return of a reference must not imply transfer of ownership:
<a href="#???">discussion of dangling pointer prevention</a> and <a href="#???">discussion of ownership</a>.</p>
<h3 id="f45-dont-return-a-t"><a name="Rf-return-ref-ref"></a>F.45: Don’t return a <code class="highlighter-rouge no-highlight">T&amp;&amp;</code><a class="anchorjs-link " href="#f45-dont-return-a-t" aria-label="Anchor link for: f45 dont return a t" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>It’s asking to return a reference to a destroyed temporary object. A <code class="highlighter-rouge no-highlight">&amp;&amp;</code> is a magnet for temporary objects. This is fine when the reference to the temporary is being passed “downward” to a callee, because the temporary is guaranteed to outlive the function call (see <a href="#Rf-consume">F.18</a> and <a href="#Rf-forward">F.19</a>). However, it’s not fine when passing such a reference “upward” to a larger caller scope. See also ???.</p>
<p>For passthrough functions that pass in parameters (by ordinary reference or by perfect forwarding) and want to return values, use simple <code class="highlighter-rouge no-highlight">auto</code> return type deduction (not <code class="highlighter-rouge no-highlight">auto&amp;&amp;</code>).</p>
<h3 id="f46-int-is-the-return-type-for-main"><a name="Rf-main"></a>F.46: <code class="highlighter-rouge no-highlight">int</code> is the return type for <code class="highlighter-rouge no-highlight">main()</code><a class="anchorjs-link " href="#f46-int-is-the-return-type-for-main" aria-label="Anchor link for: f46 int is the return type for main" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>It’s a language rule, but violated through “language extensions” so often that it is worth mentioning.
Declaring <code class="highlighter-rouge no-highlight">main</code> (the one global <code class="highlighter-rouge no-highlight">main</code> of a program) <code class="highlighter-rouge no-highlight">void</code> limits portability.</p>
<h3 id="f47-return-t-from-assignment-operators"><a name="Rf-assignment-op"></a>F.47: Return <code class="highlighter-rouge no-highlight">T&amp;</code> from assignment operators<a class="anchorjs-link " href="#f47-return-t-from-assignment-operators" aria-label="Anchor link for: f47 return t from assignment operators" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The convention for operator overloads (especially on value types) is for
<code class="highlighter-rouge no-highlight">operator=(const T&amp;)</code> to perform the assignment and then return (non-<code class="highlighter-rouge no-highlight">const</code>)
<code class="highlighter-rouge no-highlight">*this</code>.  This ensures consistency with standard-library types and follows the
principle of “do as the ints do.”</p>
<h3 id="f50-use-a-lambda-when-a-function-wont-do-to-capture-local-variables-or-to-write-a-local-function"><a name="Rf-capture-vs-overload"></a>F.50: Use a lambda when a function won’t do (to capture local variables, or to write a local function)<a class="anchorjs-link " href="#f50-use-a-lambda-when-a-function-wont-do-to-capture-local-variables-or-to-write-a-local-function" aria-label="Anchor link for: f50 use a lambda when a function wont do to capture local variables or to write a local function" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Functions can’t capture local variables or be declared at local scope; if you need those things, prefer a lambda where possible, and a handwritten function object where not. On the other hand, lambdas and function objects don’t overload; if you need to overload, prefer a function (the workarounds to make lambdas overload are ornate). If either will work, prefer writing a function; use the simplest tool necessary.</p>
<h3 id="f51-where-there-is-a-choice-prefer-default-arguments-over-overloading"><a name="Rf-default-args"></a>F.51: Where there is a choice, prefer default arguments over overloading<a class="anchorjs-link " href="#f51-where-there-is-a-choice-prefer-default-arguments-over-overloading" aria-label="Anchor link for: f51 where there is a choice prefer default arguments over overloading" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Default arguments simply provides alternative interfaces to a single implementation.
There is no guarantee that a set of overloaded functions all implement the same semantics.
The use of default arguments can avoid code replication.</p>
<h3 id="f52-prefer-capturing-by-reference-in-lambdas-that-will-be-used-locally-including-passed-to-algorithms"><a name="Rf-reference-capture"></a>F.52: Prefer capturing by reference in lambdas that will be used locally, including passed to algorithms<a class="anchorjs-link " href="#f52-prefer-capturing-by-reference-in-lambdas-that-will-be-used-locally-including-passed-to-algorithms" aria-label="Anchor link for: f52 prefer capturing by reference in lambdas that will be used locally including passed to algorithms" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>For efficiency and correctness, you nearly always want to capture by reference when using the lambda locally. This includes when writing or calling parallel algorithms that are local because they join before returning.</p>
<h3 id="f53-avoid-capturing-by-reference-in-lambdas-that-will-be-used-nonlocally-including-returned-stored-on-the-heap-or-passed-to-another-thread"><a name="Rf-value-capture"></a>F.53: Avoid capturing by reference in lambdas that will be used nonlocally, including returned, stored on the heap, or passed to another thread<a class="anchorjs-link " href="#f53-avoid-capturing-by-reference-in-lambdas-that-will-be-used-nonlocally-including-returned-stored-on-the-heap-or-passed-to-another-thread" aria-label="Anchor link for: f53 avoid capturing by reference in lambdas that will be used nonlocally including returned stored on the heap or passed to another thread" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Pointers and references to locals shouldn’t outlive their scope. Lambdas that capture by reference are just another place to store a reference to a local object, and shouldn’t do so if they (or a copy) outlive the scope.</p>
<h3 id="f54-if-you-capture-this-capture-all-variables-explicitly-no-default-capture"><a name="Rf-this-capture"></a>F.54: If you capture <code class="highlighter-rouge no-highlight">this</code>, capture all variables explicitly (no default capture)<a class="anchorjs-link " href="#f54-if-you-capture-this-capture-all-variables-explicitly-no-default-capture" aria-label="Anchor link for: f54 if you capture this capture all variables explicitly no default capture" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>It’s confusing. Writing <code class="highlighter-rouge no-highlight">[=]</code> in a member function appears to capture by value, but actually captures data members by reference because it actually captures the invisible <code class="highlighter-rouge no-highlight">this</code> pointer by value. If you meant to do that, write <code class="highlighter-rouge no-highlight">this</code> explicitly.</p>
<h3 id="f55-dont-use-va_arg-arguments"><a name="F-varargs"></a>F.55: Don’t use <code class="highlighter-rouge no-highlight">va_arg</code> arguments<a class="anchorjs-link " href="#f55-dont-use-va_arg-arguments" aria-label="Anchor link for: f55 dont use va_arg arguments" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Reading from a <code class="highlighter-rouge no-highlight">va_arg</code> assumes that the correct type was actually passed.
Passing to varargs assumes the correct type will be read.
This is fragile because it cannot generally be enforced to be safe in the language and so relies on programmer discipline to get it right.</p>
<h3 id="c1-organize-related-data-into-structures-structs-or-classes"><a name="Rc-org"></a>C.1: Organize related data into structures (<code class="highlighter-rouge no-highlight">struct</code>s or <code class="highlighter-rouge no-highlight">class</code>es)<a class="anchorjs-link " href="#c1-organize-related-data-into-structures-structs-or-classes" aria-label="Anchor link for: c1 organize related data into structures structs or classes" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Ease of comprehension.
If data is related (for fundamental reasons), that fact should be reflected in code.</p>
<h3 id="c2-use-class-if-the-class-has-an-invariant-use-struct-if-the-data-members-can-vary-independently"><a name="Rc-struct"></a>C.2: Use <code class="highlighter-rouge no-highlight">class</code> if the class has an invariant; use <code class="highlighter-rouge no-highlight">struct</code> if the data members can vary independently<a class="anchorjs-link " href="#c2-use-class-if-the-class-has-an-invariant-use-struct-if-the-data-members-can-vary-independently" aria-label="Anchor link for: c2 use class if the class has an invariant use struct if the data members can vary independently" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability.
Ease of comprehension.
The use of <code class="highlighter-rouge no-highlight">class</code> alerts the programmer to the need for an invariant.
This is a useful convention.</p>
<h3 id="c3-represent-the-distinction-between-an-interface-and-an-implementation-using-a-class"><a name="Rc-interface"></a>C.3: Represent the distinction between an interface and an implementation using a class<a class="anchorjs-link " href="#c3-represent-the-distinction-between-an-interface-and-an-implementation-using-a-class" aria-label="Anchor link for: c3 represent the distinction between an interface and an implementation using a class" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>An explicit distinction between interface and implementation improves readability and simplifies maintenance.</p>
<h3 id="c4-make-a-function-a-member-only-if-it-needs-direct-access-to-the-representation-of-a-class"><a name="Rc-member"></a>C.4: Make a function a member only if it needs direct access to the representation of a class<a class="anchorjs-link " href="#c4-make-a-function-a-member-only-if-it-needs-direct-access-to-the-representation-of-a-class" aria-label="Anchor link for: c4 make a function a member only if it needs direct access to the representation of a class" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Less coupling than with member functions, fewer functions that can cause trouble by modifying object state, reduces the number of functions that needs to be modified after a change in representation.</p>
<h3 id="c5-place-helper-functions-in-the-same-namespace-as-the-class-they-support"><a name="Rc-helper"></a>C.5: Place helper functions in the same namespace as the class they support<a class="anchorjs-link " href="#c5-place-helper-functions-in-the-same-namespace-as-the-class-they-support" aria-label="Anchor link for: c5 place helper functions in the same namespace as the class they support" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A helper function is a function (usually supplied by the writer of a class) that does not need direct access to the representation of the class, yet is seen as part of the useful interface to the class.
Placing them in the same namespace as the class makes their relationship to the class obvious and allows them to be found by argument dependent lookup.</p>
<h3 id="c7-dont-define-a-class-or-enum-and-declare-a-variable-of-its-type-in-the-same-statement"><a name="Rc-standalone"></a>C.7: Don’t define a class or enum and declare a variable of its type in the same statement<a class="anchorjs-link " href="#c7-dont-define-a-class-or-enum-and-declare-a-variable-of-its-type-in-the-same-statement" aria-label="Anchor link for: c7 dont define a class or enum and declare a variable of its type in the same statement" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Mixing a type definition and the definition of another entity in the same declaration is confusing and unnecessary.</p>
<h3 id="c8-use-class-rather-than-struct-if-any-member-is-non-public"><a name="Rc-class"></a>C.8: Use <code class="highlighter-rouge no-highlight">class</code> rather than <code class="highlighter-rouge no-highlight">struct</code> if any member is non-public<a class="anchorjs-link " href="#c8-use-class-rather-than-struct-if-any-member-is-non-public" aria-label="Anchor link for: c8 use class rather than struct if any member is non public" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability.
To make it clear that something is being hidden/abstracted.
This is a useful convention.</p>
<h3 id="c9-minimize-exposure-of-members"><a name="Rc-private"></a>C.9: Minimize exposure of members<a class="anchorjs-link " href="#c9-minimize-exposure-of-members" aria-label="Anchor link for: c9 minimize exposure of members" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Encapsulation.
Information hiding.
Minimize the chance of untended access.
This simplifies maintenance.</p>
<h3 id="c10-prefer-concrete-types-over-class-hierarchies"><a name="Rc-concrete"></a>C.10: Prefer concrete types over class hierarchies<a class="anchorjs-link " href="#c10-prefer-concrete-types-over-class-hierarchies" aria-label="Anchor link for: c10 prefer concrete types over class hierarchies" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A concrete type is fundamentally simpler than a hierarchy:
easier to design, easier to implement, easier to use, easier to reason about, smaller, and faster.
You need a reason (use cases) for using a hierarchy.</p>
<h3 id="c11-make-concrete-types-regular"><a name="Rc-regular"></a>C.11: Make concrete types regular<a class="anchorjs-link " href="#c11-make-concrete-types-regular" aria-label="Anchor link for: c11 make concrete types regular" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Regular types are easier to understand and reason about than types that are not regular (irregularities requires extra effort to understand and use).</p>
<h3 id="c20-if-you-can-avoid-defining-default-operations-do"><a name="Rc-zero"></a>C.20: If you can avoid defining default operations, do<a class="anchorjs-link " href="#c20-if-you-can-avoid-defining-default-operations-do" aria-label="Anchor link for: c20 if you can avoid defining default operations do" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>It’s the simplest and gives the cleanest semantics.</p>
<h3 id="c21-if-you-define-or-delete-any-default-operation-define-or-delete-them-all"><a name="Rc-five"></a>C.21: If you define or <code class="highlighter-rouge no-highlight">=delete</code> any default operation, define or <code class="highlighter-rouge no-highlight">=delete</code> them all<a class="anchorjs-link " href="#c21-if-you-define-or-delete-any-default-operation-define-or-delete-them-all" aria-label="Anchor link for: c21 if you define or delete any default operation define or delete them all" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The semantics of the special functions are closely related, so if one needs to be non-default, the odds are that others need modification too.</p>
<h3 id="c22-make-default-operations-consistent"><a name="Rc-matched"></a>C.22: Make default operations consistent<a class="anchorjs-link " href="#c22-make-default-operations-consistent" aria-label="Anchor link for: c22 make default operations consistent" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The default operations are conceptually a matched set. Their semantics are interrelated.
Users will be surprised if copy/move construction and copy/move assignment do logically different things. Users will be surprised if constructors and destructors do not provide a consistent view of resource management. Users will be surprised if copy and move don’t reflect the way constructors and destructors work.</p>
<h3 id="c30-define-a-destructor-if-a-class-needs-an-explicit-action-at-object-destruction"><a name="Rc-dtor"></a>C.30: Define a destructor if a class needs an explicit action at object destruction<a class="anchorjs-link " href="#c30-define-a-destructor-if-a-class-needs-an-explicit-action-at-object-destruction" aria-label="Anchor link for: c30 define a destructor if a class needs an explicit action at object destruction" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A destructor is implicitly invoked at the end of an object’s lifetime.
If the default destructor is sufficient, use it.
Only define a non-default destructor if a class needs to execute code that is not already part of its members’ destructors.</p>
<h3 id="c31-all-resources-acquired-by-a-class-must-be-released-by-the-classs-destructor"><a name="Rc-dtor-release"></a>C.31: All resources acquired by a class must be released by the class’s destructor<a class="anchorjs-link " href="#c31-all-resources-acquired-by-a-class-must-be-released-by-the-classs-destructor" aria-label="Anchor link for: c31 all resources acquired by a class must be released by the classs destructor" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Prevention of resource leaks, especially in error cases.</p>
<h3 id="c32-if-a-class-has-a-raw-pointer-t-or-reference-t-consider-whether-it-might-be-owning"><a name="Rc-dtor-ptr"></a>C.32: If a class has a raw pointer (<code class="highlighter-rouge no-highlight">T*</code>) or reference (<code class="highlighter-rouge no-highlight">T&amp;</code>), consider whether it might be owning<a class="anchorjs-link " href="#c32-if-a-class-has-a-raw-pointer-t-or-reference-t-consider-whether-it-might-be-owning" aria-label="Anchor link for: c32 if a class has a raw pointer t or reference t consider whether it might be owning" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>There is a lot of code that is non-specific about ownership.</p>
<h3 id="c33-if-a-class-has-an-owning-pointer-member-define-a-destructor"><a name="Rc-dtor-ptr2"></a>C.33: If a class has an owning pointer member, define a destructor<a class="anchorjs-link " href="#c33-if-a-class-has-an-owning-pointer-member-define-a-destructor" aria-label="Anchor link for: c33 if a class has an owning pointer member define a destructor" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>An owned object must be <code class="highlighter-rouge no-highlight">deleted</code> upon destruction of the object that owns it.</p>
<h3 id="c34-if-a-class-has-an-owning-reference-member-define-a-destructor"><a name="Rc-dtor-ref"></a>C.34: If a class has an owning reference member, define a destructor<a class="anchorjs-link " href="#c34-if-a-class-has-an-owning-reference-member-define-a-destructor" aria-label="Anchor link for: c34 if a class has an owning reference member define a destructor" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A reference member may represent a resource.
It should not do so, but in older code, that’s common.
See <a href="#Rc-dtor-ptr">pointer members and destructors</a>.
Also, copying may lead to slicing.</p>
<h3 id="c35-a-base-class-destructor-should-be-either-public-and-virtual-or-protected-and-nonvirtual"><a name="Rc-dtor-virtual"></a>C.35: A base class destructor should be either public and virtual, or protected and nonvirtual<a class="anchorjs-link " href="#c35-a-base-class-destructor-should-be-either-public-and-virtual-or-protected-and-nonvirtual" aria-label="Anchor link for: c35 a base class destructor should be either public and virtual or protected and nonvirtual" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To prevent undefined behavior.
If the destructor is public, then calling code can attempt to destroy a derived class object through a base class pointer, and the result is undefined if the base class’s destructor is non-virtual.
If the destructor is protected, then calling code cannot destroy through a base class pointer and the destructor does not need to be virtual; it does need to be protected, not private, so that derived destructors can invoke it.
In general, the writer of a base class does not know the appropriate action to be done upon destruction.</p>
<h3 id="c36-a-destructor-may-not-fail"><a name="Rc-dtor-fail"></a>C.36: A destructor may not fail<a class="anchorjs-link " href="#c36-a-destructor-may-not-fail" aria-label="Anchor link for: c36 a destructor may not fail" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>In general we do not know how to write error-free code if a destructor should fail.
The standard library requires that all classes it deals with have destructors that do not exit by throwing.</p>
<h3 id="c37-make-destructors-noexcept"><a name="Rc-dtor-noexcept"></a>C.37: Make destructors <code class="highlighter-rouge no-highlight">noexcept</code><a class="anchorjs-link " href="#c37-make-destructors-noexcept" aria-label="Anchor link for: c37 make destructors noexcept" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><a href="#Rc-dtor-fail">A destructor may not fail</a>. If a destructor tries to exit with an exception, it’s a bad design error and the program had better terminate.</p>
<h3 id="c40-define-a-constructor-if-a-class-has-an-invariant"><a name="Rc-ctor"></a>C.40: Define a constructor if a class has an invariant<a class="anchorjs-link " href="#c40-define-a-constructor-if-a-class-has-an-invariant" aria-label="Anchor link for: c40 define a constructor if a class has an invariant" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>That’s what constructors are for.</p>
<h3 id="c41-a-constructor-should-create-a-fully-initialized-object"><a name="Rc-complete"></a>C.41: A constructor should create a fully initialized object<a class="anchorjs-link " href="#c41-a-constructor-should-create-a-fully-initialized-object" aria-label="Anchor link for: c41 a constructor should create a fully initialized object" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A constructor establishes the invariant for a class. A user of a class should be able to assume that a constructed object is usable.</p>
<h3 id="c42-if-a-constructor-cannot-construct-a-valid-object-throw-an-exception"><a name="Rc-throw"></a>C.42: If a constructor cannot construct a valid object, throw an exception<a class="anchorjs-link " href="#c42-if-a-constructor-cannot-construct-a-valid-object-throw-an-exception" aria-label="Anchor link for: c42 if a constructor cannot construct a valid object throw an exception" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Leaving behind an invalid object is asking for trouble.</p>
<h3 id="c43-ensure-that-a-value-type-class-has-a-default-constructor"><a name="Rc-default0"></a>C.43: Ensure that a value type class has a default constructor<a class="anchorjs-link " href="#c43-ensure-that-a-value-type-class-has-a-default-constructor" aria-label="Anchor link for: c43 ensure that a value type class has a default constructor" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Many language and library facilities rely on default constructors to initialize their elements, e.g. <code class="highlighter-rouge no-highlight">T a[10]</code> and <code class="highlighter-rouge no-highlight">std::vector&lt;T&gt; v(10)</code>.
A default constructor often simplifies the task of defining a suitable <a href="#???">moved-from state</a>.</p>
<h3 id="c44-prefer-default-constructors-to-be-simple-and-non-throwing"><a name="Rc-default00"></a>C.44: Prefer default constructors to be simple and non-throwing<a class="anchorjs-link " href="#c44-prefer-default-constructors-to-be-simple-and-non-throwing" aria-label="Anchor link for: c44 prefer default constructors to be simple and non throwing" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Being able to set a value to “the default” without operations that might fail simplifies error handling and reasoning about move operations.</p>
<h3 id="c45-dont-define-a-default-constructor-that-only-initializes-data-members-use-in-class-member-initializers-instead"><a name="Rc-default"></a>C.45: Don’t define a default constructor that only initializes data members; use in-class member initializers instead<a class="anchorjs-link " href="#c45-dont-define-a-default-constructor-that-only-initializes-data-members-use-in-class-member-initializers-instead" aria-label="Anchor link for: c45 dont define a default constructor that only initializes data members use in class member initializers instead" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Using in-class member initializers lets the compiler generate the function for you. The compiler-generated function can be more efficient.</p>
<h3 id="c46-by-default-declare-single-argument-constructors-explicit"><a name="Rc-explicit"></a>C.46: By default, declare single-argument constructors explicit<a class="anchorjs-link " href="#c46-by-default-declare-single-argument-constructors-explicit" aria-label="Anchor link for: c46 by default declare single argument constructors explicit" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To avoid unintended conversions.</p>
<h3 id="c47-define-and-initialize-member-variables-in-the-order-of-member-declaration"><a name="Rc-order"></a>C.47: Define and initialize member variables in the order of member declaration<a class="anchorjs-link " href="#c47-define-and-initialize-member-variables-in-the-order-of-member-declaration" aria-label="Anchor link for: c47 define and initialize member variables in the order of member declaration" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To minimize confusion and errors. That is the order in which the initialization happens (independent of the order of member initializers).</p>
<h3 id="c48-prefer-in-class-initializers-to-member-initializers-in-constructors-for-constant-initializers"><a name="Rc-in-class-initializer"></a>C.48: Prefer in-class initializers to member initializers in constructors for constant initializers<a class="anchorjs-link " href="#c48-prefer-in-class-initializers-to-member-initializers-in-constructors-for-constant-initializers" aria-label="Anchor link for: c48 prefer in class initializers to member initializers in constructors for constant initializers" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Makes it explicit that the same value is expected to be used in all constructors. Avoids repetition. Avoids maintenance problems. It leads to the shortest and most efficient code.</p>
<h3 id="c49-prefer-initialization-to-assignment-in-constructors"><a name="Rc-initialize"></a>C.49: Prefer initialization to assignment in constructors<a class="anchorjs-link " href="#c49-prefer-initialization-to-assignment-in-constructors" aria-label="Anchor link for: c49 prefer initialization to assignment in constructors" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>An initialization explicitly states that initialization, rather than assignment, is done and can be more elegant and efficient. Prevents “use before set” errors.</p>
<h3 id="c50-use-a-factory-function-if-you-need-virtual-behavior-during-initialization"><a name="Rc-factory"></a>C.50: Use a factory function if you need “virtual behavior” during initialization<a class="anchorjs-link " href="#c50-use-a-factory-function-if-you-need-virtual-behavior-during-initialization" aria-label="Anchor link for: c50 use a factory function if you need virtual behavior during initialization" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>If the state of a base class object must depend on the state of a derived part of the object, we need to use a virtual function (or equivalent) while minimizing the window of opportunity to misuse an imperfectly constructed object.</p>
<h3 id="c51-use-delegating-constructors-to-represent-common-actions-for-all-constructors-of-a-class"><a name="Rc-delegating"></a>C.51: Use delegating constructors to represent common actions for all constructors of a class<a class="anchorjs-link " href="#c51-use-delegating-constructors-to-represent-common-actions-for-all-constructors-of-a-class" aria-label="Anchor link for: c51 use delegating constructors to represent common actions for all constructors of a class" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To avoid repetition and accidental differences.</p>
<h3 id="c52-use-inheriting-constructors-to-import-constructors-into-a-derived-class-that-does-not-need-further-explicit-initialization"><a name="Rc-inheriting"></a>C.52: Use inheriting constructors to import constructors into a derived class that does not need further explicit initialization<a class="anchorjs-link " href="#c52-use-inheriting-constructors-to-import-constructors-into-a-derived-class-that-does-not-need-further-explicit-initialization" aria-label="Anchor link for: c52 use inheriting constructors to import constructors into a derived class that does not need further explicit initialization" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>If you need those constructors for a derived class, re-implementing them is tedious and error-prone.</p>
<h3 id="c60-make-copy-assignment-non-virtual-take-the-parameter-by-const-and-return-by-non-const"><a name="Rc-copy-assignment"></a>C.60: Make copy assignment non-<code class="highlighter-rouge no-highlight">virtual</code>, take the parameter by <code class="highlighter-rouge no-highlight">const&amp;</code>, and return by non-<code class="highlighter-rouge no-highlight">const&amp;</code><a class="anchorjs-link " href="#c60-make-copy-assignment-non-virtual-take-the-parameter-by-const-and-return-by-non-const" aria-label="Anchor link for: c60 make copy assignment non virtual take the parameter by const and return by non const" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>It is simple and efficient. If you want to optimize for rvalues, provide an overload that takes a <code class="highlighter-rouge no-highlight">&amp;&amp;</code> (see <a href="#Rf-consume">F.18</a>).</p>
<h3 id="c61-a-copy-operation-should-copy"><a name="Rc-copy-semantic"></a>C.61: A copy operation should copy<a class="anchorjs-link " href="#c61-a-copy-operation-should-copy" aria-label="Anchor link for: c61 a copy operation should copy" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>That is the generally assumed semantics. After <code class="highlighter-rouge no-highlight">x = y</code>, we should have <code class="highlighter-rouge no-highlight">x == y</code>.
After a copy <code class="highlighter-rouge no-highlight">x</code> and <code class="highlighter-rouge no-highlight">y</code> can be independent objects (value semantics, the way non-pointer built-in types and the standard-library types work) or refer to a shared object (pointer semantics, the way pointers work).</p>
<h3 id="c62-make-copy-assignment-safe-for-self-assignment"><a name="Rc-copy-self"></a>C.62: Make copy assignment safe for self-assignment<a class="anchorjs-link " href="#c62-make-copy-assignment-safe-for-self-assignment" aria-label="Anchor link for: c62 make copy assignment safe for self assignment" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>If <code class="highlighter-rouge no-highlight">x = x</code> changes the value of <code class="highlighter-rouge no-highlight">x</code>, people will be surprised and bad errors will occur (often including leaks).</p>
<h3 id="c63-make-move-assignment-non-virtual-take-the-parameter-by--and-return-by-non-const-"><a name="Rc-move-assignment"></a>C.63: Make move assignment non-<code class="highlighter-rouge no-highlight">virtual</code>, take the parameter by <code class="highlighter-rouge no-highlight">&amp;&amp;</code>, and return by non-<code class="highlighter-rouge no-highlight">const &amp;</code><a class="anchorjs-link " href="#c63-make-move-assignment-non-virtual-take-the-parameter-by--and-return-by-non-const-" aria-label="Anchor link for: c63 make move assignment non virtual take the parameter by  and return by non const " data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>It is simple and efficient.</p>
<p><strong>See</strong>: <a href="#Rc-copy-assignment">The rule for copy-assignment</a>.</p>
<h3 id="c64-a-move-operation-should-move-and-leave-its-source-in-a-valid-state"><a name="Rc-move-semantic"></a>C.64: A move operation should move and leave its source in a valid state<a class="anchorjs-link " href="#c64-a-move-operation-should-move-and-leave-its-source-in-a-valid-state" aria-label="Anchor link for: c64 a move operation should move and leave its source in a valid state" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>That is the generally assumed semantics.
After <code class="highlighter-rouge no-highlight">y = std::move(x)</code> the value of <code class="highlighter-rouge no-highlight">y</code> should be the value <code class="highlighter-rouge no-highlight">x</code> had and <code class="highlighter-rouge no-highlight">x</code> should be in a valid state.</p>
<h3 id="c65-make-move-assignment-safe-for-self-assignment"><a name="Rc-move-self"></a>C.65: Make move assignment safe for self-assignment<a class="anchorjs-link " href="#c65-make-move-assignment-safe-for-self-assignment" aria-label="Anchor link for: c65 make move assignment safe for self assignment" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>If <code class="highlighter-rouge no-highlight">x = x</code> changes the value of <code class="highlighter-rouge no-highlight">x</code>, people will be surprised and bad errors may occur. However, people don’t usually directly write a self-assignment that turn into a move, but it can occur. However, <code class="highlighter-rouge no-highlight">std::swap</code> is implemented using move operations so if you accidentally do <code class="highlighter-rouge no-highlight">swap(a, b)</code> where <code class="highlighter-rouge no-highlight">a</code> and <code class="highlighter-rouge no-highlight">b</code> refer to the same object, failing to handle self-move could be a serious and subtle error.</p>
<h3 id="c66-make-move-operations-noexcept"><a name="Rc-move-noexcept"></a>C.66: Make move operations <code class="highlighter-rouge no-highlight">noexcept</code><a class="anchorjs-link " href="#c66-make-move-operations-noexcept" aria-label="Anchor link for: c66 make move operations noexcept" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A throwing move violates most people’s reasonably assumptions.
A non-throwing move will be used more efficiently by standard-library and language facilities.</p>
<h3 id="c67-a-base-class-should-suppress-copying-and-provide-a-virtual-clone-instead-if-copying-is-desired"><a name="Rc-copy-virtual"></a>C.67: A base class should suppress copying, and provide a virtual <code class="highlighter-rouge no-highlight">clone</code> instead if “copying” is desired<a class="anchorjs-link " href="#c67-a-base-class-should-suppress-copying-and-provide-a-virtual-clone-instead-if-copying-is-desired" aria-label="Anchor link for: c67 a base class should suppress copying and provide a virtual clone instead if copying is desired" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To prevent slicing, because the normal copy operations will copy only the base portion of a derived object.</p>
<h3 id="c80-use-default-if-you-have-to-be-explicit-about-using-the-default-semantics"><a name="Rc-eqdefault"></a>C.80: Use <code class="highlighter-rouge no-highlight">=default</code> if you have to be explicit about using the default semantics<a class="anchorjs-link " href="#c80-use-default-if-you-have-to-be-explicit-about-using-the-default-semantics" aria-label="Anchor link for: c80 use default if you have to be explicit about using the default semantics" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The compiler is more likely to get the default semantics right and you cannot implement these functions better than the compiler.</p>
<h3 id="c81-use-delete-when-you-want-to-disable-default-behavior-without-wanting-an-alternative"><a name="Rc-delete"></a>C.81: Use <code class="highlighter-rouge no-highlight">=delete</code> when you want to disable default behavior (without wanting an alternative)<a class="anchorjs-link " href="#c81-use-delete-when-you-want-to-disable-default-behavior-without-wanting-an-alternative" aria-label="Anchor link for: c81 use delete when you want to disable default behavior without wanting an alternative" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>In a few cases, a default operation is not desirable.</p>
<h3 id="c82-dont-call-virtual-functions-in-constructors-and-destructors"><a name="Rc-ctor-virtual"></a>C.82: Don’t call virtual functions in constructors and destructors<a class="anchorjs-link " href="#c82-dont-call-virtual-functions-in-constructors-and-destructors" aria-label="Anchor link for: c82 dont call virtual functions in constructors and destructors" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The function called will be that of the object constructed so far, rather than a possibly overriding function in a derived class.
This can be most confusing.
Worse, a direct or indirect call to an unimplemented pure virtual function from a constructor or destructor results in undefined behavior.</p>
<h3 id="c83-for-value-like-types-consider-providing-a-noexcept-swap-function"><a name="Rc-swap"></a>C.83: For value-like types, consider providing a <code class="highlighter-rouge no-highlight">noexcept</code> swap function<a class="anchorjs-link " href="#c83-for-value-like-types-consider-providing-a-noexcept-swap-function" aria-label="Anchor link for: c83 for value like types consider providing a noexcept swap function" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A <code class="highlighter-rouge no-highlight">swap</code> can be handy for implementing a number of idioms, from smoothly moving objects around to implementing assignment easily to providing a guaranteed commit function that enables strongly error-safe calling code. Consider using swap to implement copy assignment in terms of copy construction. See also <a href="#Re-never-fail">destructors, deallocation, and swap must never fail</a>.</p>
<h3 id="c84-a-swap-function-may-not-fail"><a name="Rc-swap-fail"></a>C.84: A <code class="highlighter-rouge no-highlight">swap</code> function may not fail<a class="anchorjs-link " href="#c84-a-swap-function-may-not-fail" aria-label="Anchor link for: c84 a swap function may not fail" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><code class="highlighter-rouge no-highlight">swap</code> is widely used in ways that are assumed never to fail and programs cannot easily be written to work correctly in the presence of a failing <code class="highlighter-rouge no-highlight">swap</code>. The standard-library containers and algorithms will not work correctly if a swap of an element type fails.</p>
<h3 id="c85-make-swap-noexcept"><a name="Rc-swap-noexcept"></a>C.85: Make <code class="highlighter-rouge no-highlight">swap</code> <code class="highlighter-rouge no-highlight">noexcept</code><a class="anchorjs-link " href="#c85-make-swap-noexcept" aria-label="Anchor link for: c85 make swap noexcept" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><a href="#Rc-swap-fail">A <code class="highlighter-rouge no-highlight">swap</code> may not fail</a>.
If a <code class="highlighter-rouge no-highlight">swap</code> tries to exit with an exception, it’s a bad design error and the program had better terminate.</p>
<h3 id="c86-make--symmetric-with-respect-to-operand-types-and-noexcept"><a name="Rc-eq"></a>C.86: Make <code class="highlighter-rouge no-highlight">==</code> symmetric with respect to operand types and <code class="highlighter-rouge no-highlight">noexcept</code><a class="anchorjs-link " href="#c86-make--symmetric-with-respect-to-operand-types-and-noexcept" aria-label="Anchor link for: c86 make  symmetric with respect to operand types and noexcept" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Asymmetric treatment of operands is surprising and a source of errors where conversions are possible.
<code class="highlighter-rouge no-highlight">==</code> is a fundamental operations and programmers should be able to use it without fear of failure.</p>
<h3 id="c87-beware-of--on-base-classes"><a name="Rc-eq-base"></a>C.87: Beware of <code class="highlighter-rouge no-highlight">==</code> on base classes<a class="anchorjs-link " href="#c87-beware-of--on-base-classes" aria-label="Anchor link for: c87 beware of  on base classes" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>It is really hard to write a foolproof and useful <code class="highlighter-rouge no-highlight">==</code> for a hierarchy.</p>
<h3 id="c89-make-a-hash-noexcept"><a name="Rc-hash"></a>C.89: Make a <code class="highlighter-rouge no-highlight">hash</code> <code class="highlighter-rouge no-highlight">noexcept</code><a class="anchorjs-link " href="#c89-make-a-hash-noexcept" aria-label="Anchor link for: c89 make a hash noexcept" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Users of hashed containers use hash indirectly and don’t expect simple access to throw.
It’s a standard-library requirement.</p>
<h3 id="c120-use-class-hierarchies-to-represent-concepts-with-inherent-hierarchical-structure-only"><a name="Rh-domain"></a>C.120: Use class hierarchies to represent concepts with inherent hierarchical structure (only)<a class="anchorjs-link " href="#c120-use-class-hierarchies-to-represent-concepts-with-inherent-hierarchical-structure-only" aria-label="Anchor link for: c120 use class hierarchies to represent concepts with inherent hierarchical structure only" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Direct representation of ideas in code eases comprehension and maintenance. Make sure the idea represented in the base class exactly matches all derived types and there is not a better way to express it than using the tight coupling of inheritance.</p>
<p>Do <em>not</em> use inheritance when simply having a data member will do. Usually this means that the derived type needs to override a base virtual function or needs access to a protected member.</p>
<h3 id="c121-if-a-base-class-is-used-as-an-interface-make-it-a-pure-abstract-class"><a name="Rh-abstract"></a>C.121: If a base class is used as an interface, make it a pure abstract class<a class="anchorjs-link " href="#c121-if-a-base-class-is-used-as-an-interface-make-it-a-pure-abstract-class" aria-label="Anchor link for: c121 if a base class is used as an interface make it a pure abstract class" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A class is more stable (less brittle) if it does not contain data.
Interfaces should normally be composed entirely of public pure virtual functions and a default/empty virtual destructor.</p>
<h3 id="c122-use-abstract-classes-as-interfaces-when-complete-separation-of-interface-and-implementation-is-needed"><a name="Rh-separation"></a>C.122: Use abstract classes as interfaces when complete separation of interface and implementation is needed<a class="anchorjs-link " href="#c122-use-abstract-classes-as-interfaces-when-complete-separation-of-interface-and-implementation-is-needed" aria-label="Anchor link for: c122 use abstract classes as interfaces when complete separation of interface and implementation is needed" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Such as on an ABI (link) boundary.</p>
<h3 id="c126-an-abstract-class-typically-doesnt-need-a-constructor"><a name="Rh-abstract-ctor"></a>C.126: An abstract class typically doesn’t need a constructor<a class="anchorjs-link " href="#c126-an-abstract-class-typically-doesnt-need-a-constructor" aria-label="Anchor link for: c126 an abstract class typically doesnt need a constructor" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>An abstract class typically does not have any data for a constructor to initialize.</p>
<h3 id="c127-a-class-with-a-virtual-function-should-have-a-virtual-or-protected-destructor"><a name="Rh-dtor"></a>C.127: A class with a virtual function should have a virtual or protected destructor<a class="anchorjs-link " href="#c127-a-class-with-a-virtual-function-should-have-a-virtual-or-protected-destructor" aria-label="Anchor link for: c127 a class with a virtual function should have a virtual or protected destructor" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A class with a virtual function is usually (and in general) used via a pointer to base. Usually, the last user has to call delete on a pointer to base, often via a smart pointer to base, so the destructor should be public and virtual. Less commonly, if deletion through a pointer to base is not intended to be supported, the destructor should be protected and nonvirtual; see <a href="#Rc-dtor-virtual">C.35</a>.</p>
<h3 id="c128-virtual-functions-should-specify-exactly-one-of-virtual-override-or-final"><a name="Rh-override"></a>C.128: Virtual functions should specify exactly one of <code class="highlighter-rouge no-highlight">virtual</code>, <code class="highlighter-rouge no-highlight">override</code>, or <code class="highlighter-rouge no-highlight">final</code><a class="anchorjs-link " href="#c128-virtual-functions-should-specify-exactly-one-of-virtual-override-or-final" aria-label="Anchor link for: c128 virtual functions should specify exactly one of virtual override or final" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability.
Detection of mistakes.
Writing explicit <code class="highlighter-rouge no-highlight">virtual</code>, <code class="highlighter-rouge no-highlight">override</code>, or <code class="highlighter-rouge no-highlight">final</code> is self-documenting and enables the compiler to catch mismatch of types and/or names between base and derived classes. However, writing more than one of these three is both redundant and a potential source of errors.</p>
<p>Use <code class="highlighter-rouge no-highlight">virtual</code> only when declaring a new virtual function. Use <code class="highlighter-rouge no-highlight">override</code> only when declaring an overrider. Use <code class="highlighter-rouge no-highlight">final</code> only when declaring a final overrider. If a base class destructor is declared <code class="highlighter-rouge no-highlight">virtual</code>, one should avoid declaring derived class destructors  <code class="highlighter-rouge no-highlight">virtual</code> or <code class="highlighter-rouge no-highlight">override</code>. Some code base and tools might insist on <code class="highlighter-rouge no-highlight">override</code> for destructors, but that is not the recommendation of these guidelines.</p>
<h3 id="c129-when-designing-a-class-hierarchy-distinguish-between-implementation-inheritance-and-interface-inheritance"><a name="Rh-kind"></a>C.129: When designing a class hierarchy, distinguish between implementation inheritance and interface inheritance<a class="anchorjs-link " href="#c129-when-designing-a-class-hierarchy-distinguish-between-implementation-inheritance-and-interface-inheritance" aria-label="Anchor link for: c129 when designing a class hierarchy distinguish between implementation inheritance and interface inheritance" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Implementation details in an interface makes the interface brittle;
that is, makes its users vulnerable to having to recompile after changes in the implementation.
Data in a base class increases the complexity of implementing the base and can lead to replication of code.</p>
<h3 id="c130-redefine-or-prohibit-copying-for-a-base-class-prefer-a-virtual-clone-function-instead"><a name="Rh-copy"></a>C.130: Redefine or prohibit copying for a base class; prefer a virtual <code class="highlighter-rouge no-highlight">clone</code> function instead<a class="anchorjs-link " href="#c130-redefine-or-prohibit-copying-for-a-base-class-prefer-a-virtual-clone-function-instead" aria-label="Anchor link for: c130 redefine or prohibit copying for a base class prefer a virtual clone function instead" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Copying a base is usually slicing. If you really need copy semantics, copy deeply: Provide a virtual <code class="highlighter-rouge no-highlight">clone</code> function that will copy the actual most-derived type and return an owning pointer to the new object, and then in derived classes return the derived type (use a covariant return type).</p>
<h3 id="c131-avoid-trivial-getters-and-setters"><a name="Rh-get"></a>C.131: Avoid trivial getters and setters<a class="anchorjs-link " href="#c131-avoid-trivial-getters-and-setters" aria-label="Anchor link for: c131 avoid trivial getters and setters" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A trivial getter or setter adds no semantic value; the data item could just as well be <code class="highlighter-rouge no-highlight">public</code>.</p>
<h3 id="c132-dont-make-a-function-virtual-without-reason"><a name="Rh-virtual"></a>C.132: Don’t make a function <code class="highlighter-rouge no-highlight">virtual</code> without reason<a class="anchorjs-link " href="#c132-dont-make-a-function-virtual-without-reason" aria-label="Anchor link for: c132 dont make a function virtual without reason" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Redundant <code class="highlighter-rouge no-highlight">virtual</code> increases run-time and object-code size.
A virtual function can be overridden and is thus open to mistakes in a derived class.
A virtual function ensures code replication in a templated hierarchy.</p>
<h3 id="c133-avoid-protected-data"><a name="Rh-protected"></a>C.133: Avoid <code class="highlighter-rouge no-highlight">protected</code> data<a class="anchorjs-link " href="#c133-avoid-protected-data" aria-label="Anchor link for: c133 avoid protected data" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><code class="highlighter-rouge no-highlight">protected</code> data is a source of complexity and errors.
<code class="highlighter-rouge no-highlight">protected</code> data complicates the statement of invariants.
<code class="highlighter-rouge no-highlight">protected</code> data inherently violates the guidance against putting data in base classes, which usually leads to having to deal with virtual inheritance as well.</p>
<h3 id="c134-ensure-all-non-const-data-members-have-the-same-access-level"><a name="Rh-public"></a>C.134: Ensure all non-<code class="highlighter-rouge no-highlight">const</code> data members have the same access level<a class="anchorjs-link " href="#c134-ensure-all-non-const-data-members-have-the-same-access-level" aria-label="Anchor link for: c134 ensure all non const data members have the same access level" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Prevention of logical confusion leading to errors.
If the non-<code class="highlighter-rouge no-highlight">const</code> data members don’t have the same access level, the type is confused about what it’s trying to do.
Is it a type that maintains an invariant or simply a collection of values?</p>
<h3 id="c135-use-multiple-inheritance-to-represent-multiple-distinct-interfaces"><a name="Rh-mi-interface"></a>C.135: Use multiple inheritance to represent multiple distinct interfaces<a class="anchorjs-link " href="#c135-use-multiple-inheritance-to-represent-multiple-distinct-interfaces" aria-label="Anchor link for: c135 use multiple inheritance to represent multiple distinct interfaces" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Not all classes will necessarily support all interfaces, and not all callers will necessarily want to deal with all operations.
Especially to break apart monolithic interfaces into “aspects” of behavior supported by a given derived class.</p>
<h3 id="c136-use-multiple-inheritance-to-represent-the-union-of-implementation-attributes"><a name="Rh-mi-implementation"></a>C.136: Use multiple inheritance to represent the union of implementation attributes<a class="anchorjs-link " href="#c136-use-multiple-inheritance-to-represent-the-union-of-implementation-attributes" aria-label="Anchor link for: c136 use multiple inheritance to represent the union of implementation attributes" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Some forms of mixins have state and often operations on that state.
If the operations are virtual the use of inheritance is necessary, if not using inheritance can avoid boilerplate and forwarding.</p>
<h3 id="c137-use-virtual-bases-to-avoid-overly-general-base-classes"><a name="Rh-vbase"></a>C.137: Use <code class="highlighter-rouge no-highlight">virtual</code> bases to avoid overly general base classes<a class="anchorjs-link " href="#c137-use-virtual-bases-to-avoid-overly-general-base-classes" aria-label="Anchor link for: c137 use virtual bases to avoid overly general base classes" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Allow separation of shared data and interface.
 To avoid all shared data to being put into an ultimate base class.</p>
<h3 id="c138-create-an-overload-set-for-a-derived-class-and-its-bases-with-using"><a name="Rh-using"></a>C.138: Create an overload set for a derived class and its bases with <code class="highlighter-rouge no-highlight">using</code><a class="anchorjs-link " href="#c138-create-an-overload-set-for-a-derived-class-and-its-bases-with-using" aria-label="Anchor link for: c138 create an overload set for a derived class and its bases with using" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Without a using declaration, member functions in the derived class hide the entire inherited overload sets.</p>
<h3 id="c139-use-final-sparingly"><a name="Rh-final"></a>C.139: Use <code class="highlighter-rouge no-highlight">final</code> sparingly<a class="anchorjs-link " href="#c139-use-final-sparingly" aria-label="Anchor link for: c139 use final sparingly" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Capping a hierarchy with <code class="highlighter-rouge no-highlight">final</code> is rarely needed for logical reasons and can be damaging to the extensibility of a hierarchy.</p>
<h3 id="c145-access-polymorphic-objects-through-pointers-and-references"><a name="Rh-poly"></a>C.145: Access polymorphic objects through pointers and references<a class="anchorjs-link " href="#c145-access-polymorphic-objects-through-pointers-and-references" aria-label="Anchor link for: c145 access polymorphic objects through pointers and references" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>If you have a class with a virtual function, you don’t (in general) know which class provided the function to be used.</p>
<h3 id="c146-use-dynamic_cast-where-class-hierarchy-navigation-is-unavoidable"><a name="Rh-dynamic_cast"></a>C.146: Use <code class="highlighter-rouge no-highlight">dynamic_cast</code> where class hierarchy navigation is unavoidable<a class="anchorjs-link " href="#c146-use-dynamic_cast-where-class-hierarchy-navigation-is-unavoidable" aria-label="Anchor link for: c146 use dynamic_cast where class hierarchy navigation is unavoidable" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><code class="highlighter-rouge no-highlight">dynamic_cast</code> is checked at run time.</p>
<h3 id="c147-use-dynamic_cast-to-a-reference-type-when-failure-to-find-the-required-class-is-considered-an-error"><a name="Rh-ref-cast"></a>C.147: Use <code class="highlighter-rouge no-highlight">dynamic_cast</code> to a reference type when failure to find the required class is considered an error<a class="anchorjs-link " href="#c147-use-dynamic_cast-to-a-reference-type-when-failure-to-find-the-required-class-is-considered-an-error" aria-label="Anchor link for: c147 use dynamic_cast to a reference type when failure to find the required class is considered an error" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Casting to a reference expresses that you intend to end up with a valid object, so the cast must succeed. <code class="highlighter-rouge no-highlight">dynamic_cast</code> will then throw if it does not succeed.</p>
<h3 id="c148-use-dynamic_cast-to-a-pointer-type-when-failure-to-find-the-required-class-is-considered-a-valid-alternative"><a name="Rh-ptr-cast"></a>C.148: Use <code class="highlighter-rouge no-highlight">dynamic_cast</code> to a pointer type when failure to find the required class is considered a valid alternative<a class="anchorjs-link " href="#c148-use-dynamic_cast-to-a-pointer-type-when-failure-to-find-the-required-class-is-considered-a-valid-alternative" aria-label="Anchor link for: c148 use dynamic_cast to a pointer type when failure to find the required class is considered a valid alternative" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The <code class="highlighter-rouge no-highlight">dynamic_cast</code> conversion allows to test whether a pointer is pointing at a polymorphic object that has a given class in its hierarchy. Since failure to find the class merely returns a null value, it can be tested during run time. This allows writing code that can choose alternative paths depending on the results.</p>
<p>Contrast with <a href="#Rh-ptr-cast">C.147</a>, where failure is an error, and should not be used for conditional execution.</p>
<h3 id="c149-use-unique_ptr-or-shared_ptr-to-avoid-forgetting-to-delete-objects-created-using-new"><a name="Rh-smart"></a>C.149: Use <code class="highlighter-rouge no-highlight">unique_ptr</code> or <code class="highlighter-rouge no-highlight">shared_ptr</code> to avoid forgetting to <code class="highlighter-rouge no-highlight">delete</code> objects created using <code class="highlighter-rouge no-highlight">new</code><a class="anchorjs-link " href="#c149-use-unique_ptr-or-shared_ptr-to-avoid-forgetting-to-delete-objects-created-using-new" aria-label="Anchor link for: c149 use unique_ptr or shared_ptr to avoid forgetting to delete objects created using new" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Avoid resource leaks.</p>
<h3 id="c150-use-make_unique-to-construct-objects-owned-by-unique_ptrs"><a name="Rh-make_unique"></a>C.150: Use <code class="highlighter-rouge no-highlight">make_unique()</code> to construct objects owned by <code class="highlighter-rouge no-highlight">unique_ptr</code>s<a class="anchorjs-link " href="#c150-use-make_unique-to-construct-objects-owned-by-unique_ptrs" aria-label="Anchor link for: c150 use make_unique to construct objects owned by unique_ptrs" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><code class="highlighter-rouge no-highlight">make_unique</code> gives a more concise statement of the construction.
It also ensures exception safety in complex expressions.</p>
<h3 id="c151-use-make_shared-to-construct-objects-owned-by-shared_ptrs"><a name="Rh-make_shared"></a>C.151: Use <code class="highlighter-rouge no-highlight">make_shared()</code> to construct objects owned by <code class="highlighter-rouge no-highlight">shared_ptr</code>s<a class="anchorjs-link " href="#c151-use-make_shared-to-construct-objects-owned-by-shared_ptrs" aria-label="Anchor link for: c151 use make_shared to construct objects owned by shared_ptrs" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><code class="highlighter-rouge no-highlight">make_shared</code> gives a more concise statement of the construction.
It also gives an opportunity to eliminate a separate allocation for the reference counts, by placing the <code class="highlighter-rouge no-highlight">shared_ptr</code>’s use counts next to its object.</p>
<h3 id="c152-never-assign-a-pointer-to-an-array-of-derived-class-objects-to-a-pointer-to-its-base"><a name="Rh-array"></a>C.152: Never assign a pointer to an array of derived class objects to a pointer to its base<a class="anchorjs-link " href="#c152-never-assign-a-pointer-to-an-array-of-derived-class-objects-to-a-pointer-to-its-base" aria-label="Anchor link for: c152 never assign a pointer to an array of derived class objects to a pointer to its base" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Subscripting the resulting base pointer will lead to invalid object access and probably to memory corruption.</p>
<h3 id="c153-prefer-virtual-function-to-casting"><a name="Rh-use-virtual"></a>C.153: Prefer virtual function to casting<a class="anchorjs-link " href="#c153-prefer-virtual-function-to-casting" aria-label="Anchor link for: c153 prefer virtual function to casting" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A virtual function call is safe, whereas casting is error-prone.
A virtual function call reaches the most derived function, whereas a cast may reach an intermediate class and therefore
give a wrong result (especially as a hierarchy is modified during maintenance).</p>
<h3 id="c160-define-operators-primarily-to-mimic-conventional-usage"><a name="Ro-conventional"></a>C.160: Define operators primarily to mimic conventional usage<a class="anchorjs-link " href="#c160-define-operators-primarily-to-mimic-conventional-usage" aria-label="Anchor link for: c160 define operators primarily to mimic conventional usage" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Minimize surprises.</p>
<h3 id="c161-use-nonmember-functions-for-symmetric-operators"><a name="Ro-symmetric"></a>C.161: Use nonmember functions for symmetric operators<a class="anchorjs-link " href="#c161-use-nonmember-functions-for-symmetric-operators" aria-label="Anchor link for: c161 use nonmember functions for symmetric operators" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>If you use member functions, you need two.
Unless you use a nonmember function for (say) <code class="highlighter-rouge no-highlight">==</code>, <code class="highlighter-rouge no-highlight">a == b</code> and <code class="highlighter-rouge no-highlight">b == a</code> will be subtly different.</p>
<h3 id="c162-overload-operations-that-are-roughly-equivalent"><a name="Ro-equivalent"></a>C.162: Overload operations that are roughly equivalent<a class="anchorjs-link " href="#c162-overload-operations-that-are-roughly-equivalent" aria-label="Anchor link for: c162 overload operations that are roughly equivalent" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Having different names for logically equivalent operations on different argument types is confusing, leads to encoding type information in function names, and inhibits generic programming.</p>
<h3 id="c163-overload-only-for-operations-that-are-roughly-equivalent"><a name="Ro-equivalent-2"></a>C.163: Overload only for operations that are roughly equivalent<a class="anchorjs-link " href="#c163-overload-only-for-operations-that-are-roughly-equivalent" aria-label="Anchor link for: c163 overload only for operations that are roughly equivalent" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Having the same name for logically different functions is confusing and leads to errors when using generic programming.</p>
<h3 id="c164-avoid-conversion-operators"><a name="Ro-conversion"></a>C.164: Avoid conversion operators<a class="anchorjs-link " href="#c164-avoid-conversion-operators" aria-label="Anchor link for: c164 avoid conversion operators" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Implicit conversions can be essential (e.g., <code class="highlighter-rouge no-highlight">double</code> to <code class="highlighter-rouge no-highlight">int</code>) but often cause surprises (e.g., <code class="highlighter-rouge no-highlight">String</code> to C-style string).</p>
<h3 id="c165-use-using-for-customization-points"><a name="Ro-custom"></a>C.165: Use <code class="highlighter-rouge no-highlight">using</code> for customization points<a class="anchorjs-link " href="#c165-use-using-for-customization-points" aria-label="Anchor link for: c165 use using for customization points" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To find function objects and functions defined in a separate namespace to “customize” a common function.</p>
<h3 id="c166-overload-unary--only-as-part-of-a-system-of-smart-pointers-and-references"><a name="Ro-address-of"></a>C.166: Overload unary <code class="highlighter-rouge no-highlight">&amp;</code> only as part of a system of smart pointers and references<a class="anchorjs-link " href="#c166-overload-unary--only-as-part-of-a-system-of-smart-pointers-and-references" aria-label="Anchor link for: c166 overload unary  only as part of a system of smart pointers and references" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The <code class="highlighter-rouge no-highlight">&amp;</code> operator is fundamental in C++.
Many parts of the C++ semantics assumes its default meaning.</p>
<h3 id="c168-define-overloaded-operators-in-the-namespace-of-their-operands"><a name="Ro-namespace"></a>C.168: Define overloaded operators in the namespace of their operands<a class="anchorjs-link " href="#c168-define-overloaded-operators-in-the-namespace-of-their-operands" aria-label="Anchor link for: c168 define overloaded operators in the namespace of their operands" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability.
Ability for find operators using ADL.
Avoiding inconsistent definition in different namespaces</p>
<h3 id="c167-use-an-operator-for-an-operation-with-its-conventional-meaning"><a name="Ro-overload"></a>C.167: Use an operator for an operation with its conventional meaning<a class="anchorjs-link " href="#c167-use-an-operator-for-an-operation-with-its-conventional-meaning" aria-label="Anchor link for: c167 use an operator for an operation with its conventional meaning" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability. Convention. Reusability. Support for generic code</p>
<h3 id="c170-if-you-feel-like-overloading-a-lambda-use-a-generic-lambda"><a name="Ro-lambda"></a>C.170: If you feel like overloading a lambda, use a generic lambda<a class="anchorjs-link " href="#c170-if-you-feel-like-overloading-a-lambda-use-a-generic-lambda" aria-label="Anchor link for: c170 if you feel like overloading a lambda use a generic lambda" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>You cannot overload by defining two different lambdas with the same name.</p>
<h3 id="c180-use-unions-to-save-memory"><a name="Ru-union"></a>C.180: Use <code class="highlighter-rouge no-highlight">union</code>s to save memory<a class="anchorjs-link " href="#c180-use-unions-to-save-memory" aria-label="Anchor link for: c180 use unions to save memory" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A <code class="highlighter-rouge no-highlight">union</code> allows a single piece of memory to be used for different types of objects at different times.
Consequently, it can be used to save memory when we have several objects that are never used at the same time.</p>
<h3 id="c181-avoid-naked-unions"><a name="Ru-naked"></a>C.181: Avoid “naked” <code class="highlighter-rouge no-highlight">union</code>s<a class="anchorjs-link " href="#c181-avoid-naked-unions" aria-label="Anchor link for: c181 avoid naked unions" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A <em>naked union</em> is a union without an associated indicator which member (if any) it holds,
so that the programmer has to keep track.
Naked unions are a source of type errors.</p>
<h3 id="c182-use-anonymous-unions-to-implement-tagged-unions"><a name="Ru-anonymous"></a>C.182: Use anonymous <code class="highlighter-rouge no-highlight">union</code>s to implement tagged unions<a class="anchorjs-link " href="#c182-use-anonymous-unions-to-implement-tagged-unions" aria-label="Anchor link for: c182 use anonymous unions to implement tagged unions" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A well-designed tagged union is type safe.
An <em>anonymous</em> union simplifies the definition of a class with a (tag, union) pair.</p>
<h3 id="c183-dont-use-a-union-for-type-punning"><a name="Ru-pun"></a>C.183: Don’t use a <code class="highlighter-rouge no-highlight">union</code> for type punning<a class="anchorjs-link " href="#c183-dont-use-a-union-for-type-punning" aria-label="Anchor link for: c183 dont use a union for type punning" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>It is undefined behavior to read a <code class="highlighter-rouge no-highlight">union</code> member with a different type from the one with which it was written.
Such punning is invisible, or at least harder to spot than using a named cast.
Type punning using a <code class="highlighter-rouge no-highlight">union</code> is a source of errors.</p>
<h3 id="enum1-prefer-enumerations-over-macros"><a name="Renum-macro"></a>Enum.1: Prefer enumerations over macros<a class="anchorjs-link " href="#enum1-prefer-enumerations-over-macros" aria-label="Anchor link for: enum1 prefer enumerations over macros" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Macros do not obey scope and type rules. Also, macro names are removed during preprocessing and so usually don’t appear in tools like debuggers.</p>
<h3 id="enum2-use-enumerations-to-represent-sets-of-related-named-constants"><a name="Renum-set"></a>Enum.2: Use enumerations to represent sets of related named constants<a class="anchorjs-link " href="#enum2-use-enumerations-to-represent-sets-of-related-named-constants" aria-label="Anchor link for: enum2 use enumerations to represent sets of related named constants" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>An enumeration shows the enumerators to be related and can be a named type.</p>
<h3 id="enum3-prefer-class-enums-over-plain-enums"><a name="Renum-class"></a>Enum.3: Prefer class enums over “plain” enums<a class="anchorjs-link " href="#enum3-prefer-class-enums-over-plain-enums" aria-label="Anchor link for: enum3 prefer class enums over plain enums" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To minimize surprises: traditional enums convert to int too readily.</p>
<h3 id="enum4-define-operations-on-enumerations-for-safe-and-simple-use"><a name="Renum-oper"></a>Enum.4: Define operations on enumerations for safe and simple use<a class="anchorjs-link " href="#enum4-define-operations-on-enumerations-for-safe-and-simple-use" aria-label="Anchor link for: enum4 define operations on enumerations for safe and simple use" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Convenience of use and avoidance of errors.</p>
<h3 id="enum5-dont-use-all_caps-for-enumerators"><a name="Renum-caps"></a>Enum.5: Don’t use <code class="highlighter-rouge no-highlight">ALL_CAPS</code> for enumerators<a class="anchorjs-link " href="#enum5-dont-use-all_caps-for-enumerators" aria-label="Anchor link for: enum5 dont use all_caps for enumerators" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Avoid clashes with macros.</p>
<h3 id="enum6-avoid-unnamed-enumerations"><a name="Renum-unnamed"></a>Enum.6: Avoid unnamed enumerations<a class="anchorjs-link " href="#enum6-avoid-unnamed-enumerations" aria-label="Anchor link for: enum6 avoid unnamed enumerations" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>If you can’t name an enumeration, the values are not related</p>
<h3 id="enum7-specify-the-underlying-type-of-an-enumeration-only-when-necessary"><a name="Renum-underlying"></a>Enum.7: Specify the underlying type of an enumeration only when necessary<a class="anchorjs-link " href="#enum7-specify-the-underlying-type-of-an-enumeration-only-when-necessary" aria-label="Anchor link for: enum7 specify the underlying type of an enumeration only when necessary" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The default is the easiest to read and write.
<code class="highlighter-rouge no-highlight">int</code> is the default integer type.
<code class="highlighter-rouge no-highlight">int</code> is compatible with C <code class="highlighter-rouge no-highlight">enum</code>s.</p>
<h3 id="enum8-specify-enumerator-values-only-when-necessary"><a name="Renum-value"></a>Enum.8: Specify enumerator values only when necessary<a class="anchorjs-link " href="#enum8-specify-enumerator-values-only-when-necessary" aria-label="Anchor link for: enum8 specify enumerator values only when necessary" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>It’s the simplest.
It avoids duplicate enumerator values.
The default gives a consecutive set of values that is good for <code class="highlighter-rouge no-highlight">switch</code>-statement implementations.</p>
<h3 id="r1-manage-resources-automatically-using-resource-handles-and-raii-resource-acquisition-is-initialization"><a name="Rr-raii"></a>R.1: Manage resources automatically using resource handles and RAII (Resource Acquisition Is Initialization)<a class="anchorjs-link " href="#r1-manage-resources-automatically-using-resource-handles-and-raii-resource-acquisition-is-initialization" aria-label="Anchor link for: r1 manage resources automatically using resource handles and raii resource acquisition is initialization" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To avoid leaks and the complexity of manual resource management.
C++’s language-enforced constructor/destructor symmetry mirrors the symmetry inherent in resource acquire/release function pairs such as <code class="highlighter-rouge no-highlight">fopen</code>/<code class="highlighter-rouge no-highlight">fclose</code>, <code class="highlighter-rouge no-highlight">lock</code>/<code class="highlighter-rouge no-highlight">unlock</code>, and <code class="highlighter-rouge no-highlight">new</code>/<code class="highlighter-rouge no-highlight">delete</code>.
Whenever you deal with a resource that needs paired acquire/release function calls, encapsulate that resource in an object that enforces pairing for you – acquire the resource in its constructor, and release it in its destructor.</p>
<h3 id="r2-in-interfaces-use-raw-pointers-to-denote-individual-objects-only"><a name="Rr-use-ptr"></a>R.2: In interfaces, use raw pointers to denote individual objects (only)<a class="anchorjs-link " href="#r2-in-interfaces-use-raw-pointers-to-denote-individual-objects-only" aria-label="Anchor link for: r2 in interfaces use raw pointers to denote individual objects only" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Arrays are best represented by a container type (e.g., <code class="highlighter-rouge no-highlight">vector</code> (owning)) or a <code class="highlighter-rouge no-highlight">span</code> (non-owning).
Such containers and views hold sufficient information to do range checking.</p>
<h3 id="r3-a-raw-pointer-a-t-is-non-owning"><a name="Rr-ptr"></a>R.3: A raw pointer (a <code class="highlighter-rouge no-highlight">T*</code>) is non-owning<a class="anchorjs-link " href="#r3-a-raw-pointer-a-t-is-non-owning" aria-label="Anchor link for: r3 a raw pointer a t is non owning" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>There is nothing (in the C++ standard or in most code) to say otherwise and most raw pointers are non-owning.
We want owning pointers identified so that we can reliably and efficiently delete the objects pointed to by owning pointers.</p>
<h3 id="r4-a-raw-reference-a-t-is-non-owning"><a name="Rr-ref"></a>R.4: A raw reference (a <code class="highlighter-rouge no-highlight">T&amp;</code>) is non-owning<a class="anchorjs-link " href="#r4-a-raw-reference-a-t-is-non-owning" aria-label="Anchor link for: r4 a raw reference a t is non owning" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>There is nothing (in the C++ standard or in most code) to say otherwise and most raw references are non-owning.
We want owners identified so that we can reliably and efficiently delete the objects pointed to by owning pointers.</p>
<h3 id="r5-prefer-scoped-objects-dont-heap-allocate-unnecessarily"><a name="Rr-scoped"></a>R.5: Prefer scoped objects, don’t heap-allocate unnecessarily<a class="anchorjs-link " href="#r5-prefer-scoped-objects-dont-heap-allocate-unnecessarily" aria-label="Anchor link for: r5 prefer scoped objects dont heap allocate unnecessarily" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A scoped object is a local object, a global object, or a member.
This implies that there is no separate allocation and deallocation cost in excess of that already used for the containing scope or object.
The members of a scoped object are themselves scoped and the scoped object’s constructor and destructor manage the members’ lifetimes.</p>
<h3 id="r6-avoid-non-const-global-variables"><a name="Rr-global"></a>R.6: Avoid non-<code class="highlighter-rouge no-highlight">const</code> global variables<a class="anchorjs-link " href="#r6-avoid-non-const-global-variables" aria-label="Anchor link for: r6 avoid non const global variables" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Global variables can be accessed from everywhere so they can introduce surprising dependencies between apparently unrelated objects.
They are a notable source of errors.</p>
<p><strong>Warning</strong>: The initialization of global objects is not totally ordered.
If you use a global object initialize it with a constant.
Note that it is possible to get undefined initialization order even for <code class="highlighter-rouge no-highlight">const</code> objects.</p>
<h3 id="r10-avoid-malloc-and-free"><a name="Rr-mallocfree"></a>R.10: Avoid <code class="highlighter-rouge no-highlight">malloc()</code> and <code class="highlighter-rouge no-highlight">free()</code><a class="anchorjs-link " href="#r10-avoid-malloc-and-free" aria-label="Anchor link for: r10 avoid malloc and free" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><code class="highlighter-rouge no-highlight">malloc()</code> and <code class="highlighter-rouge no-highlight">free()</code> do not support construction and destruction, and do not mix well with <code class="highlighter-rouge no-highlight">new</code> and <code class="highlighter-rouge no-highlight">delete</code>.</p>
<h3 id="r11-avoid-calling-new-and-delete-explicitly"><a name="Rr-newdelete"></a>R.11: Avoid calling <code class="highlighter-rouge no-highlight">new</code> and <code class="highlighter-rouge no-highlight">delete</code> explicitly<a class="anchorjs-link " href="#r11-avoid-calling-new-and-delete-explicitly" aria-label="Anchor link for: r11 avoid calling new and delete explicitly" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The pointer returned by <code class="highlighter-rouge no-highlight">new</code> should belong to a resource handle (that can call <code class="highlighter-rouge no-highlight">delete</code>).
If the pointer returned by <code class="highlighter-rouge no-highlight">new</code> is assigned to a plain/naked pointer, the object can be leaked.</p>
<h3 id="r12-immediately-give-the-result-of-an-explicit-resource-allocation-to-a-manager-object"><a name="Rr-immediate-alloc"></a>R.12: Immediately give the result of an explicit resource allocation to a manager object<a class="anchorjs-link " href="#r12-immediately-give-the-result-of-an-explicit-resource-allocation-to-a-manager-object" aria-label="Anchor link for: r12 immediately give the result of an explicit resource allocation to a manager object" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>If you don’t, an exception or a return may lead to a leak.</p>
<h3 id="r13-perform-at-most-one-explicit-resource-allocation-in-a-single-expression-statement"><a name="Rr-single-alloc"></a>R.13: Perform at most one explicit resource allocation in a single expression statement<a class="anchorjs-link " href="#r13-perform-at-most-one-explicit-resource-allocation-in-a-single-expression-statement" aria-label="Anchor link for: r13 perform at most one explicit resource allocation in a single expression statement" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>If you perform two explicit resource allocations in one statement, you could leak resources because the order of evaluation of many subexpressions, including function arguments, is unspecified.</p>
<h3 id="r14--array-vs-pointer-parameter"><a name="Rr-ap"></a>R.14: ??? array vs. pointer parameter<a class="anchorjs-link " href="#r14--array-vs-pointer-parameter" aria-label="Anchor link for: r14  array vs pointer parameter" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>An array decays to a pointer, thereby losing its size, opening the opportunity for range errors.</p>
<h3 id="r15-always-overload-matched-allocationdeallocation-pairs"><a name="Rr-pair"></a>R.15: Always overload matched allocation/deallocation pairs<a class="anchorjs-link " href="#r15-always-overload-matched-allocationdeallocation-pairs" aria-label="Anchor link for: r15 always overload matched allocationdeallocation pairs" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Otherwise you get mismatched operations and chaos.</p>
<h3 id="r20-use-unique_ptr-or-shared_ptr-to-represent-ownership"><a name="Rr-owner"></a>R.20: Use <code class="highlighter-rouge no-highlight">unique_ptr</code> or <code class="highlighter-rouge no-highlight">shared_ptr</code> to represent ownership<a class="anchorjs-link " href="#r20-use-unique_ptr-or-shared_ptr-to-represent-ownership" aria-label="Anchor link for: r20 use unique_ptr or shared_ptr to represent ownership" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>They can prevent resource leaks.</p>
<h3 id="r21-prefer-unique_ptr-over-shared_ptr-unless-you-need-to-share-ownership"><a name="Rr-unique"></a>R.21: Prefer <code class="highlighter-rouge no-highlight">unique_ptr</code> over <code class="highlighter-rouge no-highlight">shared_ptr</code> unless you need to share ownership<a class="anchorjs-link " href="#r21-prefer-unique_ptr-over-shared_ptr-unless-you-need-to-share-ownership" aria-label="Anchor link for: r21 prefer unique_ptr over shared_ptr unless you need to share ownership" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A <code class="highlighter-rouge no-highlight">unique_ptr</code> is conceptually simpler and more predictable (you know when destruction happens) and faster (you don’t implicitly maintain a use count).</p>
<h3 id="r22-use-make_shared-to-make-shared_ptrs"><a name="Rr-make_shared"></a>R.22: Use <code class="highlighter-rouge no-highlight">make_shared()</code> to make <code class="highlighter-rouge no-highlight">shared_ptr</code>s<a class="anchorjs-link " href="#r22-use-make_shared-to-make-shared_ptrs" aria-label="Anchor link for: r22 use make_shared to make shared_ptrs" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>If you first make an object and then give it to a <code class="highlighter-rouge no-highlight">shared_ptr</code> constructor, you (most likely) do one more allocation (and later deallocation) than if you use <code class="highlighter-rouge no-highlight">make_shared()</code> because the reference counts must be allocated separately from the object.</p>
<h3 id="r23-use-make_unique-to-make-unique_ptrs"><a name="Rr-make_unique"></a>R.23: Use <code class="highlighter-rouge no-highlight">make_unique()</code> to make <code class="highlighter-rouge no-highlight">unique_ptr</code>s<a class="anchorjs-link " href="#r23-use-make_unique-to-make-unique_ptrs" aria-label="Anchor link for: r23 use make_unique to make unique_ptrs" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>For convenience and consistency with <code class="highlighter-rouge no-highlight">shared_ptr</code>.</p>
<h3 id="r24-use-stdweak_ptr-to-break-cycles-of-shared_ptrs"><a name="Rr-weak_ptr"></a>R.24: Use <code class="highlighter-rouge no-highlight">std::weak_ptr</code> to break cycles of <code class="highlighter-rouge no-highlight">shared_ptr</code>s<a class="anchorjs-link " href="#r24-use-stdweak_ptr-to-break-cycles-of-shared_ptrs" aria-label="Anchor link for: r24 use stdweak_ptr to break cycles of shared_ptrs" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><code class="highlighter-rouge no-highlight">shared_ptr</code>’s rely on use counting and the use count for a cyclic structure never goes to zero, so we need a mechanism to
be able to destroy a cyclic structure.</p>
<h3 id="r30-take-smart-pointers-as-parameters-only-to-explicitly-express-lifetime-semantics"><a name="Rr-smartptrparam"></a>R.30: Take smart pointers as parameters only to explicitly express lifetime semantics<a class="anchorjs-link " href="#r30-take-smart-pointers-as-parameters-only-to-explicitly-express-lifetime-semantics" aria-label="Anchor link for: r30 take smart pointers as parameters only to explicitly express lifetime semantics" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Accepting a smart pointer to a <code class="highlighter-rouge no-highlight">widget</code> is wrong if the function just needs the <code class="highlighter-rouge no-highlight">widget</code> itself.
It should be able to accept any <code class="highlighter-rouge no-highlight">widget</code> object, not just ones whose lifetimes are managed by a particular kind of smart pointer.
A function that does not manipulate lifetime should take raw pointers or references instead.</p>
<h3 id="r31-if-you-have-non-std-smart-pointers-follow-the-basic-pattern-from-std"><a name="Rr-smart"></a>R.31: If you have non-<code class="highlighter-rouge no-highlight">std</code> smart pointers, follow the basic pattern from <code class="highlighter-rouge no-highlight">std</code><a class="anchorjs-link " href="#r31-if-you-have-non-std-smart-pointers-follow-the-basic-pattern-from-std" aria-label="Anchor link for: r31 if you have non std smart pointers follow the basic pattern from std" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The rules in the following section also work for other kinds of third-party and custom smart pointers and are very useful for diagnosing common smart pointer errors that cause performance and correctness problems.
You want the rules to work on all the smart pointers you use.</p>
<p>Any type (including primary template or specialization) that overloads unary <code class="highlighter-rouge no-highlight">*</code> and <code class="highlighter-rouge no-highlight">-&gt;</code> is considered a smart pointer:</p>
<h3 id="r32-take-a-unique_ptrwidget-parameter-to-express-that-a-function-assumes-ownership-of-a-widget"><a name="Rr-uniqueptrparam"></a>R.32: Take a <code class="highlighter-rouge no-highlight">unique_ptr&lt;widget&gt;</code> parameter to express that a function assumes ownership of a <code class="highlighter-rouge no-highlight">widget</code><a class="anchorjs-link " href="#r32-take-a-unique_ptrwidget-parameter-to-express-that-a-function-assumes-ownership-of-a-widget" aria-label="Anchor link for: r32 take a unique_ptrwidget parameter to express that a function assumes ownership of a widget" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Using <code class="highlighter-rouge no-highlight">unique_ptr</code> in this way both documents and enforces the function call’s ownership transfer.</p>
<h3 id="r33-take-a-unique_ptrwidget-parameter-to-express-that-a-function-reseats-thewidget"><a name="Rr-reseat"></a>R.33: Take a <code class="highlighter-rouge no-highlight">unique_ptr&lt;widget&gt;&amp;</code> parameter to express that a function reseats the<code class="highlighter-rouge no-highlight">widget</code><a class="anchorjs-link " href="#r33-take-a-unique_ptrwidget-parameter-to-express-that-a-function-reseats-thewidget" aria-label="Anchor link for: r33 take a unique_ptrwidget parameter to express that a function reseats thewidget" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Using <code class="highlighter-rouge no-highlight">unique_ptr</code> in this way both documents and enforces the function call’s reseating semantics.</p>
<h3 id="r34-take-a-shared_ptrwidget-parameter-to-express-that-a-function-is-part-owner"><a name="Rr-sharedptrparam-owner"></a>R.34: Take a <code class="highlighter-rouge no-highlight">shared_ptr&lt;widget&gt;</code> parameter to express that a function is part owner<a class="anchorjs-link " href="#r34-take-a-shared_ptrwidget-parameter-to-express-that-a-function-is-part-owner" aria-label="Anchor link for: r34 take a shared_ptrwidget parameter to express that a function is part owner" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>This makes the function’s ownership sharing explicit.</p>
<h3 id="r35-take-a-shared_ptrwidget-parameter-to-express-that-a-function-might-reseat-the-shared-pointer"><a name="Rr-sharedptrparam"></a>R.35: Take a <code class="highlighter-rouge no-highlight">shared_ptr&lt;widget&gt;&amp;</code> parameter to express that a function might reseat the shared pointer<a class="anchorjs-link " href="#r35-take-a-shared_ptrwidget-parameter-to-express-that-a-function-might-reseat-the-shared-pointer" aria-label="Anchor link for: r35 take a shared_ptrwidget parameter to express that a function might reseat the shared pointer" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>This makes the function’s reseating explicit.</p>
<h3 id="r36-take-a-const-shared_ptrwidget-parameter-to-express-that-it-might-retain-a-reference-count-to-the-object-"><a name="Rr-sharedptrparam-const"></a>R.36: Take a <code class="highlighter-rouge no-highlight">const shared_ptr&lt;widget&gt;&amp;</code> parameter to express that it might retain a reference count to the object ???<a class="anchorjs-link " href="#r36-take-a-const-shared_ptrwidget-parameter-to-express-that-it-might-retain-a-reference-count-to-the-object-" aria-label="Anchor link for: r36 take a const shared_ptrwidget parameter to express that it might retain a reference count to the object " data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>This makes the function’s ??? explicit.</p>
<h3 id="r37-do-not-pass-a-pointer-or-reference-obtained-from-an-aliased-smart-pointer"><a name="Rr-smartptrget"></a>R.37: Do not pass a pointer or reference obtained from an aliased smart pointer<a class="anchorjs-link " href="#r37-do-not-pass-a-pointer-or-reference-obtained-from-an-aliased-smart-pointer" aria-label="Anchor link for: r37 do not pass a pointer or reference obtained from an aliased smart pointer" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Violating this rule is the number one cause of losing reference counts and finding yourself with a dangling pointer.
Functions should prefer to pass raw pointers and references down call chains.
At the top of the call tree where you obtain the raw pointer or reference from a smart pointer that keeps the object alive.
You need to be sure that the smart pointer cannot inadvertently be reset or reassigned from within the call tree below.</p>
<h3 id="es1-prefer-the-standard-library-to-other-libraries-and-to-handcrafted-code"><a name="Res-lib"></a>ES.1: Prefer the standard library to other libraries and to “handcrafted code”<a class="anchorjs-link " href="#es1-prefer-the-standard-library-to-other-libraries-and-to-handcrafted-code" aria-label="Anchor link for: es1 prefer the standard library to other libraries and to handcrafted code" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Code using a library can be much easier to write than code working directly with language features, much shorter, tend to be of a higher level of abstraction, and the library code is presumably already tested.
The ISO C++ standard library is among the most widely known and best tested libraries.
It is available as part of all C++ Implementations.</p>
<h3 id="es2-prefer-suitable-abstractions-to-direct-use-of-language-features"><a name="Res-abstr"></a>ES.2: Prefer suitable abstractions to direct use of language features<a class="anchorjs-link " href="#es2-prefer-suitable-abstractions-to-direct-use-of-language-features" aria-label="Anchor link for: es2 prefer suitable abstractions to direct use of language features" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A “suitable abstraction” (e.g., library or class) is closer to the application concepts than the bare language, leads to shorter and clearer code, and is likely to be better tested.</p>
<h3 id="es5-keep-scopes-small"><a name="Res-scope"></a>ES.5: Keep scopes small<a class="anchorjs-link " href="#es5-keep-scopes-small" aria-label="Anchor link for: es5 keep scopes small" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability. Minimize resource retention. Avoid accidental misuse of value.</p>
<p><strong>Alternative formulation</strong>: Don’t declare a name in an unnecessarily large scope.</p>
<h3 id="es6-declare-names-in-for-statement-initializers-and-conditions-to-limit-scope"><a name="Res-cond"></a>ES.6: Declare names in for-statement initializers and conditions to limit scope<a class="anchorjs-link " href="#es6-declare-names-in-for-statement-initializers-and-conditions-to-limit-scope" aria-label="Anchor link for: es6 declare names in for statement initializers and conditions to limit scope" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability. Minimize resource retention.</p>
<h3 id="es7-keep-common-and-local-names-short-and-keep-uncommon-and-nonlocal-names-longer"><a name="Res-name-length"></a>ES.7: Keep common and local names short, and keep uncommon and nonlocal names longer<a class="anchorjs-link " href="#es7-keep-common-and-local-names-short-and-keep-uncommon-and-nonlocal-names-longer" aria-label="Anchor link for: es7 keep common and local names short and keep uncommon and nonlocal names longer" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability. Lowering the chance of clashes between unrelated non-local names.</p>
<h3 id="es8-avoid-similar-looking-names"><a name="Res-name-similar"></a>ES.8: Avoid similar-looking names<a class="anchorjs-link " href="#es8-avoid-similar-looking-names" aria-label="Anchor link for: es8 avoid similar looking names" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Code clarity and readability. Too-similar names slow down comprehension and increase the likelihood of error.</p>
<h3 id="es9-avoid-all_caps-names"><a name="Res-not-CAPS"></a>ES.9: Avoid <code class="highlighter-rouge no-highlight">ALL_CAPS</code> names<a class="anchorjs-link " href="#es9-avoid-all_caps-names" aria-label="Anchor link for: es9 avoid all_caps names" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Such names are commonly used for macros. Thus, <code class="highlighter-rouge no-highlight">ALL_CAPS</code> name are vulnerable to unintended macro substitution.</p>
<h3 id="es10-declare-one-name-only-per-declaration"><a name="Res-name-one"></a>ES.10: Declare one name (only) per declaration<a class="anchorjs-link " href="#es10-declare-one-name-only-per-declaration" aria-label="Anchor link for: es10 declare one name only per declaration" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>One-declaration-per line increases readability and avoids mistakes related to
the C/C++ grammar. It also leaves room for a more descriptive end-of-line
comment.</p>
<h3 id="es11-use-auto-to-avoid-redundant-repetition-of-type-names"><a name="Res-auto"></a>ES.11: Use <code class="highlighter-rouge no-highlight">auto</code> to avoid redundant repetition of type names<a class="anchorjs-link " href="#es11-use-auto-to-avoid-redundant-repetition-of-type-names" aria-label="Anchor link for: es11 use auto to avoid redundant repetition of type names" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<h3 id="es12-do-not-reuse-names-in-nested-scopes"><a name="Res-reuse"></a>ES.12: Do not reuse names in nested scopes<a class="anchorjs-link " href="#es12-do-not-reuse-names-in-nested-scopes" aria-label="Anchor link for: es12 do not reuse names in nested scopes" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>It is easy to get confused about which variable is used.
Can cause maintenance problems.</p>
<h3 id="es20-always-initialize-an-object"><a name="Res-always"></a>ES.20: Always initialize an object<a class="anchorjs-link " href="#es20-always-initialize-an-object" aria-label="Anchor link for: es20 always initialize an object" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Avoid used-before-set errors and their associated undefined behavior.
Avoid problems with comprehension of complex initialization.
Simplify refactoring.</p>
<h3 id="es21-dont-introduce-a-variable-or-constant-before-you-need-to-use-it"><a name="Res-introduce"></a>ES.21: Don’t introduce a variable (or constant) before you need to use it<a class="anchorjs-link " href="#es21-dont-introduce-a-variable-or-constant-before-you-need-to-use-it" aria-label="Anchor link for: es21 dont introduce a variable or constant before you need to use it" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability. To limit the scope in which the variable can be used.</p>
<h3 id="es22-dont-declare-a-variable-until-you-have-a-value-to-initialize-it-with"><a name="Res-init"></a>ES.22: Don’t declare a variable until you have a value to initialize it with<a class="anchorjs-link " href="#es22-dont-declare-a-variable-until-you-have-a-value-to-initialize-it-with" aria-label="Anchor link for: es22 dont declare a variable until you have a value to initialize it with" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability. Limit the scope in which a variable can be used. Don’t risk used-before-set. Initialization is often more efficient than assignment.</p>
<h3 id="es23-prefer-the--initializer-syntax"><a name="Res-list"></a>ES.23: Prefer the <code class="highlighter-rouge no-highlight"><span class="p">{}</span></code> initializer syntax<a class="anchorjs-link " href="#es23-prefer-the--initializer-syntax" aria-label="Anchor link for: es23 prefer the  initializer syntax" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The rules for <code class="highlighter-rouge no-highlight"><span class="p">{}</span></code> initialization are simpler, more general, less ambiguous, and safer than for other forms of initialization.</p>
<h3 id="es24-use-a-unique_ptrt-to-hold-pointers"><a name="Res-unique"></a>ES.24: Use a <code class="highlighter-rouge no-highlight">unique_ptr&lt;T&gt;</code> to hold pointers<a class="anchorjs-link " href="#es24-use-a-unique_ptrt-to-hold-pointers" aria-label="Anchor link for: es24 use a unique_ptrt to hold pointers" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Using <code class="highlighter-rouge no-highlight">std::unique_ptr</code> is the simplest way to avoid leaks. It is reliable, it
makes the type system do much of the work to validate ownership safety, it
increases readability, and it has zero or near zero run-time cost.</p>
<h3 id="es25-declare-an-object-const-or-constexpr-unless-you-want-to-modify-its-value-later-on"><a name="Res-const"></a>ES.25: Declare an object <code class="highlighter-rouge no-highlight">const</code> or <code class="highlighter-rouge no-highlight">constexpr</code> unless you want to modify its value later on<a class="anchorjs-link " href="#es25-declare-an-object-const-or-constexpr-unless-you-want-to-modify-its-value-later-on" aria-label="Anchor link for: es25 declare an object const or constexpr unless you want to modify its value later on" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>That way you can’t change the value by mistake. That way may offer the compiler optimization opportunities.</p>
<h3 id="es26-dont-use-a-variable-for-two-unrelated-purposes"><a name="Res-recycle"></a>ES.26: Don’t use a variable for two unrelated purposes<a class="anchorjs-link " href="#es26-dont-use-a-variable-for-two-unrelated-purposes" aria-label="Anchor link for: es26 dont use a variable for two unrelated purposes" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability and safety.</p>
<h3 id="es27-use-stdarray-or-stack_array-for-arrays-on-the-stack"><a name="Res-stack"></a>ES.27: Use <code class="highlighter-rouge no-highlight">std::array</code> or <code class="highlighter-rouge no-highlight">stack_array</code> for arrays on the stack<a class="anchorjs-link " href="#es27-use-stdarray-or-stack_array-for-arrays-on-the-stack" aria-label="Anchor link for: es27 use stdarray or stack_array for arrays on the stack" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>They are readable and don’t implicitly convert to pointers.
They are not confused with non-standard extensions of built-in arrays.</p>
<h3 id="es28-use-lambdas-for-complex-initialization-especially-of-const-variables"><a name="Res-lambda-init"></a>ES.28: Use lambdas for complex initialization, especially of <code class="highlighter-rouge no-highlight">const</code> variables<a class="anchorjs-link " href="#es28-use-lambdas-for-complex-initialization-especially-of-const-variables" aria-label="Anchor link for: es28 use lambdas for complex initialization especially of const variables" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>It nicely encapsulates local initialization, including cleaning up scratch variables needed only for the initialization, without needing to create a needless nonlocal yet nonreusable function. It also works for variables that should be <code class="highlighter-rouge no-highlight">const</code> but only after some initialization work.</p>
<h3 id="es30-dont-use-macros-for-program-text-manipulation"><a name="Res-macros"></a>ES.30: Don’t use macros for program text manipulation<a class="anchorjs-link " href="#es30-dont-use-macros-for-program-text-manipulation" aria-label="Anchor link for: es30 dont use macros for program text manipulation" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Macros are a major source of bugs.
Macros don’t obey the usual scope and type rules.
Macros ensure that the human reader sees something different from what the compiler sees.
Macros complicate tool building.</p>
<h3 id="es31-dont-use-macros-for-constants-or-functions"><a name="Res-macros2"></a>ES.31: Don’t use macros for constants or “functions”<a class="anchorjs-link " href="#es31-dont-use-macros-for-constants-or-functions" aria-label="Anchor link for: es31 dont use macros for constants or functions" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Macros are a major source of bugs.
Macros don’t obey the usual scope and type rules.
Macros don’t obey the usual rules for argument passing.
Macros ensure that the human reader sees something different from what the compiler sees.
Macros complicate tool building.</p>
<h3 id="es32-use-all_caps-for-all-macro-names"><a name="Res-ALL_CAPS"></a>ES.32: Use <code class="highlighter-rouge no-highlight">ALL_CAPS</code> for all macro names<a class="anchorjs-link " href="#es32-use-all_caps-for-all-macro-names" aria-label="Anchor link for: es32 use all_caps for all macro names" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Convention. Readability. Distinguishing macros.</p>
<h3 id="es33-if-you-must-use-macros-give-them-unique-names"><a name="Res-MACROS"></a>ES.33: If you must use macros, give them unique names<a class="anchorjs-link " href="#es33-if-you-must-use-macros-give-them-unique-names" aria-label="Anchor link for: es33 if you must use macros give them unique names" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Macros do not obey scope rules.</p>
<h3 id="-es34-dont-define-a-c-style-variadic-function"><a name="Res-ellipses"></a> ES.34: Don’t define a (C-style) variadic function<a class="anchorjs-link " href="#-es34-dont-define-a-c-style-variadic-function" aria-label="Anchor link for:  es34 dont define a c style variadic function" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Not type safe.
Requires messy cast-and-macro-laden code to get working right.</p>
<h3 id="es70-prefer-a-switch-statement-to-an-if-statement-when-there-is-a-choice"><a name="Res-switch-if"></a>ES.70: Prefer a <code class="highlighter-rouge no-highlight">switch</code>-statement to an <code class="highlighter-rouge no-highlight">if</code>-statement when there is a choice<a class="anchorjs-link " href="#es70-prefer-a-switch-statement-to-an-if-statement-when-there-is-a-choice" aria-label="Anchor link for: es70 prefer a switch statement to an if statement when there is a choice" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<h3 id="es71-prefer-a-range-for-statement-to-a-for-statement-when-there-is-a-choice"><a name="Res-for-range"></a>ES.71: Prefer a range-<code class="highlighter-rouge no-highlight">for</code>-statement to a <code class="highlighter-rouge no-highlight">for</code>-statement when there is a choice<a class="anchorjs-link " href="#es71-prefer-a-range-for-statement-to-a-for-statement-when-there-is-a-choice" aria-label="Anchor link for: es71 prefer a range for statement to a for statement when there is a choice" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability. Error prevention. Efficiency.</p>
<h3 id="es72-prefer-a-for-statement-to-a-while-statement-when-there-is-an-obvious-loop-variable"><a name="Res-for-while"></a>ES.72: Prefer a <code class="highlighter-rouge no-highlight">for</code>-statement to a <code class="highlighter-rouge no-highlight">while</code>-statement when there is an obvious loop variable<a class="anchorjs-link " href="#es72-prefer-a-for-statement-to-a-while-statement-when-there-is-an-obvious-loop-variable" aria-label="Anchor link for: es72 prefer a for statement to a while statement when there is an obvious loop variable" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability: the complete logic of the loop is visible “up front”. The scope of the loop variable can be limited.</p>
<h3 id="es73-prefer-a-while-statement-to-a-for-statement-when-there-is-no-obvious-loop-variable"><a name="Res-while-for"></a>ES.73: Prefer a <code class="highlighter-rouge no-highlight">while</code>-statement to a <code class="highlighter-rouge no-highlight">for</code>-statement when there is no obvious loop variable<a class="anchorjs-link " href="#es73-prefer-a-while-statement-to-a-for-statement-when-there-is-no-obvious-loop-variable" aria-label="Anchor link for: es73 prefer a while statement to a for statement when there is no obvious loop variable" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability.</p>
<h3 id="es74-prefer-to-declare-a-loop-variable-in-the-initializer-part-of-a-for-statement"><a name="Res-for-init"></a>ES.74: Prefer to declare a loop variable in the initializer part of a <code class="highlighter-rouge no-highlight">for</code>-statement<a class="anchorjs-link " href="#es74-prefer-to-declare-a-loop-variable-in-the-initializer-part-of-a-for-statement" aria-label="Anchor link for: es74 prefer to declare a loop variable in the initializer part of a for statement" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Limit the loop variable visibility to the scope of the loop.
Avoid using the loop variable for other purposes after the loop.</p>
<h3 id="es75-avoid-do-statements"><a name="Res-do"></a>ES.75: Avoid <code class="highlighter-rouge no-highlight">do</code>-statements<a class="anchorjs-link " href="#es75-avoid-do-statements" aria-label="Anchor link for: es75 avoid do statements" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability, avoidance of errors.
The termination condition is at the end (where it can be overlooked) and the condition is not checked the first time through.</p>
<h3 id="es76-avoid-goto"><a name="Res-goto"></a>ES.76: Avoid <code class="highlighter-rouge no-highlight">goto</code><a class="anchorjs-link " href="#es76-avoid-goto" aria-label="Anchor link for: es76 avoid goto" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability, avoidance of errors. There are better control structures for humans; <code class="highlighter-rouge no-highlight">goto</code> is for machine generated code.</p>
<h3 id="es77-minimize-the-use-of-break-and-continue-in-loops"><a name="Res-continue"></a>ES.77: Minimize the use of <code class="highlighter-rouge no-highlight">break</code> and <code class="highlighter-rouge no-highlight">continue</code> in loops<a class="anchorjs-link " href="#es77-minimize-the-use-of-break-and-continue-in-loops" aria-label="Anchor link for: es77 minimize the use of break and continue in loops" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>In a non-trivial loop body, it is easy to overlook a <code class="highlighter-rouge no-highlight">break</code> or a <code class="highlighter-rouge no-highlight">continue</code>.</p>
<p>A <code class="highlighter-rouge no-highlight">break</code> in a loop has a dramatically different meaning than a <code class="highlighter-rouge no-highlight">break</code> in a <code class="highlighter-rouge no-highlight">switch</code>-statement
 (and you can have <code class="highlighter-rouge no-highlight">switch</code>-statement in a loop and a loop in a <code class="highlighter-rouge no-highlight">switch</code>-case).</p>
<h3 id="es78-always-end-a-non-empty-case-with-a-break"><a name="Res-break"></a>ES.78: Always end a non-empty <code class="highlighter-rouge no-highlight">case</code> with a <code class="highlighter-rouge no-highlight">break</code><a class="anchorjs-link " href="#es78-always-end-a-non-empty-case-with-a-break" aria-label="Anchor link for: es78 always end a non empty case with a break" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Accidentally leaving out a <code class="highlighter-rouge no-highlight">break</code> is a fairly common bug.
 A deliberate fallthrough is a maintenance hazard.</p>
<h3 id="es79-use-default-to-handle-common-cases-only"><a name="Res-default"></a>ES.79: Use <code class="highlighter-rouge no-highlight">default</code> to handle common cases (only)<a class="anchorjs-link " href="#es79-use-default-to-handle-common-cases-only" aria-label="Anchor link for: es79 use default to handle common cases only" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Code clarity.
 Improved opportunities for error detection.</p>
<h3 id="es84-dont-try-to-declare-a-local-variable-with-no-name"><a name="Res-noname"></a>ES.84: Don’t (try to) declare a local variable with no name<a class="anchorjs-link " href="#es84-dont-try-to-declare-a-local-variable-with-no-name" aria-label="Anchor link for: es84 dont try to declare a local variable with no name" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>There is no such thing.
What looks to a human like a variable without a name is to the compiler a statement consisting of a temporary that immediately goes out of scope.
To avoid unpleasant surprises.</p>
<h3 id="es85-make-empty-statements-visible"><a name="Res-empty"></a>ES.85: Make empty statements visible<a class="anchorjs-link " href="#es85-make-empty-statements-visible" aria-label="Anchor link for: es85 make empty statements visible" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability.</p>
<h3 id="es86-avoid-modifying-loop-control-variables-inside-the-body-of-raw-for-loops"><a name="Res-loop-counter"></a>ES.86: Avoid modifying loop control variables inside the body of raw for-loops<a class="anchorjs-link " href="#es86-avoid-modifying-loop-control-variables-inside-the-body-of-raw-for-loops" aria-label="Anchor link for: es86 avoid modifying loop control variables inside the body of raw for loops" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The loop control up front should enable correct reasoning about what is happening inside the loop. Modifying loop counters in both the iteration-expression and inside the body of the loop is a perennial source of surprises and bugs.</p>
<h3 id="es40-avoid-complicated-expressions"><a name="Res-complicated"></a>ES.40: Avoid complicated expressions<a class="anchorjs-link " href="#es40-avoid-complicated-expressions" aria-label="Anchor link for: es40 avoid complicated expressions" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Complicated expressions are error-prone.</p>
<h3 id="es41-if-in-doubt-about-operator-precedence-parenthesize"><a name="Res-parens"></a>ES.41: If in doubt about operator precedence, parenthesize<a class="anchorjs-link " href="#es41-if-in-doubt-about-operator-precedence-parenthesize" aria-label="Anchor link for: es41 if in doubt about operator precedence parenthesize" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Avoid errors. Readability. Not everyone has the operator table memorized.</p>
<h3 id="es42-keep-use-of-pointers-simple-and-straightforward"><a name="Res-ptr"></a>ES.42: Keep use of pointers simple and straightforward<a class="anchorjs-link " href="#es42-keep-use-of-pointers-simple-and-straightforward" aria-label="Anchor link for: es42 keep use of pointers simple and straightforward" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Complicated pointer manipulation is a major source of errors.</p>
<h3 id="es43-avoid-expressions-with-undefined-order-of-evaluation"><a name="Res-order"></a>ES.43: Avoid expressions with undefined order of evaluation<a class="anchorjs-link " href="#es43-avoid-expressions-with-undefined-order-of-evaluation" aria-label="Anchor link for: es43 avoid expressions with undefined order of evaluation" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>You have no idea what such code does. Portability.
Even if it does something sensible for you, it may do something different on another compiler (e.g., the next release of your compiler) or with a different optimizer setting.</p>
<h3 id="es44-dont-depend-on-order-of-evaluation-of-function-arguments"><a name="Res-order-fct"></a>ES.44: Don’t depend on order of evaluation of function arguments<a class="anchorjs-link " href="#es44-dont-depend-on-order-of-evaluation-of-function-arguments" aria-label="Anchor link for: es44 dont depend on order of evaluation of function arguments" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Because that order is unspecified.</p>
<h3 id="es45-avoid-magic-constants-use-symbolic-constants"><a name="Res-magic"></a>ES.45: Avoid “magic constants”; use symbolic constants<a class="anchorjs-link " href="#es45-avoid-magic-constants-use-symbolic-constants" aria-label="Anchor link for: es45 avoid magic constants use symbolic constants" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Unnamed constants embedded in expressions are easily overlooked and often hard to understand:</p>
<h3 id="es46-avoid-lossy-narrowing-truncating-arithmetic-conversions"><a name="Res-narrowing"></a>ES.46: Avoid lossy (narrowing, truncating) arithmetic conversions<a class="anchorjs-link " href="#es46-avoid-lossy-narrowing-truncating-arithmetic-conversions" aria-label="Anchor link for: es46 avoid lossy narrowing truncating arithmetic conversions" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A narrowing conversion destroys information, often unexpectedly so.</p>
<h3 id="es47-use-nullptr-rather-than-0-or-null"><a name="Res-nullptr"></a>ES.47: Use <code class="highlighter-rouge no-highlight">nullptr</code> rather than <code class="highlighter-rouge no-highlight">0</code> or <code class="highlighter-rouge no-highlight">NULL</code><a class="anchorjs-link " href="#es47-use-nullptr-rather-than-0-or-null" aria-label="Anchor link for: es47 use nullptr rather than 0 or null" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability. Minimize surprises: <code class="highlighter-rouge no-highlight">nullptr</code> cannot be confused with an
<code class="highlighter-rouge no-highlight">int</code>. <code class="highlighter-rouge no-highlight">nullptr</code> also has a well-specified (very restrictive) type, and thus
works in more scenarios where type deduction might do the wrong thing on <code class="highlighter-rouge no-highlight">NULL</code>
or <code class="highlighter-rouge no-highlight">0</code>.</p>
<h3 id="es48-avoid-casts"><a name="Res-casts"></a>ES.48: Avoid casts<a class="anchorjs-link " href="#es48-avoid-casts" aria-label="Anchor link for: es48 avoid casts" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Casts are a well-known source of errors. Make some optimizations unreliable.</p>
<h3 id="es49-if-you-must-use-a-cast-use-a-named-cast"><a name="Res-casts-named"></a>ES.49: If you must use a cast, use a named cast<a class="anchorjs-link " href="#es49-if-you-must-use-a-cast-use-a-named-cast" aria-label="Anchor link for: es49 if you must use a cast use a named cast" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability. Error avoidance.
Named casts are more specific than a C-style or functional cast, allowing the compiler to catch some errors.</p>
<p>The named casts are:</p>
<h3 id="es50-dont-cast-away-const"><a name="Res-casts-const"></a>ES.50: Don’t cast away <code class="highlighter-rouge no-highlight">const</code><a class="anchorjs-link " href="#es50-dont-cast-away-const" aria-label="Anchor link for: es50 dont cast away const" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>It makes a lie out of <code class="highlighter-rouge no-highlight">const</code>.
If the variable is actually declared <code class="highlighter-rouge no-highlight">const</code>, the result of “casting away <code class="highlighter-rouge no-highlight">const</code>” is undefined behavior.</p>
<h3 id="es55-avoid-the-need-for-range-checking"><a name="Res-range-checking"></a>ES.55: Avoid the need for range checking<a class="anchorjs-link " href="#es55-avoid-the-need-for-range-checking" aria-label="Anchor link for: es55 avoid the need for range checking" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Constructs that cannot overflow do not overflow (and usually run faster):</p>
<h3 id="es56-write-stdmove-only-when-you-need-to-explicitly-move-an-object-to-another-scope"><a name="Res-move"></a>ES.56: Write <code class="highlighter-rouge no-highlight">std::move()</code> only when you need to explicitly move an object to another scope<a class="anchorjs-link " href="#es56-write-stdmove-only-when-you-need-to-explicitly-move-an-object-to-another-scope" aria-label="Anchor link for: es56 write stdmove only when you need to explicitly move an object to another scope" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>We move, rather than copy, to avoid duplication and for improved performance.</p>
<p>A move typically leaves behind an empty object (<a href="#Rc-move-semantic">C.64</a>), which can be surprising or even dangerous, so we try to avoid moving from lvalues (they might be accessed later).</p>
<h3 id="es60-avoid-new-and-delete-outside-resource-management-functions"><a name="Res-new"></a>ES.60: Avoid <code class="highlighter-rouge no-highlight">new</code> and <code class="highlighter-rouge no-highlight">delete</code> outside resource management functions<a class="anchorjs-link " href="#es60-avoid-new-and-delete-outside-resource-management-functions" aria-label="Anchor link for: es60 avoid new and delete outside resource management functions" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Direct resource management in application code is error-prone and tedious.</p>
<h3 id="es61-delete-arrays-using-delete-and-non-arrays-using-delete"><a name="Res-del"></a>ES.61: Delete arrays using <code class="highlighter-rouge no-highlight">delete[]</code> and non-arrays using <code class="highlighter-rouge no-highlight">delete</code><a class="anchorjs-link " href="#es61-delete-arrays-using-delete-and-non-arrays-using-delete" aria-label="Anchor link for: es61 delete arrays using delete and non arrays using delete" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>That’s what the language requires and mistakes can lead to resource release errors and/or memory corruption.</p>
<h3 id="es62-dont-compare-pointers-into-different-arrays"><a name="Res-arr2"></a>ES.62: Don’t compare pointers into different arrays<a class="anchorjs-link " href="#es62-dont-compare-pointers-into-different-arrays" aria-label="Anchor link for: es62 dont compare pointers into different arrays" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The result of doing so is undefined.</p>
<h3 id="es63-dont-slice"><a name="Res-slice"></a>ES.63: Don’t slice<a class="anchorjs-link " href="#es63-dont-slice" aria-label="Anchor link for: es63 dont slice" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Slicing – that is, copying only part of an object using assignment or initialization – most often leads to errors because
the object was meant to be considered as a whole.
In the rare cases where the slicing was deliberate the code can be surprising.</p>
<h3 id="es64-use-the-tenotation-for-construction"><a name="Res-construct"></a>ES.64: Use the <code class="highlighter-rouge no-highlight">T{e}</code>notation for construction<a class="anchorjs-link " href="#es64-use-the-tenotation-for-construction" aria-label="Anchor link for: es64 use the tenotation for construction" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The <code class="highlighter-rouge no-highlight">T{e}</code> construction syntax makes it explicit that construction is desired.
The <code class="highlighter-rouge no-highlight">T{e}</code> construction syntax doesn’t allow narrowing.
<code class="highlighter-rouge no-highlight">T{e}</code> is the only safe and general expression for constructing a value of type <code class="highlighter-rouge no-highlight">T</code> from an expression <code class="highlighter-rouge no-highlight">e</code>.
The casts notations <code class="highlighter-rouge no-highlight">T(e)</code> and <code class="highlighter-rouge no-highlight">(T)e</code> are neither safe nor general.</p>
<h3 id="es65-dont-dereference-an-invalid-pointer"><a name="Res-deref"></a>ES.65: Don’t dereference an invalid pointer<a class="anchorjs-link " href="#es65-dont-dereference-an-invalid-pointer" aria-label="Anchor link for: es65 dont dereference an invalid pointer" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Dereferencing an invalid pointer, such as <code class="highlighter-rouge no-highlight">nullptr</code>, is undefined behavior, typically leading to immediate crashes,
wrong results, or memory corruption.</p>
<h3 id="es100-dont-mix-signed-and-unsigned-arithmetic"><a name="Res-mix"></a>ES.100: Don’t mix signed and unsigned arithmetic<a class="anchorjs-link " href="#es100-dont-mix-signed-and-unsigned-arithmetic" aria-label="Anchor link for: es100 dont mix signed and unsigned arithmetic" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Avoid wrong results.</p>
<h3 id="es101-use-unsigned-types-for-bit-manipulation"><a name="Res-unsigned"></a>ES.101: Use unsigned types for bit manipulation<a class="anchorjs-link " href="#es101-use-unsigned-types-for-bit-manipulation" aria-label="Anchor link for: es101 use unsigned types for bit manipulation" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Unsigned types support bit manipulation without surprises from sign bits.</p>
<h3 id="es102-use-signed-types-for-arithmetic"><a name="Res-signed"></a>ES.102: Use signed types for arithmetic<a class="anchorjs-link " href="#es102-use-signed-types-for-arithmetic" aria-label="Anchor link for: es102 use signed types for arithmetic" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Because most arithmetic is assumed to be signed;
<code class="highlighter-rouge no-highlight">x - y</code> yields a negative number when <code class="highlighter-rouge no-highlight">y &gt; x</code> except in the rare cases where you really want modulo arithmetic.</p>
<h3 id="es103-dont-overflow"><a name="Res-overflow"></a>ES.103: Don’t overflow<a class="anchorjs-link " href="#es103-dont-overflow" aria-label="Anchor link for: es103 dont overflow" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Overflow usually makes your numeric algorithm meaningless.
Incrementing a value beyond a maximum value can lead to memory corruption and undefined behavior.</p>
<h3 id="es104-dont-underflow"><a name="Res-underflow"></a>ES.104: Don’t underflow<a class="anchorjs-link " href="#es104-dont-underflow" aria-label="Anchor link for: es104 dont underflow" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Decrementing a value beyond a minimum value can lead to memory corruption and undefined behavior.</p>
<h3 id="es105-dont-divide-by-zero"><a name="Res-zero"></a>ES.105: Don’t divide by zero<a class="anchorjs-link " href="#es105-dont-divide-by-zero" aria-label="Anchor link for: es105 dont divide by zero" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The result is undefined and probably a crash.</p>
<h3 id="es106-dont-try-to-avoid-negative-values-by-using-unsigned"><a name="Res-nonnegative"></a>ES.106: Don’t try to avoid negative values by using <code class="highlighter-rouge no-highlight">unsigned</code><a class="anchorjs-link " href="#es106-dont-try-to-avoid-negative-values-by-using-unsigned" aria-label="Anchor link for: es106 dont try to avoid negative values by using unsigned" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Choosing <code class="highlighter-rouge no-highlight">unsigned</code> implies many changes to the usual behavior of integers, including modulo arithmetic,
can suppress warnings related to overflow,
and opens the door for errors related to signed/unsigned mixes.
Using <code class="highlighter-rouge no-highlight">unsigned</code> doesn’t actually eliminate the possibility of negative values.</p>
<h3 id="es107-dont-use-unsigned-for-subscripts"><a name="Res-subscripts"></a>ES.107: Don’t use <code class="highlighter-rouge no-highlight">unsigned</code> for subscripts<a class="anchorjs-link " href="#es107-dont-use-unsigned-for-subscripts" aria-label="Anchor link for: es107 dont use unsigned for subscripts" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To avoid signed/unsigned confusion.
To enable better optimization.
To enable better error detection.</p>
<h3 id="per1-dont-optimize-without-reason"><a name="Rper-reason"></a>Per.1: Don’t optimize without reason<a class="anchorjs-link " href="#per1-dont-optimize-without-reason" aria-label="Anchor link for: per1 dont optimize without reason" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>If there is no need for optimization, the main result of the effort will be more errors and higher maintenance costs.</p>
<h3 id="per2-dont-optimize-prematurely"><a name="Rper-Knuth"></a>Per.2: Don’t optimize prematurely<a class="anchorjs-link " href="#per2-dont-optimize-prematurely" aria-label="Anchor link for: per2 dont optimize prematurely" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Elaborately optimized code is usually larger and harder to change than unoptimized code.</p>
<p>???</p>
<h3 id="per3-dont-optimize-something-thats-not-performance-critical"><a name="Rper-critical"></a>Per.3: Don’t optimize something that’s not performance critical<a class="anchorjs-link " href="#per3-dont-optimize-something-thats-not-performance-critical" aria-label="Anchor link for: per3 dont optimize something thats not performance critical" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Optimizing a non-performance-critical part of a program has no effect on system performance.</p>
<h3 id="per4-dont-assume-that-complicated-code-is-necessarily-faster-than-simple-code"><a name="Rper-simple"></a>Per.4: Don’t assume that complicated code is necessarily faster than simple code<a class="anchorjs-link " href="#per4-dont-assume-that-complicated-code-is-necessarily-faster-than-simple-code" aria-label="Anchor link for: per4 dont assume that complicated code is necessarily faster than simple code" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Simple code can be very fast. Optimizers sometimes do marvels with simple code</p>
<h3 id="per5-dont-assume-that-low-level-code-is-necessarily-faster-than-high-level-code"><a name="Rper-low"></a>Per.5: Don’t assume that low-level code is necessarily faster than high-level code<a class="anchorjs-link " href="#per5-dont-assume-that-low-level-code-is-necessarily-faster-than-high-level-code" aria-label="Anchor link for: per5 dont assume that low level code is necessarily faster than high level code" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Low-level code sometimes inhibits optimizations. Optimizers sometimes do marvels with high-level code.</p>
<h3 id="per6-dont-make-claims-about-performance-without-measurements"><a name="Rper-measure"></a>Per.6: Don’t make claims about performance without measurements<a class="anchorjs-link " href="#per6-dont-make-claims-about-performance-without-measurements" aria-label="Anchor link for: per6 dont make claims about performance without measurements" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The field of performance is littered with myth and bogus folklore.
Modern hardware and optimizers defy naive assumptions; even experts are regularly surprised.</p>
<h3 id="per7-design-to-enable-optimization"><a name="Rper-efficiency"></a>Per.7: Design to enable optimization<a class="anchorjs-link " href="#per7-design-to-enable-optimization" aria-label="Anchor link for: per7 design to enable optimization" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Because we often need to optimize the initial design.
Because a design that ignore the possibility of later improvement is hard to change.</p>
<h3 id="per10-rely-on-the-static-type-system"><a name="Rper-type"></a>Per.10: Rely on the static type system<a class="anchorjs-link " href="#per10-rely-on-the-static-type-system" aria-label="Anchor link for: per10 rely on the static type system" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Type violations, weak types (e.g. <code class="highlighter-rouge no-highlight">void*</code>s), and low-level code (e.g., manipulation of sequences as individual bytes) make the job of the optimizer much harder. Simple code often optimizes better than hand-crafted complex code.</p>
<p>???</p>
<h3 id="per16-use-compact-data-structures"><a name="Rper-compact"></a>Per.16: Use compact data structures<a class="anchorjs-link " href="#per16-use-compact-data-structures" aria-label="Anchor link for: per16 use compact data structures" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Performance is typically dominated by memory access times.</p>
<p>???</p>
<h3 id="per18-space-is-time"><a name="Rper-space"></a>Per.18: Space is time<a class="anchorjs-link " href="#per18-space-is-time" aria-label="Anchor link for: per18 space is time" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Performance is typically dominated by memory access times.</p>
<p>???</p>
<h3 id="per19-access-memory-predictably"><a name="Rper-access"></a>Per.19: Access memory predictably<a class="anchorjs-link " href="#per19-access-memory-predictably" aria-label="Anchor link for: per19 access memory predictably" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Performance is very sensitive to cache performance and cache algorithms favor simple (usually linear) access to adjacent data.</p>
<h3 id="cp1-assume-that-your-code-will-run-as-part-of-a-multi-threaded-program"><a name="Rconc-multi"></a>CP.1: Assume that your code will run as part of a multi-threaded program<a class="anchorjs-link " href="#cp1-assume-that-your-code-will-run-as-part-of-a-multi-threaded-program" aria-label="Anchor link for: cp1 assume that your code will run as part of a multi threaded program" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>It is hard to be certain that concurrency isn’t used now or will be sometime in the future.
Code gets reused.
Libraries using threads may be used from some other part of the program.
Note that this applies most urgently to library code and least urgently to stand-alone applications.
However, thanks to the magic of cut-and-paste, code fragments can turn up in unexpected places.</p>
<h3 id="cp2-avoid-data-races"><a name="Rconc-races"></a>CP.2: Avoid data races<a class="anchorjs-link " href="#cp2-avoid-data-races" aria-label="Anchor link for: cp2 avoid data races" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Unless you do, nothing is guaranteed to work and subtle errors will persist.</p>
<h3 id="cp3-minimize-explicit-sharing-of-writable-data"><a name="Rconc-data"></a>CP.3: Minimize explicit sharing of writable data<a class="anchorjs-link " href="#cp3-minimize-explicit-sharing-of-writable-data" aria-label="Anchor link for: cp3 minimize explicit sharing of writable data" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>If you don’t share writable data, you can’t have a data race.
The less sharing you do, the less chance you have to forget to synchronize access (and get data races).
The less sharing you do, the less chance you have to wait on a lock (so performance can improve).</p>
<h3 id="cp4-think-in-terms-of-tasks-rather-than-threads"><a name="Rconc-task"></a>CP.4: Think in terms of tasks, rather than threads<a class="anchorjs-link " href="#cp4-think-in-terms-of-tasks-rather-than-threads" aria-label="Anchor link for: cp4 think in terms of tasks rather than threads" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A <code class="highlighter-rouge no-highlight">thread</code> is an implementation concept, a way of thinking about the machine.
A task is an application notion, something you’d like to do, preferably concurrently with other tasks.
Application concepts are easier to reason about.</p>
<h3 id="cp8-dont-try-to-use-volatile-for-synchronization"><a name="Rconc-volatile"></a>CP.8: Don’t try to use <code class="highlighter-rouge no-highlight">volatile</code> for synchronization<a class="anchorjs-link " href="#cp8-dont-try-to-use-volatile-for-synchronization" aria-label="Anchor link for: cp8 dont try to use volatile for synchronization" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>In C++, unlike some other languages, <code class="highlighter-rouge no-highlight">volatile</code> does not provide atomicity, does not synchronize between threads,
and does not prevent instruction reordering (neither compiler nor hardware).
It simply has nothing to do with concurrency.</p>
<h3 id="cp20-use-raii-never-plain-lockunlock"><a name="Rconc-raii"></a>CP.20: Use RAII, never plain <code class="highlighter-rouge no-highlight">lock()</code>/<code class="highlighter-rouge no-highlight">unlock()</code><a class="anchorjs-link " href="#cp20-use-raii-never-plain-lockunlock" aria-label="Anchor link for: cp20 use raii never plain lockunlock" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Avoids nasty errors from unreleased locks.</p>
<h3 id="cp21-use-stdlock-or-stdscoped_lock-to-acquire-multiple-mutexes"><a name="Rconc-lock"></a>CP.21: Use <code class="highlighter-rouge no-highlight">std::lock()</code> or <code class="highlighter-rouge no-highlight">std::scoped_lock</code> to acquire multiple <code class="highlighter-rouge no-highlight">mutex</code>es<a class="anchorjs-link " href="#cp21-use-stdlock-or-stdscoped_lock-to-acquire-multiple-mutexes" aria-label="Anchor link for: cp21 use stdlock or stdscoped_lock to acquire multiple mutexes" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To avoid deadlocks on multiple <code class="highlighter-rouge no-highlight">mutex</code>es.</p>
<h3 id="cp22-never-call-unknown-code-while-holding-a-lock-eg-a-callback"><a name="Rconc-unknown"></a>CP.22: Never call unknown code while holding a lock (e.g., a callback)<a class="anchorjs-link " href="#cp22-never-call-unknown-code-while-holding-a-lock-eg-a-callback" aria-label="Anchor link for: cp22 never call unknown code while holding a lock eg a callback" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>If you don’t know what a piece of code does, you are risking deadlock.</p>
<h3 id="cp23-think-of-a-joining-thread-as-a-scoped-container"><a name="Rconc-join"></a>CP.23: Think of a joining <code class="highlighter-rouge no-highlight">thread</code> as a scoped container<a class="anchorjs-link " href="#cp23-think-of-a-joining-thread-as-a-scoped-container" aria-label="Anchor link for: cp23 think of a joining thread as a scoped container" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To maintain pointer safety and avoid leaks, we need to consider what pointers are used by a <code class="highlighter-rouge no-highlight">thread</code>.
If a <code class="highlighter-rouge no-highlight">thread</code> joins, we can safely pass pointers to objects in the scope of the <code class="highlighter-rouge no-highlight">thread</code> and its enclosing scopes.</p>
<h3 id="cp24-think-of-a-thread-as-a-global-container"><a name="Rconc-detach"></a>CP.24: Think of a <code class="highlighter-rouge no-highlight">thread</code> as a global container<a class="anchorjs-link " href="#cp24-think-of-a-thread-as-a-global-container" aria-label="Anchor link for: cp24 think of a thread as a global container" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To maintain pointer safety and avoid leaks, we need to consider what pointers are used by a <code class="highlighter-rouge no-highlight">thread</code>.
If a <code class="highlighter-rouge no-highlight">thread</code> is detached, we can safely pass pointers to static and free store objects (only).</p>
<h3 id="cp25-prefer-gsljoining_thread-over-stdthread"><a name="Rconc-joining_thread"></a>CP.25: Prefer <code class="highlighter-rouge no-highlight">gsl::joining_thread</code> over <code class="highlighter-rouge no-highlight">std::thread</code><a class="anchorjs-link " href="#cp25-prefer-gsljoining_thread-over-stdthread" aria-label="Anchor link for: cp25 prefer gsljoining_thread over stdthread" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A <code class="highlighter-rouge no-highlight">joining_thread</code> is a thread that joins at the end of its scope.
Detached threads are hard to monitor.
It is harder to ensure absence of errors in detached threads (and potentially detached threads)</p>
<h3 id="cp26-dont-detach-a-thread"><a name="Rconc-detached_thread"></a>CP.26: Don’t <code class="highlighter-rouge no-highlight">detach()</code> a thread<a class="anchorjs-link " href="#cp26-dont-detach-a-thread" aria-label="Anchor link for: cp26 dont detach a thread" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Often, the need to outlive the scope of its creation is inherent in the <code class="highlighter-rouge no-highlight">thread</code>s task,
but implementing that idea by <code class="highlighter-rouge no-highlight">detach</code> makes it harder to monitor and communicate with the detached thread.
In particular, it is harder (though not impossible) to ensure that the thread completed as expected or lives for as long as expected.</p>
<h3 id="cp31-pass-small-amounts-of-data-between-threads-by-value-rather-than-by-reference-or-pointer"><a name="Rconc-data-by-value"></a>CP.31: Pass small amounts of data between threads by value, rather than by reference or pointer<a class="anchorjs-link " href="#cp31-pass-small-amounts-of-data-between-threads-by-value-rather-than-by-reference-or-pointer" aria-label="Anchor link for: cp31 pass small amounts of data between threads by value rather than by reference or pointer" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Copying a small amount of data is cheaper to copy and access than to share it using some locking mechanism.
Copying naturally gives unique ownership (simplifies code) and eliminates the possibility of data races.</p>
<h3 id="cp32-to-share-ownership-between-unrelated-threads-use-shared_ptr"><a name="Rconc-shared"></a>CP.32: To share ownership between unrelated <code class="highlighter-rouge no-highlight">thread</code>s use <code class="highlighter-rouge no-highlight">shared_ptr</code><a class="anchorjs-link " href="#cp32-to-share-ownership-between-unrelated-threads-use-shared_ptr" aria-label="Anchor link for: cp32 to share ownership between unrelated threads use shared_ptr" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>If threads are unrelated (that is, not known to be in the same scope or one within the lifetime of the other)
and they need to share free store memory that needs to be deleted, a <code class="highlighter-rouge no-highlight">shared_ptr</code> (or equivalent) is the only
safe way to ensure proper deletion.</p>
<h3 id="cp40-minimize-context-switching"><a name="Rconc-switch"></a>CP.40: Minimize context switching<a class="anchorjs-link " href="#cp40-minimize-context-switching" aria-label="Anchor link for: cp40 minimize context switching" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Context switches are expensive.</p>
<h3 id="cp41-minimize-thread-creation-and-destruction"><a name="Rconc-create"></a>CP.41: Minimize thread creation and destruction<a class="anchorjs-link " href="#cp41-minimize-thread-creation-and-destruction" aria-label="Anchor link for: cp41 minimize thread creation and destruction" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Thread creation is expensive.</p>
<h3 id="cp42-dont-wait-without-a-condition"><a name="Rconc-wait"></a>CP.42: Don’t <code class="highlighter-rouge no-highlight">wait</code> without a condition<a class="anchorjs-link " href="#cp42-dont-wait-without-a-condition" aria-label="Anchor link for: cp42 dont wait without a condition" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A <code class="highlighter-rouge no-highlight">wait</code> without a condition can miss a wakeup or wake up simply to find that there is no work to do.</p>
<h3 id="cp43-minimize-time-spent-in-a-critical-section"><a name="Rconc-time"></a>CP.43: Minimize time spent in a critical section<a class="anchorjs-link " href="#cp43-minimize-time-spent-in-a-critical-section" aria-label="Anchor link for: cp43 minimize time spent in a critical section" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The less time is spent with a <code class="highlighter-rouge no-highlight">mutex</code> taken, the less chance that another <code class="highlighter-rouge no-highlight">thread</code> has to wait,
and <code class="highlighter-rouge no-highlight">thread</code> suspension and resumption are expensive.</p>
<h3 id="cp44-remember-to-name-your-lock_guards-and-unique_locks"><a name="Rconc-name"></a>CP.44: Remember to name your <code class="highlighter-rouge no-highlight">lock_guard</code>s and <code class="highlighter-rouge no-highlight">unique_lock</code>s<a class="anchorjs-link " href="#cp44-remember-to-name-your-lock_guards-and-unique_locks" aria-label="Anchor link for: cp44 remember to name your lock_guards and unique_locks" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>An unnamed local objects is a temporary that immediately goes out of scope.</p>
<h3 id="p50-define-a-mutex-together-with-the-data-it-guards-use-synchronized_valuet-where-possible"><a name="Rconc-mutex"></a>P.50: Define a <code class="highlighter-rouge no-highlight">mutex</code> together with the data it guards. Use <code class="highlighter-rouge no-highlight">synchronized_value&lt;T&gt;</code> where possible<a class="anchorjs-link " href="#p50-define-a-mutex-together-with-the-data-it-guards-use-synchronized_valuet-where-possible" aria-label="Anchor link for: p50 define a mutex together with the data it guards use synchronized_valuet where possible" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>It should be obvious to a reader that the data is to be guarded and how. This decreases the chance of the wrong mutex being locked, or the mutex not being locked.</p>
<p>Using a <code class="highlighter-rouge no-highlight">synchronized_value&lt;T&gt;</code> ensures that the data has a mutex, and the right mutex is locked when the data is accessed.
See the <a href="http://wg21.link/p0290">WG21 proposal</a>) to add <code class="highlighter-rouge no-highlight">synchronized_value</code> to a future TS or revision of the C++ standard.</p>
<h3 id="cp60-use-a-future-to-return-a-value-from-a-concurrent-task"><a name="Rconc-future"></a>CP.60: Use a <code class="highlighter-rouge no-highlight">future</code> to return a value from a concurrent task<a class="anchorjs-link " href="#cp60-use-a-future-to-return-a-value-from-a-concurrent-task" aria-label="Anchor link for: cp60 use a future to return a value from a concurrent task" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A <code class="highlighter-rouge no-highlight">future</code> preserves the usual function call return semantics for asynchronous tasks.
The is no explicit locking and both correct (value) return and error (exception) return are handled simply.</p>
<h3 id="cp61-use-a-async-to-spawn-a-concurrent-task"><a name="Rconc-async"></a>CP.61: Use a <code class="highlighter-rouge no-highlight">async()</code> to spawn a concurrent task<a class="anchorjs-link " href="#cp61-use-a-async-to-spawn-a-concurrent-task" aria-label="Anchor link for: cp61 use a async to spawn a concurrent task" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A <code class="highlighter-rouge no-highlight">future</code> preserves the usual function call return semantics for asynchronous tasks.
The is no explicit locking and both correct (value) return and error (exception) return are handled simply.</p>
<h3 id="cp100-dont-use-lock-free-programming-unless-you-absolutely-have-to"><a name="Rconc-lockfree"></a>CP.100: Don’t use lock-free programming unless you absolutely have to<a class="anchorjs-link " href="#cp100-dont-use-lock-free-programming-unless-you-absolutely-have-to" aria-label="Anchor link for: cp100 dont use lock free programming unless you absolutely have to" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>It’s error-prone and requires expert level knowledge of language features, machine architecture, and data structures.</p>
<h3 id="cp101-distrust-your-hardwarecompiler-combination"><a name="Rconc-distrust"></a>CP.101: Distrust your hardware/compiler combination<a class="anchorjs-link " href="#cp101-distrust-your-hardwarecompiler-combination" aria-label="Anchor link for: cp101 distrust your hardwarecompiler combination" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The low-level hardware interfaces used by lock-free programming are among the hardest to implement well and among
the areas where the most subtle portability problems occur.
If you are doing lock-free programming for performance, you need to check for regressions.</p>
<h3 id="cp102-carefully-study-the-literature"><a name="Rconc-literature"></a>CP.102: Carefully study the literature<a class="anchorjs-link " href="#cp102-carefully-study-the-literature" aria-label="Anchor link for: cp102 carefully study the literature" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>With the exception of atomics and a few use standard patterns, lock-free programming is really an expert-only topic.
Become an expert before shipping lock-free code for others to use.</p>
<h3 id="cp110-do-not-write-your-own-double-checked-locking-for-initialization"><a name="Rconc-double"></a>CP.110: Do not write your own double-checked locking for initialization<a class="anchorjs-link " href="#cp110-do-not-write-your-own-double-checked-locking-for-initialization" aria-label="Anchor link for: cp110 do not write your own double checked locking for initialization" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Since C++11, static local variables are now initialized in a thread-safe way. When combined with the RAII pattern, static local variables can replace the need for writing your own double-checked locking for initialization. std::call_once can also achieve the same purpose. Use either static local variables of C++11 or std::call_once instead of writing your own double-checked locking for initialization.</p>
<h3 id="cp111-use-a-conventional-pattern-if-you-really-need-double-checked-locking"><a name="Rconc-double-pattern"></a>CP.111: Use a conventional pattern if you really need double-checked locking<a class="anchorjs-link " href="#cp111-use-a-conventional-pattern-if-you-really-need-double-checked-locking" aria-label="Anchor link for: cp111 use a conventional pattern if you really need double checked locking" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Double-checked locking is easy to mess up. If you really need to write your own double-checked locking, in spite of the rules <a href="#Rconc-double">CP.110: Do not write your own double-checked locking for initialization</a> and <a href="#Rconc-lockfree">CP.100: Don’t use lock-free programming unless you absolutely have to</a>, then do it in a conventional pattern.</p>
<p>The uses of the double-checked locking pattern that are not in violation of <a href="#Rconc-double">CP.110: Do not write your own double-checked locking for initialization</a> arise when a non-thread-safe action is both hard and rare, and there exists a fast thread-safe test that can be used to guarantee that the action is not needed, but cannot be used to guarantee the converse.</p>
<h3 id="cp200-use-volatile-only-to-talk-to-non-c-memory"><a name="Rconc-volatile2"></a>CP.200: Use <code class="highlighter-rouge no-highlight">volatile</code> only to talk to non-C++ memory<a class="anchorjs-link " href="#cp200-use-volatile-only-to-talk-to-non-c-memory" aria-label="Anchor link for: cp200 use volatile only to talk to non c memory" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><code class="highlighter-rouge no-highlight">volatile</code> is used to refer to objects that are shared with “non-C++” code or hardware that does not follow the C++ memory model.</p>
<h3 id="e1-develop-an-error-handling-strategy-early-in-a-design"><a name="Re-design"></a>E.1: Develop an error-handling strategy early in a design<a class="anchorjs-link " href="#e1-develop-an-error-handling-strategy-early-in-a-design" aria-label="Anchor link for: e1 develop an error handling strategy early in a design" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A consistent and complete strategy for handling errors and resource leaks is hard to retrofit into a system.</p>
<h3 id="e2-throw-an-exception-to-signal-that-a-function-cant-perform-its-assigned-task"><a name="Re-throw"></a>E.2: Throw an exception to signal that a function can’t perform its assigned task<a class="anchorjs-link " href="#e2-throw-an-exception-to-signal-that-a-function-cant-perform-its-assigned-task" aria-label="Anchor link for: e2 throw an exception to signal that a function cant perform its assigned task" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To make error handling systematic, robust, and non-repetitive.</p>
<h3 id="e3-use-exceptions-for-error-handling-only"><a name="Re-errors"></a>E.3: Use exceptions for error handling only<a class="anchorjs-link " href="#e3-use-exceptions-for-error-handling-only" aria-label="Anchor link for: e3 use exceptions for error handling only" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To keep error handling separated from “ordinary code.”
C++ implementations tend to be optimized based on the assumption that exceptions are rare.</p>
<h3 id="e4-design-your-error-handling-strategy-around-invariants"><a name="Re-design-invariants"></a>E.4: Design your error-handling strategy around invariants<a class="anchorjs-link " href="#e4-design-your-error-handling-strategy-around-invariants" aria-label="Anchor link for: e4 design your error handling strategy around invariants" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To use an object it must be in a valid state (defined formally or informally by an invariant) and to recover from an error every object not destroyed must be in a valid state.</p>
<h3 id="e5-let-a-constructor-establish-an-invariant-and-throw-if-it-cannot"><a name="Re-invariant"></a>E.5: Let a constructor establish an invariant, and throw if it cannot<a class="anchorjs-link " href="#e5-let-a-constructor-establish-an-invariant-and-throw-if-it-cannot" aria-label="Anchor link for: e5 let a constructor establish an invariant and throw if it cannot" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Leaving an object without its invariant established is asking for trouble.
Not all member functions can be called.</p>
<h3 id="e6-use-raii-to-prevent-leaks"><a name="Re-raii"></a>E.6: Use RAII to prevent leaks<a class="anchorjs-link " href="#e6-use-raii-to-prevent-leaks" aria-label="Anchor link for: e6 use raii to prevent leaks" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Leaks are typically unacceptable.
Manual resource release is error-prone.
RAII (“Resource Acquisition Is Initialization”) is the simplest, most systematic way of preventing leaks.</p>
<h3 id="e7-state-your-preconditions"><a name="Re-precondition"></a>E.7: State your preconditions<a class="anchorjs-link " href="#e7-state-your-preconditions" aria-label="Anchor link for: e7 state your preconditions" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To avoid interface errors.</p>
<p><strong>See also</strong>: <a href="#Ri-pre">precondition rule</a>.</p>
<h3 id="e8-state-your-postconditions"><a name="Re-postcondition"></a>E.8: State your postconditions<a class="anchorjs-link " href="#e8-state-your-postconditions" aria-label="Anchor link for: e8 state your postconditions" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To avoid interface errors.</p>
<p><strong>See also</strong>: <a href="#Ri-post">postcondition rule</a>.</p>
<h3 id="e12-use-noexcept-when-exiting-a-function-because-of-a-throw-is-impossible-or-unacceptable"><a name="Re-noexcept"></a>E.12: Use <code class="highlighter-rouge no-highlight">noexcept</code> when exiting a function because of a <code class="highlighter-rouge no-highlight">throw</code> is impossible or unacceptable<a class="anchorjs-link " href="#e12-use-noexcept-when-exiting-a-function-because-of-a-throw-is-impossible-or-unacceptable" aria-label="Anchor link for: e12 use noexcept when exiting a function because of a throw is impossible or unacceptable" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To make error handling systematic, robust, and efficient.</p>
<h3 id="e13-never-throw-while-being-the-direct-owner-of-an-object"><a name="Re-never-throw"></a>E.13: Never throw while being the direct owner of an object<a class="anchorjs-link " href="#e13-never-throw-while-being-the-direct-owner-of-an-object" aria-label="Anchor link for: e13 never throw while being the direct owner of an object" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>That would be a leak.</p>
<h3 id="e14-use-purpose-designed-user-defined-types-as-exceptions-not-built-in-types"><a name="Re-exception-types"></a>E.14: Use purpose-designed user-defined types as exceptions (not built-in types)<a class="anchorjs-link " href="#e14-use-purpose-designed-user-defined-types-as-exceptions-not-built-in-types" aria-label="Anchor link for: e14 use purpose designed user defined types as exceptions not built in types" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A user-defined type is unlikely to clash with other people’s exceptions.</p>
<h3 id="e15-catch-exceptions-from-a-hierarchy-by-reference"><a name="Re-exception-ref"></a>E.15: Catch exceptions from a hierarchy by reference<a class="anchorjs-link " href="#e15-catch-exceptions-from-a-hierarchy-by-reference" aria-label="Anchor link for: e15 catch exceptions from a hierarchy by reference" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To prevent slicing.</p>
<h3 id="e16-destructors-deallocation-and-swap-must-never-fail"><a name="Re-never-fail"></a>E.16: Destructors, deallocation, and <code class="highlighter-rouge no-highlight">swap</code> must never fail<a class="anchorjs-link " href="#e16-destructors-deallocation-and-swap-must-never-fail" aria-label="Anchor link for: e16 destructors deallocation and swap must never fail" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>We don’t know how to write reliable programs if a destructor, a swap, or a memory deallocation fails; that is, if it exits by an exception or simply doesn’t perform its required action.</p>
<h3 id="e17-dont-try-to-catch-every-exception-in-every-function"><a name="Re-not-always"></a>E.17: Don’t try to catch every exception in every function<a class="anchorjs-link " href="#e17-dont-try-to-catch-every-exception-in-every-function" aria-label="Anchor link for: e17 dont try to catch every exception in every function" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Catching an exception in a function that cannot take a meaningful recovery action leads to complexity and waste.
Let an exception propagate until it reaches a function that can handle it.
Let cleanup actions on the unwinding path be handled by <a href="#Re-raii">RAII</a>.</p>
<h3 id="e18-minimize-the-use-of-explicit-trycatch"><a name="Re-catch"></a>E.18: Minimize the use of explicit <code class="highlighter-rouge no-highlight">try</code>/<code class="highlighter-rouge no-highlight">catch</code><a class="anchorjs-link " href="#e18-minimize-the-use-of-explicit-trycatch" aria-label="Anchor link for: e18 minimize the use of explicit trycatch" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><code class="highlighter-rouge no-highlight">try</code>/<code class="highlighter-rouge no-highlight">catch</code> is verbose and non-trivial uses error-prone.
 <code class="highlighter-rouge no-highlight">try</code>/<code class="highlighter-rouge no-highlight">catch</code> can be a sign of unsystematic and/or low-level resource management or error handling.</p>
<h3 id="e19-use-a-final_action-object-to-express-cleanup-if-no-suitable-resource-handle-is-available"><a name="Re-finally"></a>E.19: Use a <code class="highlighter-rouge no-highlight">final_action</code> object to express cleanup if no suitable resource handle is available<a class="anchorjs-link " href="#e19-use-a-final_action-object-to-express-cleanup-if-no-suitable-resource-handle-is-available" aria-label="Anchor link for: e19 use a final_action object to express cleanup if no suitable resource handle is available" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><code class="highlighter-rouge no-highlight">finally</code> is less verbose and harder to get wrong than <code class="highlighter-rouge no-highlight">try</code>/<code class="highlighter-rouge no-highlight">catch</code>.</p>
<h3 id="e25-if-you-cant-throw-exceptions-simulate-raii-for-resource-management"><a name="Re-no-throw-raii"></a>E.25: If you can’t throw exceptions, simulate RAII for resource management<a class="anchorjs-link " href="#e25-if-you-cant-throw-exceptions-simulate-raii-for-resource-management" aria-label="Anchor link for: e25 if you cant throw exceptions simulate raii for resource management" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Even without exceptions, <a href="#Re-raii">RAII</a> is usually the best and most systematic way of dealing with resources.</p>
<h3 id="e26-if-you-cant-throw-exceptions-consider-failing-fast"><a name="Re-no-throw-crash"></a>E.26: If you can’t throw exceptions, consider failing fast<a class="anchorjs-link " href="#e26-if-you-cant-throw-exceptions-consider-failing-fast" aria-label="Anchor link for: e26 if you cant throw exceptions consider failing fast" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>If you can’t do a good job at recovering, at least you can get out before too much consequential damage is done.</p>
<p>See also <a href="#Re-no-throw-raii">Simulating RAII</a>.</p>
<h3 id="e27-if-you-cant-throw-exceptions-use-error-codes-systematically"><a name="Re-no-throw-codes"></a>E.27: If you can’t throw exceptions, use error codes systematically<a class="anchorjs-link " href="#e27-if-you-cant-throw-exceptions-use-error-codes-systematically" aria-label="Anchor link for: e27 if you cant throw exceptions use error codes systematically" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Systematic use of any error-handling strategy minimizes the chance of forgetting to handle an error.</p>
<p>See also <a href="#Re-no-throw-raii">Simulating RAII</a>.</p>
<h3 id="e28-avoid-error-handling-based-on-global-state-eg-errno"><a name="Re-no-throw"></a>E.28: Avoid error handling based on global state (e.g. <code class="highlighter-rouge no-highlight">errno</code>)<a class="anchorjs-link " href="#e28-avoid-error-handling-based-on-global-state-eg-errno" aria-label="Anchor link for: e28 avoid error handling based on global state eg errno" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Global state is hard to manage and it is easy to forget to check it.
When did you last test the return value of <code class="highlighter-rouge no-highlight">printf()</code>?</p>
<p>See also <a href="#Re-no-throw-raii">Simulating RAII</a>.</p>
<h3 id="e30-dont-use-exception-specifications"><a name="Re-specifications"></a>E.30: Don’t use exception specifications<a class="anchorjs-link " href="#e30-dont-use-exception-specifications" aria-label="Anchor link for: e30 dont use exception specifications" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Exception specifications make error handling brittle, impose a run-time cost, and have been removed from the C++ standard.</p>
<h3 id="e31-properly-order-your-catch-clauses"><a name="Re_catch"></a>E.31: Properly order your <code class="highlighter-rouge no-highlight">catch</code>-clauses<a class="anchorjs-link " href="#e31-properly-order-your-catch-clauses" aria-label="Anchor link for: e31 properly order your catch clauses" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><code class="highlighter-rouge no-highlight">catch</code>-clauses are evaluated in the order they appear and one clause can hide another.</p>
<h3 id="con1-by-default-make-objects-immutable"><a name="Rconst-immutable"></a>Con.1: By default, make objects immutable<a class="anchorjs-link " href="#con1-by-default-make-objects-immutable" aria-label="Anchor link for: con1 by default make objects immutable" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Immutable objects are easier to reason about, so make objects non-<code class="highlighter-rouge no-highlight">const</code> only when there is a need to change their value.
Prevents accidental or hard-to-notice change of value.</p>
<h3 id="con2-by-default-make-member-functions-const"><a name="Rconst-fct"></a>Con.2: By default, make member functions <code class="highlighter-rouge no-highlight">const</code><a class="anchorjs-link " href="#con2-by-default-make-member-functions-const" aria-label="Anchor link for: con2 by default make member functions const" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A member function should be marked <code class="highlighter-rouge no-highlight">const</code> unless it changes the object’s observable state.
This gives a more precise statement of design intent, better readability, more errors caught by the compiler, and sometimes more optimization opportunities.</p>
<h3 id="con3-by-default-pass-pointers-and-references-to-consts"><a name="Rconst-ref"></a>Con.3: By default, pass pointers and references to <code class="highlighter-rouge no-highlight">const</code>s<a class="anchorjs-link " href="#con3-by-default-pass-pointers-and-references-to-consts" aria-label="Anchor link for: con3 by default pass pointers and references to consts" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To avoid a called function unexpectedly changing the value.
 It’s far easier to reason about programs when called functions don’t modify state.</p>
<h3 id="con4-use-const-to-define-objects-with-values-that-do-not-change-after-construction"><a name="Rconst-const"></a>Con.4: Use <code class="highlighter-rouge no-highlight">const</code> to define objects with values that do not change after construction<a class="anchorjs-link " href="#con4-use-const-to-define-objects-with-values-that-do-not-change-after-construction" aria-label="Anchor link for: con4 use const to define objects with values that do not change after construction" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Prevent surprises from unexpectedly changed object values.</p>
<h3 id="con5-use-constexpr-for-values-that-can-be-computed-at-compile-time"><a name="Rconst-constexpr"></a>Con.5: Use <code class="highlighter-rouge no-highlight">constexpr</code> for values that can be computed at compile time<a class="anchorjs-link " href="#con5-use-constexpr-for-values-that-can-be-computed-at-compile-time" aria-label="Anchor link for: con5 use constexpr for values that can be computed at compile time" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Better performance, better compile-time checking, guaranteed compile-time evaluation, no possibility of race conditions.</p>
<h3 id="t1-use-templates-to-raise-the-level-of-abstraction-of-code"><a name="Rt-raise"></a>T.1: Use templates to raise the level of abstraction of code<a class="anchorjs-link " href="#t1-use-templates-to-raise-the-level-of-abstraction-of-code" aria-label="Anchor link for: t1 use templates to raise the level of abstraction of code" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Generality. Reuse. Efficiency. Encourages consistent definition of user types.</p>
<h3 id="t2-use-templates-to-express-algorithms-that-apply-to-many-argument-types"><a name="Rt-algo"></a>T.2: Use templates to express algorithms that apply to many argument types<a class="anchorjs-link " href="#t2-use-templates-to-express-algorithms-that-apply-to-many-argument-types" aria-label="Anchor link for: t2 use templates to express algorithms that apply to many argument types" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Generality. Minimizing the amount of source code. Interoperability. Reuse.</p>
<h3 id="t3-use-templates-to-express-containers-and-ranges"><a name="Rt-cont"></a>T.3: Use templates to express containers and ranges<a class="anchorjs-link " href="#t3-use-templates-to-express-containers-and-ranges" aria-label="Anchor link for: t3 use templates to express containers and ranges" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Containers need an element type, and expressing that as a template argument is general, reusable, and type safe.
It also avoids brittle or inefficient workarounds. Convention: That’s the way the STL does it.</p>
<h3 id="t4-use-templates-to-express-syntax-tree-manipulation"><a name="Rt-expr"></a>T.4: Use templates to express syntax tree manipulation<a class="anchorjs-link " href="#t4-use-templates-to-express-syntax-tree-manipulation" aria-label="Anchor link for: t4 use templates to express syntax tree manipulation" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>???</p>
<h3 id="t5-combine-generic-and-oo-techniques-to-amplify-their-strengths-not-their-costs"><a name="Rt-generic-oo"></a>T.5: Combine generic and OO techniques to amplify their strengths, not their costs<a class="anchorjs-link " href="#t5-combine-generic-and-oo-techniques-to-amplify-their-strengths-not-their-costs" aria-label="Anchor link for: t5 combine generic and oo techniques to amplify their strengths not their costs" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Generic and OO techniques are complementary.</p>
<h3 id="t10-specify-concepts-for-all-template-arguments"><a name="Rt-concepts"></a>T.10: Specify concepts for all template arguments<a class="anchorjs-link " href="#t10-specify-concepts-for-all-template-arguments" aria-label="Anchor link for: t10 specify concepts for all template arguments" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Correctness and readability.
The assumed meaning (syntax and semantics) of a template argument is fundamental to the interface of a template.
A concept dramatically improves documentation and error handling for the template.
Specifying concepts for template arguments is a powerful design tool.</p>
<h3 id="t11-whenever-possible-use-standard-concepts"><a name="Rt-std-concepts"></a>T.11: Whenever possible use standard concepts<a class="anchorjs-link " href="#t11-whenever-possible-use-standard-concepts" aria-label="Anchor link for: t11 whenever possible use standard concepts" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>“Standard” concepts (as provided by the <a href="#S-GSL">GSL</a> and the <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/n4569.pdf">Ranges TS</a>, and hopefully soon the ISO standard itself)
saves us the work of thinking up our own concepts, are better thought out than we can manage to do in a hurry, and improves interoperability.</p>
<h3 id="t12-prefer-concept-names-over-auto-for-local-variables"><a name="Rt-auto"></a>T.12: Prefer concept names over <code class="highlighter-rouge no-highlight">auto</code> for local variables<a class="anchorjs-link " href="#t12-prefer-concept-names-over-auto-for-local-variables" aria-label="Anchor link for: t12 prefer concept names over auto for local variables" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><code class="highlighter-rouge no-highlight">auto</code> is the weakest concept. Concept names convey more meaning than just <code class="highlighter-rouge no-highlight">auto</code>.</p>
<h3 id="t13-prefer-the-shorthand-notation-for-simple-single-type-argument-concepts"><a name="Rt-shorthand"></a>T.13: Prefer the shorthand notation for simple, single-type argument concepts<a class="anchorjs-link " href="#t13-prefer-the-shorthand-notation-for-simple-single-type-argument-concepts" aria-label="Anchor link for: t13 prefer the shorthand notation for simple single type argument concepts" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability. Direct expression of an idea.</p>
<h3 id="t20-avoid-concepts-without-meaningful-semantics"><a name="Rt-low"></a>T.20: Avoid “concepts” without meaningful semantics<a class="anchorjs-link " href="#t20-avoid-concepts-without-meaningful-semantics" aria-label="Anchor link for: t20 avoid concepts without meaningful semantics" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Concepts are meant to express semantic notions, such as “a number”, “a range” of elements, and “totally ordered.”
Simple constraints, such as “has a <code class="highlighter-rouge no-highlight">+</code> operator” and “has a <code class="highlighter-rouge no-highlight">&gt;</code> operator” cannot be meaningfully specified in isolation
and should be used only as building blocks for meaningful concepts, rather than in user code.</p>
<h3 id="t21-require-a-complete-set-of-operations-for-a-concept"><a name="RT-operations"></a>T.21: Require a complete set of operations for a concept<a class="anchorjs-link " href="#t21-require-a-complete-set-of-operations-for-a-concept" aria-label="Anchor link for: t21 require a complete set of operations for a concept" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Ease of comprehension.
Improved interoperability.
Helps implementers and maintainers.</p>
<h3 id="t22-specify-axioms-for-concepts"><a name="Rt-axiom"></a>T.22: Specify axioms for concepts<a class="anchorjs-link " href="#t22-specify-axioms-for-concepts" aria-label="Anchor link for: t22 specify axioms for concepts" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A meaningful/useful concept has a semantic meaning.
Expressing these semantics in an informal, semi-formal, or formal way makes the concept comprehensible to readers and the effort to express it can catch conceptual errors.
Specifying semantics is a powerful design tool.</p>
<h3 id="t23-differentiate-a-refined-concept-from-its-more-general-case-by-adding-new-use-patterns"><a name="Rt-refine"></a>T.23: Differentiate a refined concept from its more general case by adding new use patterns.<a class="anchorjs-link " href="#t23-differentiate-a-refined-concept-from-its-more-general-case-by-adding-new-use-patterns" aria-label="Anchor link for: t23 differentiate a refined concept from its more general case by adding new use patterns" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Otherwise they cannot be distinguished automatically by the compiler.</p>
<h3 id="t24-use-tag-classes-or-traits-to-differentiate-concepts-that-differ-only-in-semantics"><a name="Rt-tag"></a>T.24: Use tag classes or traits to differentiate concepts that differ only in semantics.<a class="anchorjs-link " href="#t24-use-tag-classes-or-traits-to-differentiate-concepts-that-differ-only-in-semantics" aria-label="Anchor link for: t24 use tag classes or traits to differentiate concepts that differ only in semantics" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Two concepts requiring the same syntax but having different semantics leads to ambiguity unless the programmer differentiates them.</p>
<h3 id="t25-avoid-complementary-constraints"><a name="Rt-not"></a>T.25: Avoid complementary constraints<a class="anchorjs-link " href="#t25-avoid-complementary-constraints" aria-label="Anchor link for: t25 avoid complementary constraints" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Clarity. Maintainability.
Functions with complementary requirements expressed using negation are brittle.</p>
<h3 id="t26-prefer-to-define-concepts-in-terms-of-use-patterns-rather-than-simple-syntax"><a name="Rt-use"></a>T.26: Prefer to define concepts in terms of use-patterns rather than simple syntax<a class="anchorjs-link " href="#t26-prefer-to-define-concepts-in-terms-of-use-patterns-rather-than-simple-syntax" aria-label="Anchor link for: t26 prefer to define concepts in terms of use patterns rather than simple syntax" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The definition is more readable and corresponds directly to what a user has to write.
Conversions are taken into account. You don’t have to remember the names of all the type traits.</p>
<h3 id="t40-use-function-objects-to-pass-operations-to-algorithms"><a name="Rt-fo"></a>T.40: Use function objects to pass operations to algorithms<a class="anchorjs-link " href="#t40-use-function-objects-to-pass-operations-to-algorithms" aria-label="Anchor link for: t40 use function objects to pass operations to algorithms" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Function objects can carry more information through an interface than a “plain” pointer to function.
In general, passing function objects gives better performance than passing pointers to functions.</p>
<h3 id="t41-require-only-essential-properties-in-a-templates-concepts"><a name="Rt-essential"></a>T.41: Require only essential properties in a template’s concepts<a class="anchorjs-link " href="#t41-require-only-essential-properties-in-a-templates-concepts" aria-label="Anchor link for: t41 require only essential properties in a templates concepts" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Keep interfaces simple and stable.</p>
<h3 id="t42-use-template-aliases-to-simplify-notation-and-hide-implementation-details"><a name="Rt-alias"></a>T.42: Use template aliases to simplify notation and hide implementation details<a class="anchorjs-link " href="#t42-use-template-aliases-to-simplify-notation-and-hide-implementation-details" aria-label="Anchor link for: t42 use template aliases to simplify notation and hide implementation details" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Improved readability.
Implementation hiding.
Note that template aliases replace many uses of traits to compute a type.
They can also be used to wrap a trait.</p>
<h3 id="t43-prefer-using-over-typedef-for-defining-aliases"><a name="Rt-using"></a>T.43: Prefer <code class="highlighter-rouge no-highlight">using</code> over <code class="highlighter-rouge no-highlight">typedef</code> for defining aliases<a class="anchorjs-link " href="#t43-prefer-using-over-typedef-for-defining-aliases" aria-label="Anchor link for: t43 prefer using over typedef for defining aliases" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Improved readability: With <code class="highlighter-rouge no-highlight">using</code>, the new name comes first rather than being embedded somewhere in a declaration.
Generality: <code class="highlighter-rouge no-highlight">using</code> can be used for template aliases, whereas <code class="highlighter-rouge no-highlight">typedef</code>s can’t easily be templates.
Uniformity: <code class="highlighter-rouge no-highlight">using</code> is syntactically similar to <code class="highlighter-rouge no-highlight">auto</code>.</p>
<h3 id="t44-use-function-templates-to-deduce-class-template-argument-types-where-feasible"><a name="Rt-deduce"></a>T.44: Use function templates to deduce class template argument types (where feasible)<a class="anchorjs-link " href="#t44-use-function-templates-to-deduce-class-template-argument-types-where-feasible" aria-label="Anchor link for: t44 use function templates to deduce class template argument types where feasible" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Writing the template argument types explicitly can be tedious and unnecessarily verbose.</p>
<h3 id="t46-require-template-arguments-to-be-at-least-regular-or-semiregular"><a name="Rt-regular"></a>T.46: Require template arguments to be at least <code class="highlighter-rouge no-highlight">Regular</code> or <code class="highlighter-rouge no-highlight">SemiRegular</code><a class="anchorjs-link " href="#t46-require-template-arguments-to-be-at-least-regular-or-semiregular" aria-label="Anchor link for: t46 require template arguments to be at least regular or semiregular" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability.
 Preventing surprises and errors.
 Most uses support that anyway.</p>
<h3 id="t47-avoid-highly-visible-unconstrained-templates-with-common-names"><a name="Rt-visible"></a>T.47: Avoid highly visible unconstrained templates with common names<a class="anchorjs-link " href="#t47-avoid-highly-visible-unconstrained-templates-with-common-names" aria-label="Anchor link for: t47 avoid highly visible unconstrained templates with common names" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>An unconstrained template argument is a perfect match for anything so such a template can be preferred over more specific types that require minor conversions.
 This is particularly annoying/dangerous when ADL is used.
 Common names make this problem more likely.</p>
<h3 id="t48-if-your-compiler-does-not-support-concepts-fake-them-with-enable_if"><a name="Rt-concept-def"></a>T.48: If your compiler does not support concepts, fake them with <code class="highlighter-rouge no-highlight">enable_if</code><a class="anchorjs-link " href="#t48-if-your-compiler-does-not-support-concepts-fake-them-with-enable_if" aria-label="Anchor link for: t48 if your compiler does not support concepts fake them with enable_if" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Because that’s the best we can do without direct concept support.
<code class="highlighter-rouge no-highlight">enable_if</code> can be used to conditionally define functions and to select among a set of functions.</p>
<h3 id="t49-where-possible-avoid-type-erasure"><a name="Rt-erasure"></a>T.49: Where possible, avoid type-erasure<a class="anchorjs-link " href="#t49-where-possible-avoid-type-erasure" aria-label="Anchor link for: t49 where possible avoid type erasure" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Type erasure incurs an extra level of indirection by hiding type information behind a separate compilation boundary.</p>
<h3 id="t60-minimize-a-templates-context-dependencies"><a name="Rt-depend"></a>T.60: Minimize a template’s context dependencies<a class="anchorjs-link " href="#t60-minimize-a-templates-context-dependencies" aria-label="Anchor link for: t60 minimize a templates context dependencies" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Eases understanding.
Minimizes errors from unexpected dependencies.
Eases tool creation.</p>
<h3 id="t61-do-not-over-parameterize-members-scary"><a name="Rt-scary"></a>T.61: Do not over-parameterize members (SCARY)<a class="anchorjs-link " href="#t61-do-not-over-parameterize-members-scary" aria-label="Anchor link for: t61 do not over parameterize members scary" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A member that does not depend on a template parameter cannot be used except for a specific template argument.
This limits use and typically increases code size.</p>
<h3 id="t62-place-non-dependent-class-template-members-in-a-non-templated-base-class"><a name="Rt-nondependent"></a>T.62: Place non-dependent class template members in a non-templated base class<a class="anchorjs-link " href="#t62-place-non-dependent-class-template-members-in-a-non-templated-base-class" aria-label="Anchor link for: t62 place non dependent class template members in a non templated base class" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Allow the base class members to be used without specifying template arguments and without template instantiation.</p>
<h3 id="t64-use-specialization-to-provide-alternative-implementations-of-class-templates"><a name="Rt-specialization"></a>T.64: Use specialization to provide alternative implementations of class templates<a class="anchorjs-link " href="#t64-use-specialization-to-provide-alternative-implementations-of-class-templates" aria-label="Anchor link for: t64 use specialization to provide alternative implementations of class templates" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A template defines a general interface.
Specialization offers a powerful mechanism for providing alternative implementations of that interface.</p>
<h3 id="t65-use-tag-dispatch-to-provide-alternative-implementations-of-a-function"><a name="Rt-tag-dispatch"></a>T.65: Use tag dispatch to provide alternative implementations of a function<a class="anchorjs-link " href="#t65-use-tag-dispatch-to-provide-alternative-implementations-of-a-function" aria-label="Anchor link for: t65 use tag dispatch to provide alternative implementations of a function" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<h3 id="t67-use-specialization-to-provide-alternative-implementations-for-irregular-types"><a name="Rt-specialization2"></a>T.67: Use specialization to provide alternative implementations for irregular types<a class="anchorjs-link " href="#t67-use-specialization-to-provide-alternative-implementations-for-irregular-types" aria-label="Anchor link for: t67 use specialization to provide alternative implementations for irregular types" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>???</p>
<h3 id="t68-use--rather-than--within-templates-to-avoid-ambiguities"><a name="Rt-cast"></a>T.68: Use <code class="highlighter-rouge no-highlight"><span class="p">{}</span></code> rather than <code class="highlighter-rouge no-highlight">()</code> within templates to avoid ambiguities<a class="anchorjs-link " href="#t68-use--rather-than--within-templates-to-avoid-ambiguities" aria-label="Anchor link for: t68 use  rather than  within templates to avoid ambiguities" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><code class="highlighter-rouge no-highlight">()</code> is vulnerable to grammar ambiguities.</p>
<h3 id="t69-inside-a-template-dont-make-an-unqualified-nonmember-function-call-unless-you-intend-it-to-be-a-customization-point"><a name="Rt-customization"></a>T.69: Inside a template, don’t make an unqualified nonmember function call unless you intend it to be a customization point<a class="anchorjs-link " href="#t69-inside-a-template-dont-make-an-unqualified-nonmember-function-call-unless-you-intend-it-to-be-a-customization-point" aria-label="Anchor link for: t69 inside a template dont make an unqualified nonmember function call unless you intend it to be a customization point" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<h3 id="t80-do-not-naively-templatize-a-class-hierarchy"><a name="Rt-hier"></a>T.80: Do not naively templatize a class hierarchy<a class="anchorjs-link " href="#t80-do-not-naively-templatize-a-class-hierarchy" aria-label="Anchor link for: t80 do not naively templatize a class hierarchy" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Templating a class hierarchy that has many functions, especially many virtual functions, can lead to code bloat.</p>
<h3 id="t81-do-not-mix-hierarchies-and-arrays"><a name="Rt-array"></a>T.81: Do not mix hierarchies and arrays<a class="anchorjs-link " href="#t81-do-not-mix-hierarchies-and-arrays" aria-label="Anchor link for: t81 do not mix hierarchies and arrays" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>An array of derived classes can implicitly “decay” to a pointer to a base class with potential disastrous results.</p>
<h3 id="t82-linearize-a-hierarchy-when-virtual-functions-are-undesirable"><a name="Rt-linear"></a>T.82: Linearize a hierarchy when virtual functions are undesirable<a class="anchorjs-link " href="#t82-linearize-a-hierarchy-when-virtual-functions-are-undesirable" aria-label="Anchor link for: t82 linearize a hierarchy when virtual functions are undesirable" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>???</p>
<h3 id="t83-do-not-declare-a-member-function-template-virtual"><a name="Rt-virtual"></a>T.83: Do not declare a member function template virtual<a class="anchorjs-link " href="#t83-do-not-declare-a-member-function-template-virtual" aria-label="Anchor link for: t83 do not declare a member function template virtual" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>C++ does not support that.
If it did, vtbls could not be generated until link time.
And in general, implementations must deal with dynamic linking.</p>
<h3 id="t84-use-a-non-template-core-implementation-to-provide-an-abi-stable-interface"><a name="Rt-abi"></a>T.84: Use a non-template core implementation to provide an ABI-stable interface<a class="anchorjs-link " href="#t84-use-a-non-template-core-implementation-to-provide-an-abi-stable-interface" aria-label="Anchor link for: t84 use a non template core implementation to provide an abi stable interface" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Improve stability of code.
Avoid code bloat.</p>
<h3 id="t100-use-variadic-templates-when-you-need-a-function-that-takes-a-variable-number-of-arguments-of-a-variety-of-types"><a name="Rt-variadic"></a>T.100: Use variadic templates when you need a function that takes a variable number of arguments of a variety of types<a class="anchorjs-link " href="#t100-use-variadic-templates-when-you-need-a-function-that-takes-a-variable-number-of-arguments-of-a-variety-of-types" aria-label="Anchor link for: t100 use variadic templates when you need a function that takes a variable number of arguments of a variety of types" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Variadic templates is the most general mechanism for that, and is both efficient and type-safe. Don’t use C varargs.</p>
<h3 id="t101--how-to-pass-arguments-to-a-variadic-template-"><a name="Rt-variadic-pass"></a>T.101: ??? How to pass arguments to a variadic template ???<a class="anchorjs-link " href="#t101--how-to-pass-arguments-to-a-variadic-template-" aria-label="Anchor link for: t101  how to pass arguments to a variadic template " data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>???</p>
<h3 id="t102-how-to-process-arguments-to-a-variadic-template"><a name="Rt-variadic-process"></a>T.102: How to process arguments to a variadic template<a class="anchorjs-link " href="#t102-how-to-process-arguments-to-a-variadic-template" aria-label="Anchor link for: t102 how to process arguments to a variadic template" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>???</p>
<h3 id="t103-dont-use-variadic-templates-for-homogeneous-argument-lists"><a name="Rt-variadic-not"></a>T.103: Don’t use variadic templates for homogeneous argument lists<a class="anchorjs-link " href="#t103-dont-use-variadic-templates-for-homogeneous-argument-lists" aria-label="Anchor link for: t103 dont use variadic templates for homogeneous argument lists" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>There are more precise ways of specifying a homogeneous sequence, such as an <code class="highlighter-rouge no-highlight">initializer_list</code>.</p>
<h3 id="t120-use-template-metaprogramming-only-when-you-really-need-to"><a name="Rt-metameta"></a>T.120: Use template metaprogramming only when you really need to<a class="anchorjs-link " href="#t120-use-template-metaprogramming-only-when-you-really-need-to" aria-label="Anchor link for: t120 use template metaprogramming only when you really need to" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Template metaprogramming is hard to get right, slows down compilation, and is often very hard to maintain.
However, there are real-world examples where template metaprogramming provides better performance that any alternative short of expert-level assembly code.
Also, there are real-world examples where template metaprogramming expresses the fundamental ideas better than run-time code.
For example, if you really need AST manipulation at compile time (e.g., for optional matrix operation folding) there may be no other way in C++.</p>
<h3 id="t121-use-template-metaprogramming-primarily-to-emulate-concepts"><a name="Rt-emulate"></a>T.121: Use template metaprogramming primarily to emulate concepts<a class="anchorjs-link " href="#t121-use-template-metaprogramming-primarily-to-emulate-concepts" aria-label="Anchor link for: t121 use template metaprogramming primarily to emulate concepts" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Until concepts become generally available, we need to emulate them using TMP.
Use cases that require concepts (e.g. overloading based on concepts) are among the most common (and simple) uses of TMP.</p>
<h3 id="t122-use-templates-usually-template-aliases-to-compute-types-at-compile-time"><a name="Rt-tmp"></a>T.122: Use templates (usually template aliases) to compute types at compile time<a class="anchorjs-link " href="#t122-use-templates-usually-template-aliases-to-compute-types-at-compile-time" aria-label="Anchor link for: t122 use templates usually template aliases to compute types at compile time" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Template metaprogramming is the only directly supported and half-way principled way of generating types at compile time.</p>
<h3 id="t123-use-constexpr-functions-to-compute-values-at-compile-time"><a name="Rt-fct"></a>T.123: Use <code class="highlighter-rouge no-highlight">constexpr</code> functions to compute values at compile time<a class="anchorjs-link " href="#t123-use-constexpr-functions-to-compute-values-at-compile-time" aria-label="Anchor link for: t123 use constexpr functions to compute values at compile time" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A function is the most obvious and conventional way of expressing the computation of a value.
Often a <code class="highlighter-rouge no-highlight">constexpr</code> function implies less compile-time overhead than alternatives.</p>
<h3 id="t124-prefer-to-use-standard-library-tmp-facilities"><a name="Rt-std-tmp"></a>T.124: Prefer to use standard-library TMP facilities<a class="anchorjs-link " href="#t124-prefer-to-use-standard-library-tmp-facilities" aria-label="Anchor link for: t124 prefer to use standard library tmp facilities" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Facilities defined in the standard, such as <code class="highlighter-rouge no-highlight">conditional</code>, <code class="highlighter-rouge no-highlight">enable_if</code>, and <code class="highlighter-rouge no-highlight">tuple</code>, are portable and can be assumed to be known.</p>
<h3 id="t125-if-you-need-to-go-beyond-the-standard-library-tmp-facilities-use-an-existing-library"><a name="Rt-lib"></a>T.125: If you need to go beyond the standard-library TMP facilities, use an existing library<a class="anchorjs-link " href="#t125-if-you-need-to-go-beyond-the-standard-library-tmp-facilities-use-an-existing-library" aria-label="Anchor link for: t125 if you need to go beyond the standard library tmp facilities use an existing library" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Getting advanced TMP facilities is not easy and using a library makes you part of a (hopefully supportive) community.
Write your own “advanced TMP support” only if you really have to.</p>
<h3 id="t140-name-all-operations-with-potential-for-reuse"><a name="Rt-name"></a>T.140: Name all operations with potential for reuse<a class="anchorjs-link " href="#t140-name-all-operations-with-potential-for-reuse" aria-label="Anchor link for: t140 name all operations with potential for reuse" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Documentation, readability, opportunity for reuse.</p>
<h3 id="t141-use-an-unnamed-lambda-if-you-need-a-simple-function-object-in-one-place-only"><a name="Rt-lambda"></a>T.141: Use an unnamed lambda if you need a simple function object in one place only<a class="anchorjs-link " href="#t141-use-an-unnamed-lambda-if-you-need-a-simple-function-object-in-one-place-only" aria-label="Anchor link for: t141 use an unnamed lambda if you need a simple function object in one place only" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>That makes the code concise and gives better locality than alternatives.</p>
<h3 id="t142-use-template-variables-to-simplify-notation"><a name="Rt-var"></a>T.142?: Use template variables to simplify notation<a class="anchorjs-link " href="#t142-use-template-variables-to-simplify-notation" aria-label="Anchor link for: t142 use template variables to simplify notation" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Improved readability.</p>
<h3 id="t143-dont-write-unintentionally-nongeneric-code"><a name="Rt-nongeneric"></a>T.143: Don’t write unintentionally nongeneric code<a class="anchorjs-link " href="#t143-dont-write-unintentionally-nongeneric-code" aria-label="Anchor link for: t143 dont write unintentionally nongeneric code" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Generality. Reusability. Don’t gratuitously commit to details; use the most general facilities available.</p>
<h3 id="t144-dont-specialize-function-templates"><a name="Rt-specialize-function"></a>T.144: Don’t specialize function templates<a class="anchorjs-link " href="#t144-dont-specialize-function-templates" aria-label="Anchor link for: t144 dont specialize function templates" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>You can’t partially specialize a function template per language rules. You can fully specialize a function template but you almost certainly want to overload instead – because function template specializations don’t participate in overloading, they don’t act as you probably wanted. Rarely, you should actually specialize by delegating to a class template that you can specialize properly.</p>
<h3 id="t150-check-that-a-class-matches-a-concept-using-static_assert"><a name="Rt-check-class"></a>T.150: Check that a class matches a concept using <code class="highlighter-rouge no-highlight">static_assert</code><a class="anchorjs-link " href="#t150-check-that-a-class-matches-a-concept-using-static_assert" aria-label="Anchor link for: t150 check that a class matches a concept using static_assert" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>If you intend for a class to match a concept, verifying that early saves users pain.</p>
<h3 id="cpl1-prefer-c-to-c"><a name="Rcpl-C"></a>CPL.1: Prefer C++ to C<a class="anchorjs-link " href="#cpl1-prefer-c-to-c" aria-label="Anchor link for: cpl1 prefer c to c" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>C++ provides better type checking and more notational support.
It provides better support for high-level programming and often generates faster code.</p>
<h3 id="cpl2-if-you-must-use-c-use-the-common-subset-of-c-and-c-and-compile-the-c-code-as-c"><a name="Rcpl-subset"></a>CPL.2: If you must use C, use the common subset of C and C++, and compile the C code as C++<a class="anchorjs-link " href="#cpl2-if-you-must-use-c-use-the-common-subset-of-c-and-c-and-compile-the-c-code-as-c" aria-label="Anchor link for: cpl2 if you must use c use the common subset of c and c and compile the c code as c" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>That subset can be compiled with both C and C++ compilers, and when compiled as C++ is better type checked than “pure C.”</p>
<h3 id="cpl3-if-you-must-use-c-for-interfaces-use-c-in-the-calling-code-using-such-interfaces"><a name="Rcpl-interface"></a>CPL.3: If you must use C for interfaces, use C++ in the calling code using such interfaces<a class="anchorjs-link " href="#cpl3-if-you-must-use-c-for-interfaces-use-c-in-the-calling-code-using-such-interfaces" aria-label="Anchor link for: cpl3 if you must use c for interfaces use c in the calling code using such interfaces" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>C++ is more expressive than C and offers better support for many types of programming.</p>
<h3 id="sf1-use-a-cpp-suffix-for-code-files-and-h-for-interface-files-if-your-project-doesnt-already-follow-another-convention"><a name="Rs-file-suffix"></a>SF.1: Use a <code class="highlighter-rouge no-highlight">.cpp</code> suffix for code files and <code class="highlighter-rouge no-highlight">.h</code> for interface files if your project doesn’t already follow another convention<a class="anchorjs-link " href="#sf1-use-a-cpp-suffix-for-code-files-and-h-for-interface-files-if-your-project-doesnt-already-follow-another-convention" aria-label="Anchor link for: sf1 use a cpp suffix for code files and h for interface files if your project doesnt already follow another convention" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>It’s a longstanding convention.
But consistency is more important, so if your project uses something else, follow that.</p>
<h3 id="sf2-a-h-file-may-not-contain-object-definitions-or-non-inline-function-definitions"><a name="Rs-inline"></a>SF.2: A <code class="highlighter-rouge no-highlight">.h</code> file may not contain object definitions or non-inline function definitions<a class="anchorjs-link " href="#sf2-a-h-file-may-not-contain-object-definitions-or-non-inline-function-definitions" aria-label="Anchor link for: sf2 a h file may not contain object definitions or non inline function definitions" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Including entities subject to the one-definition rule leads to linkage errors.</p>
<h3 id="sf3-use-h-files-for-all-declarations-used-in-multiple-source-files"><a name="Rs-declaration-header"></a>SF.3: Use <code class="highlighter-rouge no-highlight">.h</code> files for all declarations used in multiple source files<a class="anchorjs-link " href="#sf3-use-h-files-for-all-declarations-used-in-multiple-source-files" aria-label="Anchor link for: sf3 use h files for all declarations used in multiple source files" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Maintainability. Readability.</p>
<h3 id="sf4-include-h-files-before-other-declarations-in-a-file"><a name="Rs-include-order"></a>SF.4: Include <code class="highlighter-rouge no-highlight">.h</code> files before other declarations in a file<a class="anchorjs-link " href="#sf4-include-h-files-before-other-declarations-in-a-file" aria-label="Anchor link for: sf4 include h files before other declarations in a file" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Minimize context dependencies and increase readability.</p>
<h3 id="sf5-a-cpp-file-must-include-the-h-files-that-defines-its-interface"><a name="Rs-consistency"></a>SF.5: A <code class="highlighter-rouge no-highlight">.cpp</code> file must include the <code class="highlighter-rouge no-highlight">.h</code> file(s) that defines its interface<a class="anchorjs-link " href="#sf5-a-cpp-file-must-include-the-h-files-that-defines-its-interface" aria-label="Anchor link for: sf5 a cpp file must include the h files that defines its interface" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>This enables the compiler to do an early consistency check.</p>
<h3 id="sf6-use-using-namespace-directives-for-transition-for-foundation-libraries-such-as-std-or-within-a-local-scope-only"><a name="Rs-using"></a>SF.6: Use <code class="highlighter-rouge no-highlight">using namespace</code> directives for transition, for foundation libraries (such as <code class="highlighter-rouge no-highlight">std</code>), or within a local scope (only)<a class="anchorjs-link " href="#sf6-use-using-namespace-directives-for-transition-for-foundation-libraries-such-as-std-or-within-a-local-scope-only" aria-label="Anchor link for: sf6 use using namespace directives for transition for foundation libraries such as std or within a local scope only" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><code class="highlighter-rouge no-highlight">using namespace</code> can lead to name clashes, so it should be used sparingly.
 However, it is not always possible to qualify every name from a namespace in user code (e.g., during transition)
 and sometimes a namespace is so fundamental and prevalent in a code base, that consistent qualification would be verbose and distracting.</p>
<h3 id="sf7-dont-write-using-namespace-in-a-header-file"><a name="Rs-using-directive"></a>SF.7: Don’t write <code class="highlighter-rouge no-highlight">using namespace</code> in a header file<a class="anchorjs-link " href="#sf7-dont-write-using-namespace-in-a-header-file" aria-label="Anchor link for: sf7 dont write using namespace in a header file" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Doing so takes away an <code class="highlighter-rouge no-highlight">#include</code>r’s ability to effectively disambiguate and to use alternatives.</p>
<h3 id="sf8-use-include-guards-for-all-h-files"><a name="Rs-guards"></a>SF.8: Use <code class="highlighter-rouge no-highlight">#include</code> guards for all <code class="highlighter-rouge no-highlight">.h</code> files<a class="anchorjs-link " href="#sf8-use-include-guards-for-all-h-files" aria-label="Anchor link for: sf8 use include guards for all h files" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To avoid files being <code class="highlighter-rouge no-highlight">#include</code>d several times.</p>
<p>In order to avoid include guard collisions, do not just name the guard after the filename.
Be sure to also include a key and good differentiator, such as the name of library or component
the header file is part of.</p>
<h3 id="sf9-avoid-cyclic-dependencies-among-source-files"><a name="Rs-cycles"></a>SF.9: Avoid cyclic dependencies among source files<a class="anchorjs-link " href="#sf9-avoid-cyclic-dependencies-among-source-files" aria-label="Anchor link for: sf9 avoid cyclic dependencies among source files" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Cycles complicates comprehension and slows down compilation.
Complicates conversion to use language-supported modules (when they become available).</p>
<h3 id="sf10-avoid-dependencies-on-implicitly-included-names"><a name="Rs-implicit"></a>SF.10: Avoid dependencies on implicitly <code class="highlighter-rouge no-highlight">#include</code>d names<a class="anchorjs-link " href="#sf10-avoid-dependencies-on-implicitly-included-names" aria-label="Anchor link for: sf10 avoid dependencies on implicitly included names" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Avoid surprises.
Avoid having to change <code class="highlighter-rouge no-highlight">#include</code>s if an <code class="highlighter-rouge no-highlight">#include</code>d header changes.
Avoid accidentally becoming dependent on implementation details and logically separate entities included in a header.</p>
<h3 id="sf20-use-namespaces-to-express-logical-structure"><a name="Rs-namespace"></a>SF.20: Use <code class="highlighter-rouge no-highlight">namespace</code>s to express logical structure<a class="anchorjs-link " href="#sf20-use-namespaces-to-express-logical-structure" aria-label="Anchor link for: sf20 use namespaces to express logical structure" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>???</p>
<h3 id="sf21-dont-use-an-unnamed-anonymous-namespace-in-a-header"><a name="Rs-unnamed"></a>SF.21: Don’t use an unnamed (anonymous) namespace in a header<a class="anchorjs-link " href="#sf21-dont-use-an-unnamed-anonymous-namespace-in-a-header" aria-label="Anchor link for: sf21 dont use an unnamed anonymous namespace in a header" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>It is almost always a bug to mention an unnamed namespace in a header file.</p>
<h3 id="sf22-use-an-unnamed-anonymous-namespace-for-all-internalnonexported-entities"><a name="Rs-unnamed2"></a>SF.22: Use an unnamed (anonymous) namespace for all internal/nonexported entities<a class="anchorjs-link " href="#sf22-use-an-unnamed-anonymous-namespace-for-all-internalnonexported-entities" aria-label="Anchor link for: sf22 use an unnamed anonymous namespace for all internalnonexported entities" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Nothing external can depend on an entity in a nested unnamed namespace.
Consider putting every definition in an implementation source file in an unnamed namespace unless that is defining an “external/exported” entity.</p>
<h3 id="sl1--use-libraries-wherever-possible"><a name="Rsl-lib"></a>SL.1:  Use libraries wherever possible<a class="anchorjs-link " href="#sl1--use-libraries-wherever-possible" aria-label="Anchor link for: sl1  use libraries wherever possible" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Save time. Don’t re-invent the wheel.
Don’t replicate the work of others.
Benefit from other people’s work when they make improvements.
Help other people when you make improvements.</p>
<h3 id="sl2-prefer-the-standard-library-to-other-libraries"><a name="Rsl-sl"></a>SL.2: Prefer the standard library to other libraries<a class="anchorjs-link " href="#sl2-prefer-the-standard-library-to-other-libraries" aria-label="Anchor link for: sl2 prefer the standard library to other libraries" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>More people know the standard library.
It is more likely to be stable, well-maintained, and widely available than your own code or most other libraries.</p>
<h3 id="sl3-do-not-add-non-standard-entities-to-namespace-std"><a name="sl-std"></a>SL.3: Do not add non-standard entities to namespace <code class="highlighter-rouge no-highlight">std</code><a class="anchorjs-link " href="#sl3-do-not-add-non-standard-entities-to-namespace-std" aria-label="Anchor link for: sl3 do not add non standard entities to namespace std" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Adding to <code class="highlighter-rouge no-highlight">std</code> may change the meaning of otherwise standards conforming code.
Additions to <code class="highlighter-rouge no-highlight">std</code> may clash with future versions of the standard.</p>
<h3 id="sl4-use-the-standard-library-in-a-type-safe-manner"><a name="sl-safe"></a>SL.4: Use the standard library in a type-safe manner<a class="anchorjs-link " href="#sl4-use-the-standard-library-in-a-type-safe-manner" aria-label="Anchor link for: sl4 use the standard library in a type safe manner" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Because, obviously, breaking this rule can lead to undefined behavior, memory corruption, and all kinds of other bad errors.</p>
<h3 id="slcon1-prefer-using-stl-array-or-vector-instead-of-a-c-array"><a name="Rsl-arrays"></a>SL.con.1: Prefer using STL <code class="highlighter-rouge no-highlight">array</code> or <code class="highlighter-rouge no-highlight">vector</code> instead of a C array<a class="anchorjs-link " href="#slcon1-prefer-using-stl-array-or-vector-instead-of-a-c-array" aria-label="Anchor link for: slcon1 prefer using stl array or vector instead of a c array" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>C arrays are less safe, and have no advantages over <code class="highlighter-rouge no-highlight">array</code> and <code class="highlighter-rouge no-highlight">vector</code>.
For a fixed-length array, use <code class="highlighter-rouge no-highlight">std::array</code>, which does not degenerate to a pointer when passed to a function and does know its size.
Also, like a built-in array, a stack-allocated <code class="highlighter-rouge no-highlight">std::array</code> keeps its elements on the stack.
For a variable-length array, use <code class="highlighter-rouge no-highlight">std::vector</code>, which additionally can change its size and handles memory allocation.</p>
<h3 id="slcon2-prefer-using-stl-vector-by-default-unless-you-have-a-reason-to-use-a-different-container"><a name="Rsl-vector"></a>SL.con.2: Prefer using STL <code class="highlighter-rouge no-highlight">vector</code> by default unless you have a reason to use a different container<a class="anchorjs-link " href="#slcon2-prefer-using-stl-vector-by-default-unless-you-have-a-reason-to-use-a-different-container" aria-label="Anchor link for: slcon2 prefer using stl vector by default unless you have a reason to use a different container" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><code class="highlighter-rouge no-highlight">vector</code> and <code class="highlighter-rouge no-highlight">array</code> are the only standard containers that offer the fastest general-purpose access (random access, including being vectorization-friendly), the fastest default access pattern (begin-to-end or end-to-begin is prefetcher-friendly), and the lowest space overhead (contiguous layout has zero per-element overhead, which is cache-friendly).
Usually you need to add and remove elements from the container, so use <code class="highlighter-rouge no-highlight">vector</code> by default; if you don’t need to modify the container’s size, use <code class="highlighter-rouge no-highlight">array</code>.</p>
<p>Even when other containers seem more suited, such a <code class="highlighter-rouge no-highlight">map</code> for O(log N) lookup performance or a <code class="highlighter-rouge no-highlight">list</code> for efficient insertion in the middle, a <code class="highlighter-rouge no-highlight">vector</code> will usually still perform better for containers up to a few KB in size.</p>
<h3 id="slcon3-avoid-bounds-errors"><a name="Rsl-bounds"></a>SL.con.3: Avoid bounds errors<a class="anchorjs-link " href="#slcon3-avoid-bounds-errors" aria-label="Anchor link for: slcon3 avoid bounds errors" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Read or write beyond an allocated range of elements typically leads to bad errors, wrong results, crashes, and security violations.</p>
<h3 id="slstr1-use-stdstring-to-own-character-sequences"><a name="Rstr-string"></a>SL.str.1: Use <code class="highlighter-rouge no-highlight">std::string</code> to own character sequences<a class="anchorjs-link " href="#slstr1-use-stdstring-to-own-character-sequences" aria-label="Anchor link for: slstr1 use stdstring to own character sequences" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><code class="highlighter-rouge no-highlight">string</code> correctly handles allocation, ownership, copying, gradual expansion, and offers a variety of useful operations.</p>
<h3 id="slstr2-use-stdstring_view-or-gslstring_span-to-refer-to-character-sequences"><a name="Rstr-view"></a>SL.str.2: Use <code class="highlighter-rouge no-highlight">std::string_view</code> or <code class="highlighter-rouge no-highlight">gsl::string_span</code> to refer to character sequences<a class="anchorjs-link " href="#slstr2-use-stdstring_view-or-gslstring_span-to-refer-to-character-sequences" aria-label="Anchor link for: slstr2 use stdstring_view or gslstring_span to refer to character sequences" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><code class="highlighter-rouge no-highlight">std::string_view</code> or <code class="highlighter-rouge no-highlight">gsl::string_span</code> provides simple and (potentially) safe access to character sequences independently of how
those sequences are allocated and stored.</p>
<h3 id="slstr3-use-zstring-or-czstring-to-refer-to-a-c-style-zero-terminated-sequence-of-characters"><a name="Rstr-zstring"></a>SL.str.3: Use <code class="highlighter-rouge no-highlight">zstring</code> or <code class="highlighter-rouge no-highlight">czstring</code> to refer to a C-style, zero-terminated, sequence of characters<a class="anchorjs-link " href="#slstr3-use-zstring-or-czstring-to-refer-to-a-c-style-zero-terminated-sequence-of-characters" aria-label="Anchor link for: slstr3 use zstring or czstring to refer to a c style zero terminated sequence of characters" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability.
Statement of intent.
A plain <code class="highlighter-rouge no-highlight">char*</code> can be a pointer to a single character, a pointer to an array of characters, a pointer to a C-style (zero-terminated) string, or even to a small integer.
Distinguishing these alternatives prevents misunderstandings and bugs.</p>
<h3 id="slstr4-use-char-to-refer-to-a-single-character"><a name="Rstr-char*"></a>SL.str.4: Use <code class="highlighter-rouge no-highlight">char*</code> to refer to a single character<a class="anchorjs-link " href="#slstr4-use-char-to-refer-to-a-single-character" aria-label="Anchor link for: slstr4 use char to refer to a single character" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The variety of uses of <code class="highlighter-rouge no-highlight">char*</code> in current code is a major source of errors.</p>
<h3 id="slstr5-use-stdbyte-to-refer-to-byte-values-that-do-not-necessarily-represent-characters"><a name="Rstr-byte"></a>SL.str.5: Use <code class="highlighter-rouge no-highlight">std::byte</code> to refer to byte values that do not necessarily represent characters<a class="anchorjs-link " href="#slstr5-use-stdbyte-to-refer-to-byte-values-that-do-not-necessarily-represent-characters" aria-label="Anchor link for: slstr5 use stdbyte to refer to byte values that do not necessarily represent characters" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Use of <code class="highlighter-rouge no-highlight">char*</code> to represent a pointer to something that is not necessarily a character causes confusion
and disables valuable optimizations.</p>
<h3 id="slstr10-use-stdstring-when-you-need-to-perform-locale-sensitive-string-operations"><a name="Rstr-locale"></a>SL.str.10: Use <code class="highlighter-rouge no-highlight">std::string</code> when you need to perform locale-sensitive string operations<a class="anchorjs-link " href="#slstr10-use-stdstring-when-you-need-to-perform-locale-sensitive-string-operations" aria-label="Anchor link for: slstr10 use stdstring when you need to perform locale sensitive string operations" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><code class="highlighter-rouge no-highlight">std::string</code> supports standard-library <a href="#Rstr-locale"><code class="highlighter-rouge no-highlight">locale</code> facilities</a></p>
<h3 id="slstr11-use-gslstring_span-rather-than-stdstring_view-when-you-need-to-mutate-a-string"><a name="Rstr-span"></a>SL.str.11: Use <code class="highlighter-rouge no-highlight">gsl::string_span</code> rather than <code class="highlighter-rouge no-highlight">std::string_view</code> when you need to mutate a string<a class="anchorjs-link " href="#slstr11-use-gslstring_span-rather-than-stdstring_view-when-you-need-to-mutate-a-string" aria-label="Anchor link for: slstr11 use gslstring_span rather than stdstring_view when you need to mutate a string" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><code class="highlighter-rouge no-highlight">std::string_view</code> is read-only.</p>
<h3 id="slstr12-use-the-s-suffix-for-string-literals-meant-to-be-standard-library-strings"><a name="Rstr-s"></a>SL.str.12: Use the <code class="highlighter-rouge no-highlight">s</code> suffix for string literals meant to be standard-library <code class="highlighter-rouge no-highlight">string</code>s<a class="anchorjs-link " href="#slstr12-use-the-s-suffix-for-string-literals-meant-to-be-standard-library-strings" aria-label="Anchor link for: slstr12 use the s suffix for string literals meant to be standard library strings" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Direct expression of an idea minimizes mistakes.</p>
<h3 id="slio1-use-character-level-input-only-when-you-have-to"><a name="Rio-low"></a>SL.io.1: Use character-level input only when you have to<a class="anchorjs-link " href="#slio1-use-character-level-input-only-when-you-have-to" aria-label="Anchor link for: slio1 use character level input only when you have to" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Unless you genuinely just deal with individual characters, using character-level input leads to the user code performing potentially error-prone
and potentially inefficient composition of tokens out of characters.</p>
<h3 id="slio2-when-reading-always-consider-ill-formed-input"><a name="Rio-validate"></a>SL.io.2: When reading, always consider ill-formed input<a class="anchorjs-link " href="#slio2-when-reading-always-consider-ill-formed-input" aria-label="Anchor link for: slio2 when reading always consider ill formed input" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Errors are typically best handled as soon as possible.
If input isn’t validated, every function must be written to cope with bad data (and that is not practical).</p>
<h3 id="slio3-prefer-iostreams-for-io"><a name="Rio-streams"></a>SL.io.3: Prefer <code class="highlighter-rouge no-highlight">iostream</code>s for I/O<a class="anchorjs-link " href="#slio3-prefer-iostreams-for-io" aria-label="Anchor link for: slio3 prefer iostreams for io" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><code class="highlighter-rouge no-highlight">iostream</code>s are safe, flexible, and extensible.</p>
<h3 id="slio10-unless-you-use-printf-family-functions-call-ios_basesync_with_stdiofalse"><a name="Rio-sync"></a>SL.io.10: Unless you use <code class="highlighter-rouge no-highlight">printf</code>-family functions call <code class="highlighter-rouge no-highlight">ios_base::sync_with_stdio(false)</code><a class="anchorjs-link " href="#slio10-unless-you-use-printf-family-functions-call-ios_basesync_with_stdiofalse" aria-label="Anchor link for: slio10 unless you use printf family functions call ios_basesync_with_stdiofalse" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Synchronizing <code class="highlighter-rouge no-highlight">iostreams</code> with <code class="highlighter-rouge no-highlight">printf-style</code> I/O can be costly.
<code class="highlighter-rouge no-highlight">cin</code> and <code class="highlighter-rouge no-highlight">cout</code> are by default synchronized with <code class="highlighter-rouge no-highlight">printf</code>.</p>
<h3 id="slc1-dont-use-setjmplongjmp"><a name="Rclib-jmp"></a>SL.C.1: Don’t use setjmp/longjmp<a class="anchorjs-link " href="#slc1-dont-use-setjmplongjmp" aria-label="Anchor link for: slc1 dont use setjmplongjmp" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>a <code class="highlighter-rouge no-highlight">longjmp</code> ignores destructors, thus invalidating all resource-management strategies relying on RAII</p>
<h3 id="a2-express-potentially-reusable-parts-as-a-library"><a name="Ra-lib"></a>A.2: Express potentially reusable parts as a library<a class="anchorjs-link " href="#a2-express-potentially-reusable-parts-as-a-library" aria-label="Anchor link for: a2 express potentially reusable parts as a library" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<h3 id="a4-there-should-be-no-cycles-among-libraries"><a name="Ra-dag"></a>A.4: There should be no cycles among libraries<a class="anchorjs-link " href="#a4-there-should-be-no-cycles-among-libraries" aria-label="Anchor link for: a4 there should be no cycles among libraries" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<h3 id="nl1-dont-say-in-comments-what-can-be-clearly-stated-in-code"><a name="Rl-comments"></a>NL.1: Don’t say in comments what can be clearly stated in code<a class="anchorjs-link " href="#nl1-dont-say-in-comments-what-can-be-clearly-stated-in-code" aria-label="Anchor link for: nl1 dont say in comments what can be clearly stated in code" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Compilers do not read comments.
Comments are less precise than code.
Comments are not updated as consistently as code.</p>
<h3 id="nl2-state-intent-in-comments"><a name="Rl-comments-intent"></a>NL.2: State intent in comments<a class="anchorjs-link " href="#nl2-state-intent-in-comments" aria-label="Anchor link for: nl2 state intent in comments" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Code says what is done, not what is supposed to be done. Often intent can be stated more clearly and concisely than the implementation.</p>
<h3 id="nl3-keep-comments-crisp"><a name="Rl-comments-crisp"></a>NL.3: Keep comments crisp<a class="anchorjs-link " href="#nl3-keep-comments-crisp" aria-label="Anchor link for: nl3 keep comments crisp" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Verbosity slows down understanding and makes the code harder to read by spreading it around in the source file.</p>
<h3 id="nl4-maintain-a-consistent-indentation-style"><a name="Rl-indent"></a>NL.4: Maintain a consistent indentation style<a class="anchorjs-link " href="#nl4-maintain-a-consistent-indentation-style" aria-label="Anchor link for: nl4 maintain a consistent indentation style" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability. Avoidance of “silly mistakes.”</p>
<h3 id="nl9-use-all_caps-for-macro-names-only"><a name="Rl-all-caps"></a>NL.9: Use <code class="highlighter-rouge no-highlight">ALL_CAPS</code> for macro names only<a class="anchorjs-link " href="#nl9-use-all_caps-for-macro-names-only" aria-label="Anchor link for: nl9 use all_caps for macro names only" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To avoid confusing macros with names that obey scope and type rules.</p>
<h3 id="nl10-avoid-camelcase"><a name="Rl-camel"></a>NL.10: Avoid CamelCase<a class="anchorjs-link " href="#nl10-avoid-camelcase" aria-label="Anchor link for: nl10 avoid camelcase" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The use of underscores to separate parts of a name is the original C and C++ style and used in the C++ standard library.
If you prefer CamelCase, you have to choose among different flavors of camelCase.</p>
<h3 id="nl15-use-spaces-sparingly"><a name="Rl-space"></a>NL.15: Use spaces sparingly<a class="anchorjs-link " href="#nl15-use-spaces-sparingly" aria-label="Anchor link for: nl15 use spaces sparingly" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Too much space makes the text larger and distracts.</p>
<h3 id="nl11-make-literals-readable"><a name="Rl-literals"></a>NL.11: Make literals readable<a class="anchorjs-link " href="#nl11-make-literals-readable" aria-label="Anchor link for: nl11 make literals readable" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability.</p>
<h3 id="nl16-use-a-conventional-class-member-declaration-order"><a name="Rl-order"></a>NL.16: Use a conventional class member declaration order<a class="anchorjs-link " href="#nl16-use-a-conventional-class-member-declaration-order" aria-label="Anchor link for: nl16 use a conventional class member declaration order" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>A conventional order of members improves readability.</p>
<p>When declaring a class use the following order</p>
<h3 id="nl17-use-kr-derived-layout"><a name="Rl-knr"></a>NL.17: Use K&amp;R-derived layout<a class="anchorjs-link " href="#nl17-use-kr-derived-layout" aria-label="Anchor link for: nl17 use kr derived layout" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>This is the original C and C++ layout. It preserves vertical space well. It distinguishes different language constructs (such as functions and classes) well.</p>
<h3 id="nl18-use-c-style-declarator-layout"><a name="Rl-ptr"></a>NL.18: Use C++-style declarator layout<a class="anchorjs-link " href="#nl18-use-c-style-declarator-layout" aria-label="Anchor link for: nl18 use c style declarator layout" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>The C-style layout emphasizes use in expressions and grammar, whereas the C++-style emphasizes types.
The use in expressions argument doesn’t hold for references.</p>
<h3 id="nl19-avoid-names-that-are-easily-misread"><a name="Rl-misread"></a>NL.19: Avoid names that are easily misread<a class="anchorjs-link " href="#nl19-avoid-names-that-are-easily-misread" aria-label="Anchor link for: nl19 avoid names that are easily misread" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability.
Not everyone has screens and printers that make it easy to distinguish all characters.
We easily confuse similarly spelled and slightly misspelled words.</p>
<h3 id="nl20-dont-place-two-statements-on-the-same-line"><a name="Rl-stmt"></a>NL.20: Don’t place two statements on the same line<a class="anchorjs-link " href="#nl20-dont-place-two-statements-on-the-same-line" aria-label="Anchor link for: nl20 dont place two statements on the same line" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability.
It is really easy to overlook a statement when there is more on a line.</p>
<h3 id="nl21-declare-one-name-only-per-declaration"><a name="Rl-dcl"></a>NL.21: Declare one name (only) per declaration<a class="anchorjs-link " href="#nl21-declare-one-name-only-per-declaration" aria-label="Anchor link for: nl21 declare one name only per declaration" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Readability.
Minimizing confusion with the declarator syntax.</p>
<h3 id="nl25-dont-use-void-as-an-argument-type"><a name="Rl-void"></a>NL.25: Don’t use <code class="highlighter-rouge no-highlight">void</code> as an argument type<a class="anchorjs-link " href="#nl25-dont-use-void-as-an-argument-type" aria-label="Anchor link for: nl25 dont use void as an argument type" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>It’s verbose and only needed where C compatibility matters.</p>
<h3 id="nl26-use-conventional-const-notation"><a name="Rl-const"></a>NL.26: Use conventional <code class="highlighter-rouge no-highlight">const</code> notation<a class="anchorjs-link " href="#nl26-use-conventional-const-notation" aria-label="Anchor link for: nl26 use conventional const notation" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Conventional notation is more familiar to more programmers.
Consistency in large code bases.</p>
<h3 id="discussion-provide-strong-resource-safety-that-is-never-leak-anything-that-you-think-of-as-a-resource"><a name="Cr-safety"></a>Discussion: Provide strong resource safety; that is, never leak anything that you think of as a resource<a class="anchorjs-link " href="#discussion-provide-strong-resource-safety-that-is-never-leak-anything-that-you-think-of-as-a-resource" aria-label="Anchor link for: discussion provide strong resource safety that is never leak anything that you think of as a resource" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Prevent leaks. Leaks can lead to performance degradation, mysterious error, system crashes, and security violations.</p>
<p><strong>Alternative formulation</strong>: Have every resource represented as an object of some class managing its lifetime.</p>
<h3 id="discussion-never-throw-while-holding-a-resource-not-owned-by-a-handle"><a name="Cr-never"></a>Discussion: Never throw while holding a resource not owned by a handle<a class="anchorjs-link " href="#discussion-never-throw-while-holding-a-resource-not-owned-by-a-handle" aria-label="Anchor link for: discussion never throw while holding a resource not owned by a handle" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>That would be a leak.</p>
<h3 id="discussion-a-raw-pointer-or-reference-is-never-a-resource-handle"><a name="Cr-raw"></a>Discussion: A “raw” pointer or reference is never a resource handle<a class="anchorjs-link " href="#discussion-a-raw-pointer-or-reference-is-never-a-resource-handle" aria-label="Anchor link for: discussion a raw pointer or reference is never a resource handle" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To be able to distinguish owners from views.</p>
<h3 id="discussion-never-let-a-pointer-outlive-the-object-it-points-to"><a name="Cr-outlive"></a>Discussion: Never let a pointer outlive the object it points to<a class="anchorjs-link " href="#discussion-never-let-a-pointer-outlive-the-object-it-points-to" aria-label="Anchor link for: discussion never let a pointer outlive the object it points to" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To avoid extremely hard-to-find errors. Dereferencing such a pointer is undefined behavior and could lead to violations of the type system.</p>
<h3 id="discussion-use-templates-to-express-containers-and-other-resource-handles"><a name="Cr-templates"></a>Discussion: Use templates to express containers (and other resource handles)<a class="anchorjs-link " href="#discussion-use-templates-to-express-containers-and-other-resource-handles" aria-label="Anchor link for: discussion use templates to express containers and other resource handles" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To provide statically type-safe manipulation of elements.</p>
<h3 id="discussion-return-containers-by-value-relying-on-move-or-copy-elision-for-efficiency"><a name="Cr-value-return"></a>Discussion: Return containers by value (relying on move or copy elision for efficiency)<a class="anchorjs-link " href="#discussion-return-containers-by-value-relying-on-move-or-copy-elision-for-efficiency" aria-label="Anchor link for: discussion return containers by value relying on move or copy elision for efficiency" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To simplify code and eliminate a need for explicit memory management. To bring an object into a surrounding scope, thereby extending its lifetime. See also <a href="#Rf-out">F.20, the general item about “out” output values</a>.</p>
<h3 id="discussion-if-a-class-is-a-resource-handle-it-needs-a-constructor-a-destructor-and-copy-andor-move-operations"><a name="Cr-handle"></a>Discussion: If a class is a resource handle, it needs a constructor, a destructor, and copy and/or move operations<a class="anchorjs-link " href="#discussion-if-a-class-is-a-resource-handle-it-needs-a-constructor-a-destructor-and-copy-andor-move-operations" aria-label="Anchor link for: discussion if a class is a resource handle it needs a constructor a destructor and copy andor move operations" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To provide complete control of the lifetime of the resource. To provide a coherent set of operations on the resource.</p>
<h3 id="discussion-if-a-class-is-a-container-give-it-an-initializer-list-constructor"><a name="Cr-list"></a>Discussion: If a class is a container, give it an initializer-list constructor<a class="anchorjs-link " href="#discussion-if-a-class-is-a-container-give-it-an-initializer-list-constructor" aria-label="Anchor link for: discussion if a class is a container give it an initializer list constructor" data-anchorjs-icon="" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: 1; font-family: anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>It is common to need an initial set of elements.</p>
</div></body></html>
